(this.webpackJsonponeauth=this.webpackJsonponeauth||[]).push([[0],[,,,,,,,,,,,,,,function(e,a,t){e.exports=t.p+"static/media/oneauth_white.5604209e.svg"},function(e,a,t){e.exports=t.p+"static/media/oneauth_black.c3064fb1.svg"},,,,,,function(e,a,t){},,,,function(e,a,t){},,,function(e,a,t){},,,,,function(e,a,t){},,,,function(e,a,t){e.exports=t.p+"static/media/oneauth_white_small.92853b8d.svg"},,function(e,a,t){},,,,,,,,,function(e,a,t){},function(e,a,t){},,,,,,,,,,function(e,a,t){e.exports=t(119)},,,,,function(e,a,t){},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,,,,,,,,,,,,,,function(e,a,t){},,,,,,,,,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),i=t(29),r=t.n(i),o=(t(64),t(6)),s=t(2),l=t(18),u=t(51),m=t(3),d={isAuth:!1,email:"",firstName:"",lastName:""},p={theme:"theme_dark",textSize:"textsize_medium",themeColor:"themecolor1",tenant:"",appStatus:"notmounted"},f={data:[]},h={data:[]},g={data:[]},b={data:[]},E={data:[]},v=Object(l.c)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_AUTH":return console.log("GET_AUTH reducer"),Object(m.a)({},e);case"ADD_AUTH":return console.log("ADD_AUTH reducer"),Object(m.a)({},e,{},a.payload);case"REMOVE_AUTH":return console.log("REMOVE_AUTH reducer"),Object(m.a)({},e,{isAuth:!1,firstName:"",lastName:"",email:"",token:""});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_PROFILE":return console.log("GET_PROFILE reducer"),Object(m.a)({},e);case"SET_PROFILE":return console.log("SET_PROFILE reducer"),Object(m.a)({},e,{},a.payload);default:return e}},space:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_SPACE":return console.log("SET SPACE reducer"),Object(m.a)({},e,{},a.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_APP":return console.log("SET APP reducer"),Object(m.a)({},e,{},a.payload);default:return e}},oaUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_ALL_USERS":return console.log("SET SPACE reducer"),Object(m.a)({},e,{},a.payload);default:return e}},oaRoles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_ROLE":return console.log("SET SPACE reducer"),Object(m.a)({},e,{},a.payload);default:return e}},appSpace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_APP_SPACE":return console.log("SET SPACE reducer"),Object(m.a)({},e,{},a.payload);default:return e}}}),w=[u.a],y=Object(l.e)(v,{},Object(l.d)(l.a.apply(void 0,w))),N=(t(39),t(69),t(12)),O=t(55),j=t(125),k=t(126),S=(t(70),t(56)),A=t(127),C=new S.a;function _(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2?arguments[2]:void 0;C.next({name:e,signal:a,data:t})}function P(){return C.asObservable()}function x(){return Object(A.a)()}var I=function(e){return Object(n.useEffect)((function(){_("navbar",!0)}),[]),c.a.createElement("div",{className:"page-home"},c.a.createElement("div",{className:"app-container smooth-page"},c.a.createElement("div",{className:"home"},c.a.createElement("div",{className:"typography-10"},"What is OneAuth?"),c.a.createElement("div",{className:"typography-5"},"OneAuth is an enterprise level single sign on (SSO) solution for authentication",c.a.createElement("div",{className:"typography-10"},"Why OneAuth? "),"OneAuth supports multitenant architecture out of the box with security in the core. It helps customers with a single sign on solution which can be incorporated for a single application or multiple application. It is also opensource project which helps customers to understand the solution in better way.",c.a.createElement("div",{className:"typography-10"},"How to use?"),"To onboard into OneAuth you need to follow below basic steps -",c.a.createElement("ol",null,c.a.createElement("li",null,"Identify an admin and create OneAuth account for the admin using https://oneauth.ioak.org/#/"," "),c.a.createElement("li",null,"You can create account using any of the below mechanisms o Google authentication o Facebook authentication o Create account in IOAK with email Id - Once account is created check for further instruction sent to the email"),c.a.createElement("li",null,"- After confirmation, login to OneAuth with https://oneauth.ioak.org/#/"," "),c.a.createElement("li",null,"- Create a space for your organization ( You can have multiple space as well) - Create a application and provide your application url which will be used for redirecting - Once created map the application with space - Copy the application Id and add it to the environment variable for your application for connecting to oneauth. - Try navigation from application, you will be asked to register again. This registration for application, not the admin registration That\u2019s it, you have integrated your application with OneAuth"))))))},T=t(1),z=function(){return function(e){e({type:"GET_AUTH"})}},L=function(e){return function(a){a({type:"ADD_AUTH",payload:e})}},F=function(){return function(e){e({type:"REMOVE_AUTH"})}},R=(t(71),t(14)),D=t.n(R),U=t(15),H=t.n(U),V=t(5),B=(t(21),t(72),function(e){return c.a.createElement("div",{className:"oak-text-plain"},e.label&&c.a.createElement("label",{htmlFor:e.id},e.label),!e.multiline&&c.a.createElement("input",{disabled:e.disabled,autoComplete:"off",className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),type:e.type?e.type:"text",name:e.id,id:e.id,value:e.data[e.id],onChange:e.handleChange,onFocus:function(){e.handleFocus&&e.handleFocus()},placeholder:e.placeholder}),e.multiline&&c.a.createElement("textarea",{disabled:e.disabled,className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),id:e.id,name:e.id,value:e.data[e.id],onChange:e.handleChange}))});function G(e){return null===e||null!==e.match(/^ *$/)}t(73),t(74);var M=function(e){return c.a.createElement("svg",{version:"1.0",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 57 56",enableBackground:"new 0 0 57 56",style:e.dimension},c.a.createElement("g",{id:"Chat-Fenster"},c.a.createElement("g",{id:"chat_FAQ_Accordion2-Copy-13",transform:"translate(-1364.000000, -1001.000000)"},c.a.createElement("g",{id:"Send-Message",transform:"translate(397.000000, 1008.000000)"},c.a.createElement("g",{id:"Send-Button",transform:"translate(990.000000, 10.000000)"},c.a.createElement("g",{id:"Send_1_"},c.a.createElement("path",{style:e.style,d:"M16,0.5c-0.1-0.1-0.3-0.1-0.4-0.1L-7,10.8c-0.1,0.1-0.2,0.2-0.2,0.3s0.1,0.3,0.2,0.3l6.4,3.1 c0.1,0.1,0.3,0,0.4,0L6,9.9l-4.9,4.9C1,14.9,1,15,1,15.1l0.5,6.2c0,0.1,0.1,0.3,0.2,0.3h0.1c0.1,0,0.2,0,0.3-0.1l3.4-3.9l4.2,2 c0.1,0,0.2,0,0.3,0s0.2-0.1,0.2-0.2l5.9-18.6C16.1,0.7,16.1,0.6,16,0.5z"})))))))},q=function(e){return c.a.createElement("svg",{viewBox:"0 0 73 73",style:e.dimension},c.a.createElement("polygon",{fill:"#27AAE1",points:"38.5,-3.8 37.9,-3.8 37.9,-3.8 38.5,-3.8 "}),c.a.createElement("g",null,c.a.createElement("path",{fill:"#149ED9",d:"M27.6,23c2.6-1.8,5.8-2.9,9.3-2.9c3.4,0,6.6,1.1,9.3,2.9l6.3-7.5c-4.3-3.2-9.7-5.2-15.6-5.2 c-5.8,0-11.2,1.9-15.6,5.2L27.6,23z",style:e.accent}),c.a.createElement("rect",{x:"32",y:"37.4",width:"9.8",height:"25.6",style:e.style}),c.a.createElement("circle",{fill:"none",stroke:"#000000",strokeWidth:"9.75",strokeMiterlimit:"10",cx:"36.9",cy:"36.5",r:"30.9",style:Object(m.a)({},e.style,{fill:"none"})}),c.a.createElement("polygon",{fill:"#27AAE1",points:"37.2,-3.9 36.6,-3.9 36.6,-3.9 37.2,-3.9 \t"}),c.a.createElement("circle",{cx:"36.9",cy:"32.8",r:"7.8",style:e.style})))},Y=function(e){var a=function(e){var a={},t="";switch(e){case"primary":t="var(--color-primary-1)";break;case"secondary":t="var(--color-secondary-1)";break;case"tertiary":t="var(--color-tertiary-1)";break;case"success":t="var(--color-success)";break;case"failure":t="var(--color-failure)";break;case"warning":t="var(--color-warning)";break;default:t=e||"var(--color-foreground-1)"}return a.fill=t,a.color=t,a.stroke=t,a},t=function(){var a={};return a.fontSize=e.size?e.size:"24px",e.svg&&(a.height=e.size?e.size:"24px",a.width="auto"),a};return c.a.createElement("div",{className:"oak-icon"},e.mat&&c.a.createElement("i",{className:"material-icons",style:Object(m.a)({},a(e.color),{},t())},e.mat),e.fa&&c.a.createElement("i",{className:"fontawesome-icons ".concat(e.fa),style:Object(m.a)({},a(e.color),{},t())},e.mat),e.svg&&"send"===e.svg&&c.a.createElement(M,{style:a(e.color),accent:e.accent&&a(e.accent),dimension:t()}),e.svg&&"ioak"===e.svg&&c.a.createElement(q,{style:a(e.color),accent:e.accent&&a(e.accent),dimension:t()}))},W=function(e){return c.a.createElement("button",{className:"oak-button ".concat(function(){var a=e.theme?e.theme:"";return a+=e.variant?" ".concat(e.variant):"",e.children||(a+=" icon"),a+=e.invert?" invert":"",a+=e.small?" small":"",a+=e.align?" align-".concat(e.align):""}()),onClick:e.action},c.a.createElement("div",{className:"button-label-container"},e.icon&&c.a.createElement(Y,{mat:e.icon,size:"1.2em"}),e.fa&&c.a.createElement(Y,{fa:e.fa,size:"1.2em"}),e.svg&&c.a.createElement(Y,{svg:e.svg,size:"1.2em"}),e.children&&e.children))},J=t(27),$=t.n(J),K="https://oneauth-service.herokuapp.com";function Q(e,a){return $.a.get(K+e,a)}function X(e,a,t){return $.a.post(K+e,a,t)}function Z(e,a,t){return $.a.put(K+e,a,t)}function ee(e,a){return $.a.delete(K+e,a)}var ae=Object(s.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){var a=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",repeatpassword:"",resetCode:""}),t=Object(T.a)(a,2),i=t[0],r=t[1],o=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",repeatpassword:""}),s=Object(T.a)(o,2),l=s[0],u=s[1],d=Object(n.useState)("userdetails"),p=Object(T.a)(d,2),f=p[0],h=p[1],g=function(a){a.preventDefault();var t="/auth";e.isSpaceLogin&&(t="/auth/".concat(e.space));var n={firstName:"",lastName:"",email:"",password:"",repeatpassword:""},c=!1;_("notification",!1),_("login-spinner"),G(i.firstName)&&(c=!0,n.firstName="Cannot be empty"),G(i.lastName)&&(c=!0,n.lastName="Cannot be empty"),G(i.email)&&(c=!0,n.email="Cannot be empty"),/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i.email.trim().toLowerCase())||(c=!0,n.email="Invalid email"),G(i.password)&&(c=!0,n.password="Cannot be empty"),i.password!==i.repeatpassword&&(c=!0,n.repeatpassword="Password does not match"),c?(u(n),_("login-spinner",!1)):X("".concat(t,"/signup"),{firstName:i.firstName.trim(),lastName:i.lastName.trim(),email:i.email.trim().toLowerCase(),password:i.password},null).then((function(e){200===e.status?(h("created"),_("login-notification",!0,{type:"email-main",message:"Your account has been setup. Your account will be activated after you confirm your email. Please check your email for further instructions"})):_("login-notification",!0,{type:"failure",message:"Unknown error"})})).catch((function(e){var a;403===(null===(a=e.response)||void 0===a?void 0:a.status)?(c=!0,n.email="User account already exists"):_("login-notification",!0,{type:"failure",message:"Unknown error"})})).finally((function(){u(n),_("login-spinner",!1)}))},b=function(e){r(Object(m.a)({},i,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))};return c.a.createElement("form",{method:"GET",onSubmit:function(e){"userdetails"===f&&g(e)},noValidate:!0,className:"login"},"userdetails"===f&&c.a.createElement("div",{className:"form-signup"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!l.firstName&&c.a.createElement("div",{className:"label-text"},"First Name"),l.firstName&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),l.firstName)),c.a.createElement(B,{id:"firstName",data:i,handleChange:function(e){return b(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!l.lastName&&c.a.createElement("div",{className:"label-text"},"Last Name"),l.lastName&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),l.lastName)),c.a.createElement(B,{id:"lastName",data:i,handleChange:function(e){return b(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!l.email&&c.a.createElement("div",{className:"label-text"},"E-mail"),l.email&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),l.email)),c.a.createElement(B,{id:"email",placeholder:"example@domain.com",data:i,handleChange:function(e){return b(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!l.password&&c.a.createElement("div",{className:"label-text"},"Password"),l.password&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),l.password)),c.a.createElement(B,{type:"password",id:"password",placeholder:"Choose a strong password",data:i,handleChange:function(e){return b(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!l.repeatpassword&&c.a.createElement("div",{className:"label-text"},"Retype password"),l.repeatpassword&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),l.repeatpassword)),c.a.createElement(B,{type:"password",id:"repeatpassword",placeholder:"Don't forget it",data:i,handleChange:function(e){return b(e)}}))),c.a.createElement("div",{className:"action"},"userdetails"===f&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{variant:"regular",theme:"primary",action:g},"Create Account"),c.a.createElement("p",{className:"hr"},"or")),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.switchToSigninPage},"Log In"))))}))),te=t(52),ne=t(53),ce=t.n(ne),ie=Object(s.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L})(Object(o.b)((function(e){Object(s.c)(),Object(s.d)((function(e){return e.profile}));var a=Object(n.useState)({email:"",password:""}),t=Object(T.a)(a,2),i=t[0],r=t[1],o=Object(n.useState)("hide"),l=Object(T.a)(o,2),u=l[0],d=l[1],p=Object(n.useState)({email:"",password:""}),f=Object(T.a)(p,2),h=f[0],g=f[1],b=function(a){a.preventDefault();var t="/auth";e.isSpaceLogin&&(t="/auth/".concat(e.space));var n={email:"",password:""},c=!1;_("notification",!1),_("login-spinner"),d("hide"),G(i.email)?(c=!0,n.email="Cannot be empty"):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i.email.trim().toLowerCase())||(c=!0,n.email="Invalid email"),G(i.password)&&(c=!0,n.password="Cannot be empty"),c?(g(n),_("login-spinner",!1)):X("".concat(t,"/authorize"),{email:i.email.trim().toLowerCase(),password:i.password},null).then((function(e){E(t,e)})).catch((function(e){var a,t,c;404===(null===(a=e.response)||void 0===a?void 0:a.status)?n.email="User account does not exist":401===(null===(t=e.response)||void 0===t?void 0:t.status)?n.password="Incorrect password":403===(null===(c=e.response)||void 0===c?void 0:c.status)&&(n.email="Email not confirmed",d("showLink"))})).finally((function(){g(n),_("login-spinner",!1)}))},E=function(a,t){200===t.status&&Q("".concat(a,"/session/").concat(t.data.auth_key),null).then((function(a){200===a.status&&(e.isSpaceLogin&&e.appId?(e.cookies.set(e.space,t.data.auth_key),v(t,a)):y(t,a))})).catch((function(e){404===e.response.status?_("notification",!0,{type:"failure",message:"Invalid session token",duration:3e3}):401===e.response.status&&_("notification",!0,{type:"failure",message:"Session expired",duration:3e3})}))},v=function(a,t){Q("/app/".concat(e.appId),{headers:{Authorization:t.data.token}}).then((function(t){var n="";Object.keys(e.queryParam).forEach((function(a){["appId","type"].includes(a)||(n+="&".concat(a,"=").concat(e.queryParam[a]))})),window.location.href="".concat(t.data.data.redirect,"?authKey=").concat(a.data.auth_key,"&space=").concat(e.space).concat(n)}))},w=function(e){r(Object(m.a)({},i,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))},y=function(a,t){_("loggedin",!0),e.isSpaceLogin?(e.cookies.set(e.space,a.data.auth_key),e.history.push("/space/".concat(e.space,"/home"))):(e.cookies.set("oneauth",a.data.auth_key),e.history.push("/"))},N=function(a){if(null===a||void 0===a?void 0:a.accessToken){_("spinner");var t="/auth";e.isSpaceLogin&&(t="/auth/".concat(e.space)),X("".concat(t,"/authorize/facebook"),{email:a.email,firstName:a.first_name,lastName:a.last_name},null).then((function(e){E(t,e)})).finally((function(){_("notification",!1),_("spinner",!1)}))}},O=function(a){if(null===a||void 0===a?void 0:a.tokenId){var t="/auth";e.isSpaceLogin&&(t="/auth/".concat(e.space)),_("notification",!1),_("spinner"),X("".concat(t,"/authorize/google/").concat(a.tokenId),null,null).then((function(e){E(t,e)})).finally((function(){_("notification",!1),_("spinner",!1)}))}};return c.a.createElement("form",{method:"GET",onSubmit:b,noValidate:!0,className:"login"},c.a.createElement("div",{className:"form-signin"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!h.email&&c.a.createElement("div",{className:"label-text"},"Email"),h.email&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),h.email),"showLink"===u&&c.a.createElement("div",{className:"link",onClick:function(){d("showSent")}},"Resend confirmation link"),"showSent"===u&&c.a.createElement(c.a.Fragment,null,"Activation link sent")),c.a.createElement(B,{id:"email",data:i,handleChange:function(e){return w(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!h.password&&c.a.createElement("div",{className:"label-text"},"Password"),h.password&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),h.password),c.a.createElement("div",{className:"link",onClick:e.switchToResetPage},"Forgot Password?")),c.a.createElement(B,{id:"password",type:"password",data:i,handleChange:function(e){return w(e)}}))),c.a.createElement("div",{className:"action"},c.a.createElement(W,{variant:"regular",theme:"primary",action:b},"Log In"),c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.switchToSignupPage},"Create an account"))),c.a.createElement("div",{className:"space-top-3 social-signin"},c.a.createElement("div",{className:"social-signin-container"},c.a.createElement("div",{className:"social-google"},c.a.createElement(te.GoogleLogin,{clientId:"81306451496-fg67eb502dvfb50c31huhkbn481bi29h.apps.googleusercontent.com",buttonText:"Google",onSuccess:O,onFailure:O,onAutoLoadFinished:O})),c.a.createElement("div",{className:"social-facebook"},c.a.createElement(ce.a,{appId:"696666571109190",textButton:"Facebook",fields:"name,email,picture,first_name,last_name",onClick:N,callback:N,icon:"fa-facebook-square"})))))}))),re=(t(92),function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"oak-spinner"},c.a.createElement("div",{className:"spinner-wrapper"},c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null))))}),oe=function(){return c.a.createElement("div",{className:"verify-session typography-12"},c.a.createElement("div",null,"verifying session"),c.a.createElement("div",null,c.a.createElement(re,null)))},se=Object(s.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){var a=Object(n.useState)({email:"",password:"",repeatpassword:""}),t=Object(T.a)(a,2),i=t[0],r=t[1],o=Object(n.useState)("requestLink"),s=Object(T.a)(o,2),l=s[0],u=s[1];Object(n.useEffect)((function(){if(e.authCode){var a="/auth";e.isSpaceLogin&&(a="/auth/".concat(e.space)),_("login-spinner"),X("".concat(a,"/verifypasswordlink/").concat(e.authCode),{password:i.password},null).then((function(e){200===e.status?u("setPassword"):(u("invalidLink"),_("login-notification",!0,{type:"failure-main",message:"Password reset link you have entered is invalid"}))})).catch((function(){u("invalidLink"),_("login-notification",!0,{type:"failure-main",message:"Password reset link you have entered is invalid"})})).finally((function(){return _("login-spinner",!1)}))}}),[]);var d=Object(n.useState)({email:"",password:"",repeatpassword:""}),p=Object(T.a)(d,2),f=p[0],h=p[1],g=function(a){a.preventDefault();var t="/auth";e.isSpaceLogin&&(t="/auth/".concat(e.space));var n={email:"",password:"",repeatpassword:""},c=!1;_("notification",!1),_("login-spinner"),G(i.email)?(c=!0,n.email="Cannot be empty"):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i.email.trim().toLowerCase())||(c=!0,n.email="Invalid email"),c?(h(n),_("login-spinner",!1)):X("".concat(t,"/resetpasswordlink"),{email:i.email.trim().toLowerCase()},null).then((function(e){200===e.status?(u("linkSent"),_("login-notification",!0,{type:"email-main",message:"Link to reset your password has been sent to your email. Please check your email for further instructions"})):n.email="Invalid user email"})).catch((function(){c=!0,n.email="User account does not exist"})).finally((function(){h(n),_("login-spinner",!1)}))},b=function(a){a.preventDefault(),_("login-spinner");var t="/auth";e.isSpaceLogin&&(t="/auth/".concat(e.space));var n={email:"",password:"",repeatpassword:""},c=!1;G(i.password)&&(c=!0,n.password="Cannot be empty"),i.password!==i.repeatpassword&&(c=!0,n.repeatpassword="Password does not match"),h(n),c?_("login-spinner",!1):X("".concat(t,"/resetpassword/").concat(e.authCode),{password:i.password},null).then((function(e){200===e.status&&(u("passwordUpdated"),_("login-notification",!0,{type:"success-main",message:"Password has been updated. You can login with your new password now"}))})).finally((function(){return _("login-spinner",!1)}))},E=function(e){r(Object(m.a)({},i,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:function(e){"setPassword"===l?b(e):"requestLink"===l&&g(e)},noValidate:!0,className:"login"},"requestLink"===l&&c.a.createElement("div",{className:"form-reset"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!f.email&&c.a.createElement("div",{className:"label-text"},"Email"),f.email&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),f.email)),c.a.createElement(B,{id:"email",placeholder:"Email to send reset link",data:i,handleChange:function(e){return E(e)}}))),"setPassword"===l&&c.a.createElement("div",{className:"form-reset"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!f.password&&c.a.createElement("div",{className:"label-text"},"Set new password"),f.password&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),f.password)),c.a.createElement(B,{type:"password",id:"password",placeholder:"Choose a strong password",data:i,handleChange:function(e){return E(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!f.repeatpassword&&c.a.createElement("div",{className:"label-text"},"Retype password"),f.repeatpassword&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),f.repeatpassword)),c.a.createElement(B,{type:"password",id:"repeatpassword",placeholder:"Don't forget it",data:i,handleChange:function(e){return E(e)}}))),c.a.createElement("div",{className:"action"},"requestLink"===l&&c.a.createElement(W,{variant:"regular",theme:"primary",action:g},"Send Link"),"setPassword"===l&&c.a.createElement(W,{variant:"regular",theme:"primary",action:b},"Update Password"),["setPassword","requestLink"].includes(l)&&c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.switchToSigninPage},"Log In")))))}))),le=Object(s.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){var a=Object(n.useState)({email:"",password:"",repeatpassword:""}),t=Object(T.a)(a,2),i=t[0],r=t[1],o=Object(n.useState)("requestLink"),s=Object(T.a)(o,2),l=s[0],u=s[1];Object(n.useEffect)((function(){if(e.authCode){var a="/auth";e.isSpaceLogin&&(a="/auth/".concat(e.space)),_("login-spinner"),X("".concat(a,"/verifyemailconfirmationlink/").concat(e.authCode),null,null).then((function(e){200===e.status?(u("confirmed"),_("login-notification",!0,{type:"success-main",message:"Thank you for confirming your email. Your account is active. You can login now"})):(u("invalidLink"),_("login-notification",!0,{type:"failure-main",message:"Email confirmation link you have entered is not valid"}))})).catch((function(){u("invalidLink"),_("login-notification",!0,{type:"failure-main",message:"Email confirmation link you have entered is not valid"})})).finally((function(){return _("login-spinner",!1)}))}}),[]);var d=Object(n.useState)({email:""}),p=Object(T.a)(d,2),f=p[0],h=p[1],g=function(a){a.preventDefault();var t="/auth";e.isSpaceLogin&&(t="/auth/".concat(e.space));var n={email:""},c=!1;_("notification",!1),_("login-spinner"),G(i.email)?(c=!0,n.email="Cannot be empty"):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i.email.trim().toLowerCase())||(c=!0,n.email="Invalid email"),c?(h(n),_("login-spinner",!1)):X("".concat(t,"/emailconfirmationlink"),{email:i.email.trim().toLowerCase()},null).then((function(e){200===e.status?(u("linkSent"),_("login-notification",!0,{type:"email-main",message:"Account activation link has been sent to your email. Your account will be activated, post email confirmation. Please check your email for further instructions"})):n.email="Invalid user email"})).catch((function(){c=!0,n.email="User account does not exist"})).finally((function(){h(n),_("login-spinner",!1)}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:function(e){"requestLink"===l&&g(e)},noValidate:!0,className:"login"},"requestLink"===l&&c.a.createElement("div",{className:"form-reset"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!f.email&&c.a.createElement("div",{className:"label-text"},"Email"),f.email&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),f.email)),c.a.createElement(B,{id:"email",placeholder:"Email to activate",data:i,handleChange:function(e){return a=e,void r(Object(m.a)({},i,Object(V.a)({},a.currentTarget.name,a.currentTarget.value)));var a}}))),c.a.createElement("div",{className:"action"},"requestLink"===l&&c.a.createElement(W,{variant:"regular",theme:"primary",action:g},"Send Link"),["requestLink"].includes(l)&&c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.switchToSigninPage},"Log In")))))}))),ue=function(e){return c.a.createElement(c.a.Fragment,null,e.notification.type&&e.notification.message&&c.a.createElement("div",{className:"login-notification"},"email-main"===e.notification.type&&c.a.createElement("div",{className:"record-prominent email"},c.a.createElement("div",null,c.a.createElement(Y,{mat:"mail_outline",size:"60px"})),c.a.createElement("div",null,e.notification.message)),"success-main"===e.notification.type&&c.a.createElement("div",{className:"record-prominent success"},c.a.createElement("div",null,c.a.createElement(Y,{mat:"check_circle_outline",size:"60px",color:"success"})),c.a.createElement("div",null,e.notification.message)),"failure-main"===e.notification.type&&c.a.createElement("div",{className:"record-prominent failure"},c.a.createElement("div",null,c.a.createElement(Y,{mat:"error_outline",size:"60px",color:"failure"})),c.a.createElement("div",null,e.notification.message)),"success"===e.notification.type&&c.a.createElement("div",{className:"record success"},e.notification.message),"failure"===e.notification.type&&c.a.createElement("div",{className:"record failure"},c.a.createElement("div",null,c.a.createElement(Y,{mat:"error_outline",color:"failure"})),c.a.createElement("div",null,e.notification.message))))},me=t(32),de=Object(s.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){var a=Object(s.d)((function(e){return e.authorization})),t=Object(n.useState)("signin"),i=Object(T.a)(t,2),r=i[0],o=i[1],l=Object(n.useState)(""),u=Object(T.a)(l,2),d=u[0],p=u[1],f=Object(n.useState)(!1),h=Object(T.a)(f,2),g=h[0],b=h[1],E=Object(n.useState)({type:"",message:""}),v=Object(T.a)(E,2),w=v[0],y=v[1],N=Object(n.useState)(""),O=Object(T.a)(N,2),j=O[0],k=O[1],S=Object(n.useState)(),A=Object(T.a)(S,2),C=A[0],x=A[1],I=Object(n.useState)(!1),z=Object(T.a)(I,2),L=z[0],F=z[1];Object(n.useEffect)((function(){_("navbar",!1);var e=P().subscribe((function(e){"login-spinner"===e.name?(b(e.signal),e.signal&&y({type:"",message:""})):"login-notification"===e.name&&(y(e.data),b(!1))}));return function(){return e.unsubscribe()}}),[]);var R=function(a){y({type:"",message:""}),e.history.push("/space/".concat(e.space,"/login?type=").concat(a))};Object(n.useEffect)((function(){F(!0);var t=null;if(e.location.search){var n=me.parse(e.location.search);x(Object(m.a)({},n)),console.log(n),n&&n.type?o(n.type):o("signin"),n&&n.auth?p(n.auth):p(""),n&&n.appId?(k(n.appId),t=n.appId):k("")}var c=e.cookies.get(e.space);a.isAuth||c?t?U(t,c,me.parse(e.location.search)):e.history.push("/space/".concat(e.space,"/home")):F(!1)}),[e.location.search]);var U=function(a,t,n){console.log(a,t);var c="/auth/".concat(e.space);Q("".concat(c,"/session/").concat(t),null).then((function(c){200===c.status?V(a,t,c.data.token,n):(e.cookies.remove(e.space),F(!1))})).catch((function(a){e.cookies.remove(e.space),F(!1)}))},V=function(a,t,n,c){Q("/app/".concat(a),{headers:{Authorization:n}}).then((function(a){var n="";Object.keys(c).forEach((function(e){["appId","type"].includes(e)||(n+="&".concat(e,"=").concat(c[e]))})),window.location.href="".concat(a.data.data.redirect,"?authKey=").concat(t,"&space=").concat(e.space).concat(n)}))};return c.a.createElement("div",{className:"space-login"},c.a.createElement("div",{className:"overlay"},c.a.createElement("div",{className:"container smooth-page"},"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Oneauth logo"}),"theme_dark"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Oneauth logo"}),g&&c.a.createElement(re,null),c.a.createElement(ue,{notification:w}),!L&&"signin"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(ie,Object.assign({appId:j,switchToSignupPage:function(){return R("signup")},switchToResetPage:function(){return R("reset")},isSpaceLogin:!0,queryParam:C},e))),!L&&"signup"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(ae,Object.assign({switchToSigninPage:function(){return R("signin")},isSpaceLogin:!0},e))),!L&&"reset"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(se,Object.assign({isSpaceLogin:!0},e,{authCode:d,switchToSigninPage:function(){return R("signin")}}))),!L&&"confirmemail"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(le,Object.assign({isSpaceLogin:!0},e,{authCode:d,switchToSigninPage:function(){return R("signin")}}))),L&&c.a.createElement(oe,null))))}))),pe=function(){return function(e){e({type:"GET_PROFILE"})}},fe=function(e){return function(a){a({type:"SET_PROFILE",payload:e})}},he=t(57),ge=(t(48),function(e){var a;return c.a.createElement("div",{className:"message ".concat(e.notification.type)},"running"===e.notification.type&&c.a.createElement("div",{className:"message-icon ".concat("running"===e.notification.type?"running":"")},c.a.createElement("i",{className:"material-icons"},"rotate_right")),"success"===e.notification.type&&c.a.createElement("div",{className:"message-icon"},c.a.createElement("i",{className:"material-icons"},"check_circle_outline")),"warning"===e.notification.type&&c.a.createElement("div",{className:"message-icon"},c.a.createElement("i",{className:"material-icons"},"warning")),"failure"===e.notification.type&&c.a.createElement("div",{className:"message-icon"},c.a.createElement("i",{className:"material-icons"},"error_outline")),c.a.createElement("div",{className:"message-text"},null===(a=e.notification)||void 0===a?void 0:a.message),c.a.createElement("div",{className:"message-action"},c.a.createElement("i",{className:"material-icons",onClick:e.handleRemove},"clear")))}),be=function(){var e=Object(n.useState)(!1),a=Object(T.a)(e,2),t=a[0],i=a[1],r=Object(n.useState)([]),o=Object(T.a)(r,2),s=o[0],l=o[1],u=Object(n.useState)({notificationList:[]}),m=Object(T.a)(u,2),d=(m[0],m[1],function(e){l(s.filter((function(a){return a.id!==e.id})))});return Object(n.useEffect)((function(){var e=P().subscribe((function(e){"notification"===e.name&&(e.signal?(d(e.data),function(e){var a=Object(he.a)(s);a.unshift(e),l(a),e.duration?setTimeout((function(){d(e)}),e.duration):e.id||setTimeout((function(){d(e)}),5e3)}(e.data),i(!1)):d(e.data)),"spinner"===e.name&&i(e.signal)}));return function(){return e.unsubscribe()}}),[]),c.a.createElement(c.a.Fragment,null,s&&s.length>0&&c.a.createElement("div",{className:"notification"},s.slice(0,5).reverse().map((function(e){return c.a.createElement("div",{key:e.id||e.message},c.a.createElement(ge,{notification:e,handleRemove:d}))}))),t&&c.a.createElement(re,{"data-test":"spinner"}))},Ee=(t(25),t(19)),ve=function(e){return c.a.createElement("div",{className:"links"},e.authorization.isAuth&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Ee.a,{to:"/home",className:"navitem",activeClassName:"active"},"Home"),c.a.createElement(Ee.a,{to:"/managespace",className:"navitem",activeClassName:"active"},"Manage Space"),c.a.createElement(Ee.a,{to:"/manageapp",className:"navitem",activeClassName:"active"},"Manage App")))},we=function(e){return c.a.createElement("div",{className:"links"},e.authorization.isAuth&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Ee.a,{to:"/space/".concat(e.space,"/home"),className:"navitem",activeClassName:"active"},"Home"),c.a.createElement(Ee.a,{to:"/space/".concat(e.space,"/test"),className:"navitem",activeClassName:"active"},"Test Page")))},ye=(t(105),function(e){var a,t;return c.a.createElement("div",{className:"oak-avatar"},c.a.createElement("div",{className:"".concat(e.size?e.size:""," avatar-icon typography-6")},"".concat(null===(a=e.firstName)||void 0===a?void 0:a.substring(0,1)).concat(null===(t=e.lastName)||void 0===t?void 0:t.substring(0,1))),e.showName&&c.a.createElement("div",{className:"avatar-name"},e.firstName))}),Ne=(t(106),function(e){var a=Object(n.useState)(!1),t=Object(T.a)(a,2),i=t[0],r=t[1],o=Object(n.useState)({}),s=Object(T.a)(o,2),l=s[0],u=s[1],d=Object(n.useState)(x()),p=Object(T.a)(d,2),f=p[0];p[1];Object(n.useEffect)((function(){h()}),[e.children]);var h=function(){var a={};c.a.Children.toArray(e.children).forEach((function(e){a=Object(m.a)({},a,Object(V.a)({},e.props.slot,e))})),u(a)};Object(n.useEffect)((function(){window.addEventListener("click",(function(e){var a;(null===(a=document.getElementById(f))||void 0===a?void 0:a.contains(e.target))||r(!1)}))}));var g=function(){r(!i)};return c.a.createElement("div",{className:"oak-popover-menu ".concat(function(){var a=e.theme?e.theme:"";return a+=e.labelVariant?" ".concat(e.labelVariant):"",a+=e.width?" ".concat(e.width):""}()),id:f},!l.label&&c.a.createElement("div",{className:"label ".concat(function(){var a=i?"active":"";return a+=e.mobilize?" short-label":""}()),onClick:g},e.iconLeft&&c.a.createElement("div",{className:"left-icon"},c.a.createElement(Y,{mat:e.iconLeft})),c.a.createElement("div",{className:"label-text"},e.label),c.a.createElement("div",{className:"right-icon"},c.a.createElement(Y,{mat:e.iconRight}))),l.label&&c.a.createElement("div",{className:"label-custom",onClick:g},l.label),c.a.createElement("div",{className:"dropdown-content ".concat(function(){var a=i?"show":"hide";return a+=e.right?" right":""}()),onClick:g},e.elements.map((function(e){return c.a.createElement("div",{"v-for":"element in elements",key:e.label,className:"element",onClick:e.action},c.a.createElement(Y,{mat:e.icon}),e.label)}))))}),Oe=function(e){var a=Object(n.useState)(!1),t=Object(T.a)(a,2),i=(t[0],t[1]),r=Object(s.d)((function(e){return e.authorization})),o=Object(n.useState)([]),l=Object(T.a)(o,2),u=l[0],m=l[1];Object(n.useEffect)((function(){r.isAuth?m([{label:"Profile settings",action:e.editProfile,icon:"settings"},{label:"Sign out",action:e.logout,icon:"exit_to_app"}]):(console.log(e.space),m([{label:"Sign in",action:function(){return d("signin")},icon:"person"},{label:"Sign up",action:function(){return d("signup")},icon:"person_add"}]))}),[r.isAuth,e.space]),Object(n.useEffect)((function(){P().subscribe((function(e){"show-navbar-element"===e.name&&i(e.signal)}))}),[]);var d=function(a){e.login(a)};return c.a.createElement("div",{className:e.transparent?"navbar desktop transparent":"navbar desktop"},c.a.createElement("div",{className:"left"},!e.transparent&&"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Oneauth logo"}),(e.transparent||"theme_dark"===e.profile.theme)&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Oneauth logo"}),!e.space&&c.a.createElement(ve,{authorization:e.authorization,profile:e.profile}),e.space&&c.a.createElement(we,{authorization:e.authorization,profile:e.profile,space:e.space})),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"action"},c.a.createElement(Ne,{elements:u,theme:"primary",right:!0},c.a.createElement("div",{slot:"label",className:"action-item"},(null===r||void 0===r?void 0:r.isAuth)&&c.a.createElement(ye,{firstName:null===r||void 0===r?void 0:r.firstName,lastName:null===r||void 0===r?void 0:r.lastName}),!(null===r||void 0===r?void 0:r.isAuth)&&c.a.createElement("i",{className:"material-icons"},"person"))))))},je=t(37),ke=t.n(je),Se=(t(107),new(t(124).a)("")),Ae=new S.a,Ce=function(e){var a=Object(n.useState)(""),t=Object(T.a)(a,2),i=t[0],r=t[1];Object(n.useEffect)((function(){var e=Se.subscribe((function(e){r(e)}));return function(){return e.unsubscribe()}}),[]);return c.a.createElement("form",{method:"GET",onSubmit:function(e){e.preventDefault(),Ae.next(i)},noValidate:!0},c.a.createElement("div",{className:"search-bar".concat(e.alt?" alt":"")},c.a.createElement("input",{name:"searchText",spellCheck:!1,autoComplete:"off",autoFocus:!0,placeholder:"Mirror, mirror, on the wall, who's the fairest of them all?",required:!0,value:i,onChange:function(e){Se.next(e.target.value)}}),c.a.createElement("button",{className:"icon"},c.a.createElement("i",null,c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},c.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}))))))},_e=function(e){var a=Object(n.useState)({showSearchBar:!1,menu:!1}),t=Object(T.a)(a,2),i=t[0],r=t[1];Object(n.useEffect)((function(){e.getProfile()}),[]),Object(n.useEffect)((function(){P().subscribe((function(e){"show-navbar-element"===e.name&&r(Object(m.a)({},i,{showSearchBar:e.signal}))}))}),[]);var o=function(){r(Object(m.a)({},i,{menu:!i.menu}))},s=function(a){e.login(a)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:e.transparent?"navbar mobile transparent":"navbar mobile"},c.a.createElement("div",{className:"left"},!i.showSearchBar&&!e.transparent&&"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Mirror logo"}),!i.showSearchBar&&(e.transparent||"theme_dark"===e.profile.theme)&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Mirror logo"}),i.showSearchBar&&!e.transparent&&"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:ke.a,alt:"Mirror logo"}),i.showSearchBar&&(e.transparent||"theme_dark"===e.profile.theme)&&c.a.createElement("img",{className:"logo",src:ke.a,alt:"Mirror logo"}),i.showSearchBar&&c.a.createElement(Ce,{alt:!0})),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:i.menu?"menu active":"menu",onClick:o},c.a.createElement("div",null)))),c.a.createElement("div",{className:i.menu?"slider show":"slider hide",onClick:o},c.a.createElement("div",{className:i.menu?"container":"container hidetext",onClick:o},c.a.createElement("div",{className:"action"},c.a.createElement("div",{className:"buttons"},e.authorization.isAuth&&c.a.createElement(W,{variant:"appear",small:!0,action:e.logout},c.a.createElement("i",{className:"material-icons"},"power_settings_new"),"Logout"),!e.authorization.isAuth&&c.a.createElement(W,{variant:"appear",small:!0,action:function(){return s("signin")}},c.a.createElement("i",{className:"material-icons"},"person"),"Login"),!e.authorization.isAuth&&c.a.createElement(W,{variant:"appear",small:!0,action:function(){return s("signup")}},c.a.createElement("i",{className:"material-icons"},"person_add"),"Signup"))),!e.space&&c.a.createElement(ve,{authorization:e.authorization,profile:e.profile}),e.space&&c.a.createElement(we,{authorization:e.authorization,profile:e.profile,space:e.space}))))},Pe=(t(108),function(e){var a=Object(n.useState)(!1),t=Object(T.a)(a,2),i=t[0],r=t[1];Object(n.useEffect)((function(){i!==e.visible&&(e.visible?r(e.visible):setTimeout((function(){return r(e.visible)}),250))}),[e.visible]),Object(n.useEffect)((function(){return document.addEventListener("keydown",o,!1),function(){return document.removeEventListener("keydown",o,!1)}}),[i]);var o=function(a){27===a.keyCode&&i&&e.toggleVisibility()},s=function(){var a="";return a+=e.noheader?" noheader":"",a+=e.fullscreen?" fullscreen":"",a+=e.donotMobilize?"":" mobilize"};return c.a.createElement(c.a.Fragment,null,i&&c.a.createElement("div",{className:e.visible?"modal-root show ".concat(s()):"modal-root hide ".concat(s())},c.a.createElement("div",{className:"backdrop-fade",onClick:e.toggleVisibility}),c.a.createElement("div",{className:"oak-modal"},c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:e.visible?"container":"container hidetext"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"icon"},"N"),c.a.createElement("div",{className:"label one-liner"},e.label)),c.a.createElement("div",{className:"right"},c.a.createElement("div",{onClick:e.toggleVisibility},c.a.createElement("i",{className:"material-icons modal-close-icon"},"close")))),e.children)))))}),xe=(t(109),t(110),function(e){var a=Object(n.useState)(""),t=Object(T.a)(a,2),i=t[0],r=t[1],o=Object(n.useState)({}),s=Object(T.a)(o,2),l=s[0],u=s[1];Object(n.useEffect)((function(){i||r(e.meta&&e.meta.length>0?e.meta[0].slotName:""),d()}),[e.meta,e.children]);var d=function(){var a={};c.a.Children.toArray(e.children).forEach((function(e){a=Object(m.a)({},a,Object(V.a)({},e.props.slot,e))})),u(a)},p=function(e){r(e)};return c.a.createElement("div",{className:"oak-tab"},c.a.createElement("div",{className:"header"},e.meta.map((function(e){return c.a.createElement("div",{key:e.slotName,className:"tab typography-6 ".concat(i===e.slotName?"active":""),onClick:function(){return p(e.slotName)}},c.a.createElement("div",{className:"icon"},c.a.createElement("i",{className:"material-icons typography-8 ".concat(i===e.slotName?"active":"")},e.icon)),c.a.createElement("div",{className:"label"},e.label))}))),e.meta.map((function(e){return c.a.createElement("div",{key:e.slotName,className:"tab typography-6 ".concat(i===e.slotName?"active":""),onClick:function(){return p(e.slotName)}})})),e.meta.map((function(e){return c.a.createElement("div",{key:e.slotName,className:"content ".concat(e.slotName===i?"active":"inactive")},l[e.slotName])})))}),Ie=(t(111),function(e){return c.a.createElement("div",{className:"oak-text"},!e.multiline&&c.a.createElement("input",{disabled:e.disabled,autoComplete:"off",className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),type:e.type?e.type:"text",name:e.id,id:e.id,value:e.data[e.id],onChange:e.handleChange,onFocus:function(){e.handleFocus&&e.handleFocus()}}),e.multiline&&c.a.createElement("textarea",{disabled:e.disabled,className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),id:e.id,name:e.id,value:e.data[e.id],onChange:e.handleChange}),c.a.createElement("label",{htmlFor:e.id,className:e.data[e.id]?"active":""},e.label))}),Te=function(e){var a=Object(s.d)((function(e){return e.authorization})),t=Object(n.useState)({oldPassword:"",newPassword:"",repeatPassword:""}),i=Object(T.a)(t,2),r=i[0],o=i[1],l=Object(n.useState)([{slotName:"details",label:"Basic details",icon:"subject"},{slotName:"password",label:"Change Password",icon:"security"}]),u=Object(T.a)(l,2),d=u[0],p=(u[1],function(e){o(Object(m.a)({},r,Object(V.a)({},e.target.name,e.target.value)))});return c.a.createElement("div",{className:"profile-settings"},c.a.createElement(xe,{meta:d},c.a.createElement("div",{slot:"details"},"details"),c.a.createElement("div",{slot:"password",className:"change-password"},c.a.createElement(Ie,{type:"password",label:"Old password",data:r,id:"oldPassword",handleChange:function(e){return p(e)}}),c.a.createElement(Ie,{type:"password",label:"New password",data:r,id:"newPassword",handleChange:function(e){return p(e)}}),c.a.createElement(Ie,{type:"password",label:"Retype password",data:r,id:"repeatPassword",handleChange:function(e){return p(e)}}),c.a.createElement(W,{theme:"primary",variant:"drama",action:function(){var t="/auth";e.space&&(t="/auth/".concat(e.space)),X("".concat(t,"/changepassword"),{userId:a.userId,oldPassword:r.oldPassword,newPassword:r.newPassword},{headers:{Authorization:a.token}}).then((function(e){200===e.status?o({oldPassword:"",newPassword:"",repeatPassword:""}):_("notification",!0,{type:"failure",message:"Failed with error",duration:3e3})})).catch((function(e){401===e.response.status?_("notification",!0,{type:"failure",message:"Password incorrect. Please enter your right credentials to update password",duration:3e3}):_("notification",!0,{type:"failure",message:"Failed with error",duration:3e3})}))}},"Update password"))))},ze=Object(s.b)((function(e){return{profile:e.profile}}),{getProfile:pe,setProfile:fe})(Object(o.b)(Object(N.withRouter)((function(e){Object(s.c)(),Object(s.d)((function(e){return e.profile}));var a=Object(n.useState)({visible:!1,mobilemenu:"hide",chooseTheme:!1,showSettings:!1,transparentNavBar:!1,firstLoad:!0,showNavbar:!1,editProfileDialog:!1}),t=Object(T.a)(a,2),i=t[0],r=t[1],o=Object(n.useState)(""),l=Object(T.a)(o,2),u=l[0],d=l[1];Object(n.useEffect)((function(){P().subscribe((function(e){"spaceChange"===e.name&&d(e.data)}))}),[]),Object(n.useEffect)((function(){P().subscribe((function(e){"navbar"===e.name&&r(Object(m.a)({},i,{showNavbar:e.signal})),"loggedin"===e.name&&r(Object(m.a)({},i,{firstLoad:!1}))}))}),[]),Object(n.useEffect)((function(){i.firstLoad&&e.authorization&&e.authorization.isAuth&&r(Object(m.a)({},i,{firstLoad:!1}))}),[e.authorization.isAuth]);var p=function(){"theme_dark"===e.profile.theme?e.setProfile(Object(m.a)({},e.profile,{theme:"theme_light"})):e.setProfile(Object(m.a)({},e.profile,{theme:"theme_dark"}))},f=function(a){u?e.history.push("/space/".concat(u,"/login?type=").concat(a)):e.history.push("/login?type=".concat(a))},h=function(){var a="/auth",t=e.cookies.get("oneauth");u&&(t=e.cookies.get(u),a="/auth/".concat(u)),X("".concat(a,"/session/").concat(t,"/invalidate"),null,null).then((function(a){200!==a.status&&404!==a.status||(e.removeAuth(),u?(e.cookies.remove(u),e.history.push("/space/".concat(u,"/home")),_("notification",!0,{type:"success",message:"Signed out of space ".concat(u),duration:3e3})):(e.cookies.remove("oneauth"),e.history.push("/home"),_("notification",!0,{type:"success",message:"Signed out of oneauth",duration:3e3})))}))},g=function(){r(Object(m.a)({},i,{showSettings:!i.showSettings}))};return c.a.createElement(c.a.Fragment,null,i.showNavbar&&c.a.createElement("div",{className:"nav"},c.a.createElement(Oe,Object.assign({},e,{logout:h,login:f,toggleSettings:g,transparent:i.transparentNavBar,toggleDarkMode:p,space:u,editProfile:function(){return r(Object(m.a)({},i,{editProfileDialog:!0}))}})),c.a.createElement(_e,Object.assign({},e,{logout:h,login:f,toggleSettings:g,transparent:i.transparentNavBar,toggleDarkMode:p,space:u})),c.a.createElement(Pe,{fullscreen:!0,label:"User profile settings",visible:i.editProfileDialog,toggleVisibility:function(){return r(Object(m.a)({},i,{editProfileDialog:!i.editProfileDialog}))}},c.a.createElement("div",{className:"modal-body"},c.a.createElement(Te,{space:u})))))})))),Le={API_URL_TENANT:"/tenant",API_URL_TENANT_BANNER:"/tenant/banner",API_URL_TENANT_CREATE:"/tenant/create",API_TENANT_URL:"/tenant/sendURL",API_URL_PRESIGNUP:"/auth/keys",API_URL_RESET:"/auth/reset",API_URL_CODE:"/auth/sendResetCode",API_URL_USER_DETAILS:"/user/details",API_URL_STAGE:"/stage",API_URL_PREDICT:"/model/predict",API_URL_ARTICLE:"/article",API_URL_CATEGORY:"/category",API_URL_FAQ:"/faq",API_URL_SR:"/servicerequests",API_URL_USER:"/user",API_URL:"/auth/",API_SIGNIN:"/signin",API_SIGNUP:"/signup",API_KEYS:"/keys",API_JWT:"/signin/jwt",API_SPACE_CREATE:"/space/create",API_SPACE_FETCH:"/space",API_SPACE_DELETE:"/space/delete",API_APP_FETCH:"/app",API_APP_DELETE:"/app/delete",API_ROLE_FETCH:"/role",API_APP_SPACE:"/appspace"},Fe=function(e){return function(a){Q("".concat(Le.API_SPACE_FETCH,"/"),{headers:{Authorization:e.token}}).then((function(e){a({type:"UPDATE_SPACE",payload:{data:e.data.data}})}))}},Re=function(e){return function(a){Q("".concat(Le.API_APP_FETCH,"/"),{headers:{Authorization:e.token}}).then((function(e){a({type:"UPDATE_APP",payload:{data:e.data}})}))}},De=function(e){return function(a){Q("".concat(Le.API_URL),{headers:{Authorization:e.token}}).then((function(e){a({type:"FETCH_ALL_USERS",payload:{data:e.data.data}})}))}},Ue=function(e){return function(a){Q("".concat(Le.API_ROLE_FETCH),{headers:{Authorization:e.token}}).then((function(e){a({type:"UPDATE_ROLE",payload:{data:e.data}})}))}},He=function(e,a){return function(t){return Z("".concat(Le.API_ROLE_FETCH,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("role",!0,{action:"updated"}),t(Ue(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}},Ve=function(e){return function(a){Q("".concat(Le.API_APP_SPACE,"/"),{headers:{Authorization:e.token}}).then((function(e){a({type:"UPDATE_APP_SPACE",payload:{data:e.data.data}})}))}},Be=(t(112),t(32)),Ge=Object(s.b)((function(e){return{authorization:e.authorization,fetchSpace:e.fetchSpace,fetchUsers:e.fetchUsers,existingAdmins:e.fetchRoles,fetchApp:e.fetchApp,fetchAppSpace:e.fetchAppSpace}}),{getAuth:z,addAuth:L,removeAuth:F,fetchSpace:Fe,fetchUsers:De,fetchRoles:Ue,fetchApp:Re,fetchAppSpace:Ve})(Object(o.b)((function(e){var a=Object(s.d)((function(e){return e.authorization})),t=Object(n.useState)("signin"),i=Object(T.a)(t,2),r=i[0],o=i[1],l=Object(n.useState)(""),u=Object(T.a)(l,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(T.a)(p,2),h=f[0],g=f[1],b=Object(n.useState)({type:"",message:""}),E=Object(T.a)(b,2),v=E[0],w=E[1],y=Object(n.useState)(""),N=Object(T.a)(y,2),O=(N[0],N[1]),j=Object(n.useState)(!1),k=Object(T.a)(j,2),S=k[0],A=k[1];Object(n.useEffect)((function(){_("navbar",!1);var e=P().subscribe((function(e){"login-spinner"===e.name?(g(e.signal),e.signal&&w({type:"",message:""})):"login-notification"===e.name&&(w(e.data),g(!1))}));return function(){return e.unsubscribe()}}),[]);var C=function(a){w({type:"",message:""}),e.history.push("/login?type=".concat(a))};return Object(n.useEffect)((function(){if(e.location.search){var a=Be.parse(e.location.search);a&&a.type?o(a.type):o("signin"),a&&a.auth?d(a.auth):d(""),a&&a.appId?O(a.appId):O("")}}),[e.location.search]),Object(n.useEffect)((function(){A(!0);var t=e.cookies.get("oneauth");a.isAuth||t?e.history.push("/home"):A(!1)}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"oa-login smooth-page"},c.a.createElement("div",{className:"side"}),c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"container"},"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Oneauth logo"}),"theme_dark"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Oneauth logo"}),h&&c.a.createElement(re,null),c.a.createElement(ue,{notification:v}),!S&&"signin"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(ie,Object.assign({switchToSignupPage:function(){return C("signup")},switchToResetPage:function(){return C("reset")}},e))),!S&&"signup"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(ae,Object.assign({switchToSigninPage:function(){return C("signin")}},e))),!S&&"reset"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(se,Object.assign({},e,{authCode:m,switchToSigninPage:function(){return C("signin")}}))),!S&&"confirmemail"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(le,Object.assign({},e,{authCode:m,switchToSigninPage:function(){return C("signin")}}))),S&&c.a.createElement(oe,null)))))}))),Me=function(e){var a=Object(s.d)((function(e){return e.authorization})),t=Object(s.d)((function(e){return e.profile})),n=Object(s.c)(),i=function(e){switch(_("spaceChange",!0,""),e){case"readAuthenticationSpace":return u();case"readAuthenticationOa":return l();case"authenticateSpace":return o();case"authenticateOa":return r();case"isAdmin":return d();default:return!0}},r=function(){return m("oa")},o=function(){return m("space")},l=function(){return m("oa",!1)},u=function(){return m("space",!1)},m=function(t){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("space"===t&&_("spaceChange",!0,e.match.params.tenant),a.isAuth)return!0;var i="/auth",r=e.cookies.get("oneauth"),o="oneauth";if("space"===t&&(r=e.cookies.get(e.match.params.tenant),o=e.match.params.tenant,i="/auth/".concat(e.match.params.tenant)),r)Q("".concat(i,"/session/").concat(r),null).then((function(e){200===e.status&&(n(L({isAuth:!0,token:e.data.token,secret:"",firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,type:e.data.type,userId:e.data.userId})),"oa"===t&&(n(Fe(e.data)),n(De(e.data)),n(Ue(e.data)),n(Re(e.data)),n(Ve(e.data))))})).catch((function(a){e.cookies.remove(o),c&&404===a.response.status?(_("notification",!0,{type:"failure",message:"Invalid session token",duration:3e3}),"space"===t?f(e.match.params.tenant):p()):c&&401===a.response.status&&(_("notification",!0,{type:"failure",message:"Session expired",duration:3e3}),"space"===t?f(e.match.params.tenant):p())}));else{if(!c)return!0;"space"===t?f(e.match.params.tenant):p()}},d=function(){return h(),!1},p=function(){window.location.href="http://localhost:3010/#/login"},f=function(e){window.location.href="http://localhost:3010/#/space/".concat(e,"/login")},h=function(){e.history.push("/".concat(t.tenant,"/unauthorized"))};return c.a.createElement(c.a.Fragment,null,function(){var a;return console.log(e.middleware),null===(a=e.middleware)||void 0===a||a.forEach((function(e){if(!i(e))return!1})),!0}()&&c.a.createElement(e.component,Object.assign({},e,{profile:t,space:e.match.params.tenant})))},qe=(t(33),t(113),function(e){return c.a.createElement(Pe,{visible:e.visible,toggleVisibility:e.toggleVisibility,noheader:!0},c.a.createElement("div",{className:"modal-body typography-8 space-top-4 space-bottom-4 confirmation-text"},e.text?e.text:"Are you sure you want to continue?"),c.a.createElement("div",{className:"modal-footer"},e.children&&e.children,!e.children&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{"data-test":"action-close",action:e.toggleVisibility,theme:"default",variant:"appear",align:"left",fa:"fas fa-times"},"No"),c.a.createElement(W,{"data-test":"action-proceed",action:function(){console.log("triggered action"),e.toggleVisibility(),console.log("before action"),e.action(),console.log("after action")},theme:"primary",variant:"disappear",align:"right",fa:"fas fa-check"},"Yes"))))}),Ye=(t(114),function(e){var a=Object(s.c)(),t=Object(s.d)((function(e){return e.authorization})),i=Object(n.useState)(!1),r=Object(T.a)(i,2),o=r[0],l=r[1];return c.a.createElement("div",{className:"member",id:e.member._id},c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"title typography-6"},e.member.email),c.a.createElement("div",{className:"typography-6"},"".concat(e.member.lastName,", ").concat(e.member.firstName))),c.a.createElement("div",{className:"action"},!o&&e.member.email!==e.owner&&e.member._id!==e.owner&&c.a.createElement("div",{className:"action-item delete",onClick:function(){return l(!o)}},"X"),o&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"action-item cancel",onClick:function(){return l(!o)}},"Cancel"),c.a.createElement("div",{className:"action-item confirm",onClick:function(){e.member.email!==e.owner&&e.member._id!==e.owner&&a(function(e,a,t,n){return function(c){ee("".concat(Le.API_ROLE_FETCH,"/").concat(a,"/").concat(t,"/").concat(n),{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("role",!0,{action:"deleted"}),c(Ue(e)),c(Fe(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(t,e.domainType,e.member._id,e.domainId))}},"Confirm"))))}),We=(t(115),function(e){var a=Object(n.useState)(x()),t=Object(T.a)(a,2),i=t[0],r=(t[1],Object(n.useState)(!1)),o=Object(T.a)(r,2),s=o[0],l=o[1],u=Object(n.useState)(Object(V.a)({},i,"")),m=Object(T.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(void 0),h=Object(T.a)(f,2),g=h[0],b=h[1];Object(n.useEffect)((function(){E(d[i])}),[e.objects]);var E=function(a){b(e.objects.filter((function(e){var t;return null===(t=e.value)||void 0===t?void 0:t.toLowerCase().includes(a.toLowerCase())})))};return Object(n.useEffect)((function(){window.addEventListener("click",(function(e){var a;(null===(a=document.getElementById(i))||void 0===a?void 0:a.contains(e.target))||l(!1)}))}),[]),c.a.createElement("div",{className:"oak-auto-complete",id:i},c.a.createElement("div",{className:"search-bar"},c.a.createElement(Ie,{id:i,data:d,label:e.label,handleFocus:function(){l(!0)},handleChange:function(e){p(Object(V.a)({},e.target.name,e.target.value)),E(e.target.value)},placeholder:e.placeholder})),s&&g&&g.length>0&&c.a.createElement("div",{className:"results"},null===g||void 0===g?void 0:g.map((function(a){return c.a.createElement("div",{className:"element",key:a.key,onClick:function(){return t=a.key,l(!1),void e.handleChange(t);var t}},a.value)}))))}),Je=function(e){var a=Object(s.c)(),t=Object(s.d)((function(e){return e.authorization})),i=Object(s.d)((function(e){return e.oaUsers})),r=Object(s.d)((function(e){return e.oaRoles})),o=Object(n.useState)([{}]),l=Object(T.a)(o,2),u=l[0],m=l[1],d=Object(n.useState)({autoCompleteDropdownData:[{}]}),p=Object(T.a)(d,2),f=p[0],h=p[1];Object(n.useEffect)((function(){a(Ue(t))}),[t]),Object(n.useEffect)((function(){var a,t=null===(a=r.data.data)||void 0===a?void 0:a.filter((function(a){return a.domainId===e.space._id})),n=g(t,i.data);m(n)}),[r.data.data]);var g=function(e,a){var t=[];return a.map((function(a){e.map((function(e){a._id.indexOf(e.userId)>-1&&t.push(a)}))})),t};Object(n.useEffect)((function(){var e,a=[];null===(e=i.data)||void 0===e||e.map((function(e){a.push({key:e._id,value:e.email})}));var t=[];u&&u.map((function(e){return t.push({id:e._id})})),a=a.filter((function(e){return!t.some((function(a){return e.key===a.id}))})),h({autoCompleteDropdownData:a})}),[i.data,u]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body"},c.a.createElement("div",{className:"autocomplete-users space-bottom-2"},c.a.createElement(We,{placeholder:"Search by user name",handleChange:function(n){a(He(t,{type:"space",userId:n,domainId:e.space._id}))},objects:f.autoCompleteDropdownData})),c.a.createElement("div",{className:"space-view space-top-2 space-bottom-4",key:i._id},c.a.createElement("div",{className:"list-view-header typography-5"},c.a.createElement("div",{className:"label"},"Email"),c.a.createElement("div",{className:"label"},"Name")),null===u||void 0===u?void 0:u.map((function(a){return c.a.createElement(Ye,{domainType:"space",domainId:e.space._id,member:a,owner:e.space.email})})))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Close")))},$e=function(e){var a=Object(s.c)(),t=Object(s.d)((function(e){return e.authorization})),i=Object(n.useState)({days:"",hours:"",minutes:"",name:""}),r=Object(T.a)(i,2),o=r[0],l=r[1];Object(n.useEffect)((function(){l(e.space)}),[e.space]);var u=function(e){l(Object(m.a)({},o,Object(V.a)({},e.target.name,e.target.value)))},d=function(e,a){return!G(e)||(_("notification",!0,{type:"failure",message:a,duration:5e3}),!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body"},c.a.createElement(Ie,{data:o,id:"name",label:"Space Name",handleChange:function(e){return u(e)}}),c.a.createElement("div",{className:"session-expiry"},c.a.createElement(Ie,{data:o,id:"days",type:"number",label:"Expiry in days",handleChange:function(e){return u(e)}}),c.a.createElement(Ie,{data:o,id:"hours",type:"number",label:"Expiry in hours",handleChange:function(e){return u(e)}}),c.a.createElement(Ie,{data:o,id:"minutes",type:"number",label:"Expiry in minutes",handleChange:function(e){return u(e)}}))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),c.a.createElement(W,{theme:"primary",action:function(){d(o.name,"Space name cannot be empty")&&d(o.days||o.hours||o.minutes,"Session Expiry is not provided")&&a(function(e,a){return function(t){return Z("".concat(Le.API_SPACE_FETCH,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("space",!0,{action:"updated"}),t(Fe(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(t,o))},variant:"regular",align:"right"},c.a.createElement("i",{className:"material-icons"},"double_arrow"),"Update")))},Ke=function(e){var a=Object(s.c)(),t=Object(s.d)((function(e){return e.oaRoles})),i=Object(s.d)((function(e){return e.authorization})),r=Object(n.useState)(!1),o=Object(T.a)(r,2),l=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(T.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(!1),g=Object(T.a)(h,2),b=g[0],E=g[1],v=Object(n.useState)(0),w=Object(T.a)(v,2),y=w[0],N=w[1],O=Object(s.d)((function(e){return e.appSpace})),j=Object(n.useState)(0),k=Object(T.a)(j,2),S=k[0],A=k[1];Object(n.useEffect)((function(){var e=P().subscribe((function(e){"space"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("space"," ").concat(e.data.action),duration:5e3}),"updated"===e.data.action&&u(!1),"deleted"===e.data.action&&E(!1)),"role"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("role"," ").concat(e.data.action),duration:5e3}),"updated"===e.data.action&&u(!1),e.data.action)}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){a(Ue(i))}),[i]),Object(n.useEffect)((function(){var a,n=null===(a=t.data.data)||void 0===a?void 0:a.filter((function(a){return a.domainId===e.space._id}));N(null===n||void 0===n?void 0:n.length)}),[t.data.data]),Object(n.useEffect)((function(){var a;console.log(O),console.log(e.space.spaceId);var t=null===(a=O.data)||void 0===a?void 0:a.filter((function(a){return a.spaceId===e.space.spaceId}));console.log(t),A(t.length)}),[O.data]);var C=function(){f(!0)},x=[{label:"Details",action:function(){u(!0)},icon:"edit"},{label:"Administrators",action:C,icon:"people_alt"},{label:"Roles",action:C,icon:"vpn_key"},{label:"Delete Space",action:function(){E(!0)},icon:"delete"}];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"space-item",key:e.space.id},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"title typography-8"},"".concat(e.space.name," (").concat(e.space.spaceId,")")),c.a.createElement("div",{className:"statistics typography-4"},c.a.createElement("div",{className:"administrators",onClick:C},y," Administrator(s)"),c.a.createElement("div",{className:"connected-apps"},S&&0!==S?"".concat(S," Connected App(s)"):"Connected to Open Apps"))),c.a.createElement("div",{className:"action space-top-0"},c.a.createElement(Ne,{elements:x,theme:"primary",right:!0},c.a.createElement("div",{slot:"label",className:"action-item"},c.a.createElement("i",{className:"material-icons"},"more_horiz"))))),c.a.createElement(Pe,{label:"Edit space",visible:l,toggleVisibility:function(){return u(!l)}},c.a.createElement($e,{space:e.space,toggleVisibilityHandler:function(){return u(!l)}})),c.a.createElement(Pe,{label:"Space Administrators",visible:p,toggleVisibility:function(){return f(!p)}},c.a.createElement(Je,{space:e.space,toggleVisibilityHandler:function(){return f(!p)}})),c.a.createElement(qe,{action:function(){return a(function(e,a){return function(t){ee("".concat(Le.API_SPACE_DELETE,"/").concat(a),{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("space",!0,{action:"deleted"}),t(Fe(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(i,e.space.spaceId))},visible:b,toggleVisibility:function(){return E(!b)}}))},Qe=function(e){var a=Object(n.useState)(!1),t=Object(T.a)(a,2),i=t[0],r=t[1],o=Object(s.c)(),l=Object(s.d)((function(e){return e.authorization})),u=Object(s.d)((function(e){return e.space})),d=Object(n.useState)({name:"",email:"",password:"",repeatPassword:"",days:"",hours:"",minutes:""}),p=Object(T.a)(d,2),f=p[0],h=p[1],g=Object(n.useState)({text:""}),b=Object(T.a)(g,2),E=b[0],v=b[1],w=Object(n.useState)(void 0),y=Object(T.a)(w,2),N=y[0],O=y[1];Object(n.useEffect)((function(){_("navbar",!0)}),[]),Object(n.useEffect)((function(){console.log(l)}),[l]),Object(n.useEffect)((function(){O(j(u.data,E.text))}),[u.data,E]),Object(n.useEffect)((function(){i||h(Object(m.a)({},f,{name:"",password:"",repeatPassword:"",days:"",hours:"",minutes:""}))}),[i]),Object(n.useEffect)((function(){var e=P().subscribe((function(e){"space"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("space"," ").concat(e.data.action),duration:5e3}),"created"===e.data.action&&r(!1))}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){h(Object(m.a)({},f,{email:l.email}))}),[l]);var j=function(e,a){return G(a)?e:e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(a.toLowerCase())}))},k=function(e,a){return!G(e)||(_("notification",!0,{type:"failure",message:a,duration:5e3}),!1)},S=function(e){h(Object(m.a)({},f,Object(V.a)({},e.target.name,e.target.value)))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"app-page manage-space"},c.a.createElement("div",{className:"space-container smooth-page"},c.a.createElement("div",{className:"top-actions"},c.a.createElement("div",{className:"search-bar"},c.a.createElement(Ie,{label:"Type to search",handleChange:function(e){v(Object(m.a)({},E,Object(V.a)({},e.target.name,e.target.value)))},id:"text",data:E})),c.a.createElement("div",{className:"create-action"},c.a.createElement(W,{theme:"primary",action:function(){return r(!i)},variant:"regular",icon:"blur_on"},"New space"))),c.a.createElement("div",{className:"space-list"},null===N||void 0===N?void 0:N.map((function(e){return c.a.createElement("div",{key:e._id},c.a.createElement(Ke,{id:e._id,space:e}))}))))),c.a.createElement(Pe,{label:"New space",visible:i,toggleVisibility:function(){return r(!i)}},c.a.createElement("div",{className:"modal-body"},c.a.createElement(Ie,{data:f,id:"name",label:"Space name",handleChange:function(e){return S(e)}}),"oneauth"===l.type&&c.a.createElement(Ie,{data:f,id:"email",label:"Administrator Email",disabled:!0,handleChange:function(e){return S(e)}}),"google"===l.type&&c.a.createElement(Ie,{data:f,id:"email",label:"Administrator (Google)",disabled:!0,handleChange:function(e){return S(e)}}),"facebook"===l.type&&c.a.createElement(Ie,{data:f,id:"email",label:"Administrator (Facebook)",disabled:!0,handleChange:function(e){return S(e)}}),"oneauth"===l.type&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Ie,{data:f,id:"password",label:"Administrator Password",type:"password",handleChange:function(e){return S(e)}}),c.a.createElement(Ie,{data:f,id:"repeatPassword",label:"Repeat Password",type:"password",handleChange:function(e){return S(e)}})),c.a.createElement("div",{className:"session-expiry"},c.a.createElement(Ie,{data:f,id:"days",type:"number",label:"Expiry in days",handleChange:function(e){return S(e)}}),c.a.createElement(Ie,{data:f,id:"hours",type:"number",label:"Expiry in hours",handleChange:function(e){return S(e)}}),c.a.createElement(Ie,{data:f,id:"minutes",type:"number",label:"Expiry in minutes",handleChange:function(e){return S(e)}}))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:function(){return r(!i)},theme:"default",variant:"appear",align:"left",icon:"close"},"Cancel"),c.a.createElement(W,{action:function(){if(k(f.name,"Space name cannot be empty")&&("oneauth"!==l.type||k(f.password,"Password is not provided"))&&k(f.days||f.hours||f.minutes,"Session Expiry is not provided"))if(f.password!==f.repeatPassword)_("notification",!0,{type:"failure",message:"Password does not match",duration:5e3});else{var e={name:f.name,days:f.days,hours:f.hours,minutes:f.minutes,userId:l.userId};"oneauth"===l.type&&(e.password=f.password),o(function(e,a){return function(t){return X("".concat(Le.API_SPACE_FETCH,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("space",!0,{action:"created"}),t(Fe(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(l,e))}},theme:"primary",variant:"disappear",align:"right",icon:"double_arrow"},"Create"))))},Xe=(t(49),function(e){var a=Object(s.c)(),t=Object(s.d)((function(e){return e.authorization})),i=Object(s.d)((function(e){return e.oaUsers})),r=Object(s.d)((function(e){return e.oaRoles})),o=Object(n.useState)([{}]),l=Object(T.a)(o,2),u=l[0],m=l[1],d=Object(n.useState)({autoCompleteDropdownData:[{}]}),p=Object(T.a)(d,2),f=p[0],h=p[1];Object(n.useEffect)((function(){a(Ue(t))}),[t]),Object(n.useEffect)((function(){var a,t=null===(a=r.data.data)||void 0===a?void 0:a.filter((function(a){return a.domainId===e.app._id})),n=g(t,i.data);m(n)}),[r.data.data]);var g=function(e,a){var t=[];return a.map((function(a){e.map((function(e){a._id.indexOf(e.userId)>-1&&t.push(a)}))})),t};Object(n.useEffect)((function(){var e,a=[];null===(e=i.data)||void 0===e||e.map((function(e){a.push({key:e._id,value:e.email})}));var t=[];u&&u.map((function(e){return t.push({id:e._id})})),a=a.filter((function(e){return!t.some((function(a){return e.key===a.id}))})),h({autoCompleteDropdownData:a})}),[i.data,u]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body"},c.a.createElement("div",{className:"autocomplete-users space-bottom-2"},c.a.createElement(We,{placeholder:"Search by user name",handleChange:function(n){a(He(t,{type:"app",userId:n,domainId:e.app._id}))},objects:f.autoCompleteDropdownData})),c.a.createElement("div",{className:"oaapp-view space-top-2 space-bottom-4",key:i._id},c.a.createElement("div",{className:"list-view-header typography-5"},c.a.createElement("div",{className:"label"},"Email"),c.a.createElement("div",{className:"label"},"Name"),c.a.createElement("div",{className:"label"})),null===u||void 0===u?void 0:u.map((function(a){return c.a.createElement(Ye,{member:a,domainId:e.app._id,domainType:"app",key:a._id,owner:e.app.createdBy})})))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Close")))});t(116);var Ze=function(e){return c.a.createElement("div",{className:"oak-check-box ".concat(function(){var a=e.theme?e.theme:"";return a+=e.variant?" ".concat(e.variant):""}())},c.a.createElement("div",{className:"checkbox-container"},c.a.createElement("label",{className:"checkbox"},c.a.createElement("input",{type:"checkbox",name:e.id,checked:e.data[e.id],id:e.id,onChange:function(a){return t=a,void e.handleChange(t);var t},disabled:e.disabled}),c.a.createElement("label",{className:"typography-5",htmlFor:e.id},e.label))))},ea=function(e){var a=Object(s.c)(),t=Object(s.d)((function(e){return e.authorization})),i=Object(n.useState)({name:"",redirect:"",protected:""}),r=Object(T.a)(i,2),o=r[0],l=r[1];Object(n.useEffect)((function(){l(e.app)}),[e.app]);var u=function(e){l(Object(m.a)({},o,Object(V.a)({},e.target.name,e.target.value)))},d=function(e,a){return!G(e)||(_("notification",!0,{type:"failure",message:a,duration:5e3}),!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body two-column"},c.a.createElement(Ie,{data:o,id:"name",label:"Application Name",handleChange:function(e){return u(e)}}),c.a.createElement(Ie,{data:o,id:"redirect",label:"Redirect URL",handleChange:function(e){return u(e)}}),c.a.createElement(Ie,{data:o,id:"jwtpassword",label:"JWT Password",handleChange:function(e){return u(e)}}),c.a.createElement(Ze,{data:o,theme:"primary",id:"protected",label:"Protected application",handleChange:function(e){return a=e,void l(Object(m.a)({},o,Object(V.a)({},a.target.name,a.target.checked)));var a}})),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),c.a.createElement(W,{theme:"primary",action:function(){d(o.name,"App name cannot be empty")&&d(o.redirect,"Redirect url cannot be empty")&&a(function(e,a){return function(t){return Z("".concat(Le.API_APP_FETCH,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("app",!0,{action:"updated"}),t(Re(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(t,o))},variant:"regular",align:"right"},c.a.createElement("i",{className:"material-icons"},"double_arrow"),"Update")))},aa=function(e){var a=Object(n.useState)({_id:"",name:"",redirect:"",jwtpassword:"",protected:!1}),t=Object(T.a)(a,2),i=t[0],r=t[1];Object(n.useEffect)((function(){r(e.app)}),[e.app]);var o=function(e){r(Object(m.a)({},i,Object(V.a)({},e.target.name,e.target.value)))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body two-column"},c.a.createElement(Ie,{data:i,id:"_id",label:"Application Id",disabled:!0,handleChange:function(e){return o(e)}}),c.a.createElement(Ie,{data:i,id:"name",label:"Application name",disabled:!0,handleChange:function(e){return o(e)}}),c.a.createElement(Ie,{data:i,id:"redirect",label:"Redirect url",disabled:!0,handleChange:function(e){return o(e)}}),c.a.createElement(Ie,{data:i,id:"jwtpassword",label:"JWT Password",disabled:!0,handleChange:function(e){return o(e)}}),c.a.createElement(Ze,{data:i,id:"protected",label:"Protected application",theme:"primary",disabled:!0,handleChange:function(e){return a=e,void r(Object(m.a)({},i,Object(V.a)({},a.target.name,a.target.checked)));var a}})),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Close")))},ta=(t(117),function(e){var a=Object(s.c)(),t=Object(s.d)((function(e){return e.authorization})),i=Object(n.useState)(!1),r=Object(T.a)(i,2),o=r[0],l=r[1];return c.a.createElement("div",{className:"mapspace",id:e.appSpaceItem._id},c.a.createElement("div",{className:"title typography-6"},e.appSpaceItem.spaceId),c.a.createElement("div",{className:"typography-6"},e.appSpaceItem.name),c.a.createElement("div",{className:"action"},!o&&c.a.createElement("div",{className:"action-item delete",onClick:function(){return l(!o)}},"X"),o&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"action-item cancel",onClick:function(){return l(!o)}},"Cancel"),c.a.createElement("div",{className:"action-item confirm",onClick:function(){a(function(e,a,t){return function(n){ee("".concat(Le.API_APP_SPACE,"/").concat(a,"/").concat(t),{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("appspace",!0,{action:"deleted"}),n(Ve(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(t,e.appSpaceItem.spaceId,e.appId))}},"Confirm"))))}),na=function(e){var a=Object(s.c)(),t=Object(s.d)((function(e){return e.authorization})),i=Object(s.d)((function(e){return e.space})),r=Object(s.d)((function(e){return e.appSpace})),o=Object(n.useState)([{}]),l=Object(T.a)(o,2),u=l[0],m=l[1],d=Object(n.useState)({autoCompleteDropdownData:[{}]}),p=Object(T.a)(d,2),f=p[0],h=p[1];Object(n.useEffect)((function(){var a,t=[];null===(a=r.data)||void 0===a||a.filter((function(a){return a.appId===e.app._id?t.push({id:a.spaceId}):""}));var n=[],c=[];null===i||void 0===i||i.data.filter((function(e){return t.some((function(a){return e.spaceId===a.id}))?n.push(e):c.push({key:e.spaceId,value:e.name})})),m(n),h({autoCompleteDropdownData:c})}),[r.data,i.data]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body"},c.a.createElement("div",{className:"autocomplete-space space-bottom-2"},c.a.createElement(We,{placeholder:"Search by space name",handleChange:function(n){a(function(e,a){return function(t){return Z("".concat(Le.API_APP_SPACE,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("appspace",!0,{action:"updated"}),t(Ve(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(t,{appId:e.app._id,spaceId:n}))},objects:f.autoCompleteDropdownData})),c.a.createElement("div",{className:"oaapp-view space-top-2 space-bottom-4",key:i._id},c.a.createElement("div",{className:"list-view-header typography-5"},c.a.createElement("div",{className:"label"},"Name"),c.a.createElement("div",{className:"label"},"SpaceId"),c.a.createElement("div",{className:"label"})),null===u||void 0===u?void 0:u.map((function(a){return c.a.createElement(ta,{appSpaceItem:a,appId:e.app._id,key:a._id})})))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Close")))},ca=function(e){var a=Object(s.c)(),t=Object(s.d)((function(e){return e.oaRoles})),i=Object(s.d)((function(e){return e.appSpace})),r=Object(s.d)((function(e){return e.authorization})),o=Object(n.useState)(!1),l=Object(T.a)(o,2),u=l[0],m=l[1],d=Object(n.useState)(!1),p=Object(T.a)(d,2),f=p[0],h=p[1],g=Object(n.useState)(!1),b=Object(T.a)(g,2),E=b[0],v=b[1],w=Object(n.useState)(!1),y=Object(T.a)(w,2),N=y[0],O=y[1],j=Object(n.useState)(!1),k=Object(T.a)(j,2),S=k[0],A=k[1],C=Object(n.useState)(0),x=Object(T.a)(C,2),I=x[0],z=x[1],L=Object(n.useState)(0),F=Object(T.a)(L,2),R=F[0],D=F[1];Object(n.useEffect)((function(){var e=P().subscribe((function(e){"app"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("app"," ").concat(e.data.action),duration:5e3}),"updated"===e.data.action&&m(!1),"deleted"===e.data.action&&A(!1)),"role"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("role"," ").concat(e.data.action),duration:5e3}),"updated"===e.data.action&&m(!1))}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){a(Ue(r))}),[r]),Object(n.useEffect)((function(){var a,n=null===(a=t.data.data)||void 0===a?void 0:a.filter((function(a){return a.domainId===e.app._id}));z(null===n||void 0===n?void 0:n.length)}),[t.data.data]),Object(n.useEffect)((function(){var a,t=null===(a=i.data)||void 0===a?void 0:a.filter((function(a){return a.appId===e.app._id}));console.log(t.length),D(t.length)}),[i.data]);var U=function(){m(!0)},H=function(){v(!0)},V=function(){A(!0)},B=e.app.protected?[{label:"Permitted Space",action:function(){O(!0)},icon:"edit"},{label:"Details",action:U,icon:"edit"},{label:"Administrators",action:H,icon:"people_alt"},{label:"Roles",action:H,icon:"vpn_key"},{label:"Delete App",action:V,icon:"delete"}]:[{label:"Details",action:U,icon:"edit"},{label:"Administrators",action:H,icon:"people_alt"},{label:"Roles",action:H,icon:"vpn_key"},{label:"Delete App",action:V,icon:"delete"}];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"oaapp-item",key:e.app._id},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"title typography-8",onClick:function(){h(!0)}},"".concat(e.app.name)),c.a.createElement("div",{className:"redirect typography-6"},"".concat(e.app.redirect)),c.a.createElement("div",{className:"statistics typography-4"},c.a.createElement("div",{className:"administrators",onClick:H},I," Administrators"),c.a.createElement("div",null,e.app.protected?"".concat(R," Connected Space(s)"):"Open App"))),c.a.createElement("div",{className:"action space-top-0"},c.a.createElement(Ne,{elements:B,theme:"primary",right:!0},c.a.createElement("div",{slot:"label",className:"action-item"},c.a.createElement("i",{className:"material-icons"},"more_horiz")))),c.a.createElement(Pe,{label:"Map Space",visible:N,toggleVisibility:function(){return O(!N)}},c.a.createElement(na,{app:e.app,toggleVisibilityHandler:function(){return O(!N)}})),c.a.createElement(Pe,{label:"Edit App",visible:u,toggleVisibility:function(){return m(!u)}},c.a.createElement(ea,{app:e.app,toggleVisibilityHandler:function(){return m(!u)}})),c.a.createElement(Pe,{label:"App Details",visible:f,toggleVisibility:function(){return h(!f)}},c.a.createElement(aa,{app:e.app,toggleVisibilityHandler:function(){return h(!f)}})),c.a.createElement(Pe,{label:"App Administrators",visible:E,toggleVisibility:function(){return v(!E)}},c.a.createElement(Xe,{app:e.app,toggleVisibilityHandler:function(){return v(!E)}})),c.a.createElement(qe,{action:function(){return a(function(e,a){return function(t){ee("".concat(Le.API_APP_DELETE,"/").concat(a),{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("app",!0,{action:"deleted"}),t(Re(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(r,e.app.appId))},visible:S,toggleVisibility:function(){return A(!S)}})))},ia=function(e){var a=Object(n.useState)(!1),t=Object(T.a)(a,2),i=t[0],r=t[1],o=Object(s.c)(),l=Object(s.d)((function(e){return e.authorization})),u=Object(s.d)((function(e){return e.app.data})),d=Object(n.useState)({name:"",redirect:"",jwtpassword:"",protected:!1}),p=Object(T.a)(d,2),f=p[0],h=p[1],g=Object(n.useState)({text:""}),b=Object(T.a)(g,2),E=b[0],v=b[1],w=Object(n.useState)(void 0),y=Object(T.a)(w,2),N=y[0],O=y[1];Object(n.useEffect)((function(){_("navbar",!0)}),[]),Object(n.useEffect)((function(){O(j(u.data,E.text))}),[u.data,E]),Object(n.useEffect)((function(){i||h(Object(m.a)({},f,{name:"",redirect:"",jwtpassword:"",protected:!1}))}),[i]),Object(n.useEffect)((function(){var e=P().subscribe((function(e){"app"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("app"," ").concat(e.data.action),duration:5e3}),"created"===e.data.action&&r(!1))}));return function(){return e.unsubscribe()}}));var j=function(e,a){return G(a)?e:e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(a.toLowerCase())}))},k=function(e,a){return!G(e)||(_("notification",!0,{type:"failure",message:a,duration:5e3}),!1)},S=function(e){h(Object(m.a)({},f,Object(V.a)({},e.target.name,e.target.value)))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"app-page manage-app"},c.a.createElement("div",{className:"oaapp-container smooth-page"},c.a.createElement("div",{className:"top-actions"},c.a.createElement("div",{className:"search-bar"},c.a.createElement(Ie,{label:"Type to search",handleChange:function(e){v(Object(m.a)({},E,Object(V.a)({},e.target.name,e.target.value)))},id:"text",data:E})),c.a.createElement("div",{className:"create-action"},c.a.createElement(W,{theme:"primary",action:function(){return r(!i)},variant:"regular",icon:"blur_on"},"New App"))),c.a.createElement("div",{className:"oaapp-list"},null===N||void 0===N?void 0:N.map((function(e){return c.a.createElement(ca,{app:e,key:e._id})}))))),c.a.createElement(Pe,{label:"New App",visible:i,toggleVisibility:function(){return r(!i)}},c.a.createElement("div",{className:"modal-body two-column"},c.a.createElement(Ie,{data:f,id:"name",label:"Application Name",handleChange:function(e){return S(e)}}),c.a.createElement(Ie,{data:f,id:"redirect",label:"Redirect url",handleChange:function(e){return S(e)}}),c.a.createElement(Ie,{data:f,id:"jwtpassword",label:"JWT Password",handleChange:function(e){return S(e)}}),c.a.createElement(Ze,{key:f.name,data:f.protected,id:"protected",label:"Protected application",theme:"primary",variant:"circle",handleChange:function(e){return a=e,void h(Object(m.a)({},f,Object(V.a)({},a.target.name,a.target.checked)));var a}})),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:function(){return r(!i)},theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),c.a.createElement(W,{action:function(){var e,a;k(f.name,"App name can not be empty")&&k(f.redirect,"Redirect url is not provided")&&k(f.jwtpassword,"JWT Password can not be empty")&&o((e=l,a={name:f.name,redirect:f.redirect,jwtpassword:f.jwtpassword,protected:f.protected},function(t){return X("".concat(Le.API_APP_FETCH,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("app",!0,{action:"created"}),t(Re(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}))},theme:"primary",variant:"disappear",align:"right"},c.a.createElement("i",{className:"material-icons"},"double_arrow"),"Create"))))},ra=(t(28),function(e){var a=Object(s.d)((function(e){return e.authorization})),t=Object(n.useState)({email:"",password:"",repeatpassword:""}),i=Object(T.a)(t,2),r=(i[0],i[1],Object(n.useState)("requestLink")),o=Object(T.a)(r,2),l=(o[0],o[1],Object(n.useState)({email:""})),u=Object(T.a)(l,2),m=(u[0],u[1],function(a){e.history.push("/space/".concat(e.space,"/home?type=").concat(a))});return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:function(e){},noValidate:!0,className:"space-home-link"},c.a.createElement("div",{className:"action"},c.a.createElement("div",{className:"action-group"},a.isAuth&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{variant:"drama",theme:"primary",action:function(){return m("updateProfile")}},"Edit Profile"),c.a.createElement(W,{variant:"drama",theme:"primary",action:function(){return m("changePassword")}},"Change Password"),c.a.createElement(W,{variant:"appear",theme:"tertiary",action:function(){var a="/auth",t=e.cookies.get("oneauth");e.space&&(t=e.cookies.get(e.space),a="/auth/".concat(e.space)),X("".concat(a,"/session/").concat(t,"/invalidate"),null,null).then((function(a){200!==a.status&&404!==a.status||(e.removeAuth(),e.cookies.remove(e.space),e.history.push("/space/".concat(e.space,"/home")),_("notification",!0,{type:"success",message:"Signed out of space ".concat(e.space),duration:3e3}))}))}},"Sign out")),!a.isAuth&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{variant:"appear",theme:"primary",action:function(){e.history.push("/space/".concat(e.space,"/login?type=signin"))}},"Sign in"),c.a.createElement(W,{variant:"appear",theme:"primary",action:function(){e.history.push("/space/".concat(e.space,"/login?type=signup"))}},"Sign up"))))))}),oa=function(e){var a=Object(s.d)((function(e){return e.authorization})),t=Object(n.useState)({oldpassword:"",password:"",repeatpassword:""}),i=Object(T.a)(t,2),r=i[0],o=i[1],l=Object(n.useState)("form"),u=Object(T.a)(l,2),d=u[0],p=u[1],f=Object(n.useState)({oldpassword:"",password:"",repeatpassword:""}),h=Object(T.a)(f,2),g=h[0],b=h[1],E=function(e){o(Object(m.a)({},r,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))},v=function(t){"form"===d&&function(t){t.preventDefault();var n="/auth/".concat(e.space),c={oldpassword:"",password:"",repeatpassword:""},i=!1;_("notification",!1),_("login-spinner"),G(r.oldpassword)&&(i=!0,c.oldpassword="Cannot be empty"),G(r.password)&&(i=!0,c.password="Cannot be empty"),r.password!==r.repeatpassword&&(i=!0,c.repeatpassword="Password does not match"),i?(console.log("error"),b(c),_("login-spinner",!1)):(console.log("save"),X("".concat(n,"/changepassword"),{userId:a.userId,oldPassword:r.oldpassword,newPassword:r.password},{headers:{Authorization:a.token}}).then((function(e){200===e.status?(o({oldpassword:"",password:"",repeatpassword:""}),p("passwordUpdated"),_("login-notification",!0,{type:"success-main",message:"Your account password has been updated. You can login with your new password from next time"})):_("login-notification",!0,{type:"failure",message:"Failed to update your password"})})).catch((function(e){401===e.response.status?c.oldpassword="Incorrect password":_("login-notification",!0,{type:"failure",message:"Failed to update your password"})})).finally((function(){b(c),_("login-spinner",!1)})))}(t)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:v,noValidate:!0,className:"space-change-password-link"},"form"===d&&c.a.createElement(c.a.Fragment,null),"form"===d&&c.a.createElement("div",{className:"form-changepassword"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!g.oldpassword&&c.a.createElement("div",{className:"label-text"},"Current password"),g.oldpassword&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),g.oldpassword)),c.a.createElement(B,{id:"oldpassword",type:"password",placeholder:"Type your current password",data:r,handleChange:function(e){return E(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!g.password&&c.a.createElement("div",{className:"label-text"},"New password"),g.password&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),g.password)),c.a.createElement(B,{id:"password",type:"password",placeholder:"Make it a good one",data:r,handleChange:function(e){return E(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!g.repeatpassword&&c.a.createElement("div",{className:"label-text"},"Repeat password"),g.repeatpassword&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),g.repeatpassword)),c.a.createElement(B,{id:"repeatpassword",type:"password",placeholder:"Don't forget it",data:r,handleChange:function(e){return E(e)}}))),c.a.createElement("div",{className:"action"},["form"].includes(d)&&c.a.createElement(W,{variant:"regular",theme:"primary",action:v},"Change Password"),["form"].includes(d)&&c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.goHome},"Back to Home")))))},sa=function(e){var a=Object(s.d)((function(e){return e.authorization})),t=Object(n.useState)({firstName:"",lastName:""}),i=Object(T.a)(t,2),r=i[0],o=i[1],l=Object(n.useState)("form"),u=Object(T.a)(l,2),d=u[0],p=u[1],f=Object(n.useState)({firstName:"",lastName:""}),h=Object(T.a)(f,2),g=h[0],b=h[1];Object(n.useEffect)((function(){console.log(a),o({firstName:a.firstName,lastName:a.lastName})}),[a]);var E=function(e){o(Object(m.a)({},r,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))},v=function(t){"form"===d&&function(t){t.preventDefault();var n="/user/".concat(e.space),c={firstName:"",lastName:""},i=!1;_("notification",!1),_("login-spinner"),G(r.firstName)&&(i=!0,c.firstName="Cannot be empty"),G(r.lastName)&&(i=!0,c.lastName="Cannot be empty"),i?(console.log("error"),b(c),_("login-spinner",!1)):X("".concat(n,"/updateprofile"),{firstName:r.firstName,lastName:r.lastName},{headers:{Authorization:a.token}}).then((function(e){200===e.status?(o({firstName:"",lastName:""}),p("profileUpdated"),_("login-notification",!0,{type:"success-main",message:"Your account password has been updated. You can login with your new password from next time"})):_("login-notification",!0,{type:"failure",message:"Failed to update your password"})})).catch((function(e){_("login-notification",!0,{type:"failure",message:"Failed to update your profile"})})).finally((function(){b(c),_("login-spinner",!1)}))}(t)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:v,noValidate:!0,className:"space-change-password-link"},"form"===d&&c.a.createElement(c.a.Fragment,null),"form"===d&&c.a.createElement("div",{className:"form-changepassword"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!g.firstName&&c.a.createElement("div",{className:"label-text"},"First name"),g.firstName&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),g.firstName)),c.a.createElement(B,{id:"firstName",data:r,handleChange:function(e){return E(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!g.lastName&&c.a.createElement("div",{className:"label-text"},"Last name"),g.lastName&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),g.lastName)),c.a.createElement(B,{id:"lastName",data:r,handleChange:function(e){return E(e)}}))),c.a.createElement("div",{className:"action"},["form"].includes(d)&&c.a.createElement(W,{variant:"regular",theme:"primary",action:v},"Save"),["form"].includes(d)&&c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.goHome},"Back to Home")))))},la=t(32),ua=Object(s.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){Object(s.d)((function(e){return e.authorization}));var a=Object(n.useState)("home"),t=Object(T.a)(a,2),i=t[0],r=t[1],o=Object(n.useState)(!1),l=Object(T.a)(o,2),u=l[0],m=l[1],d=Object(n.useState)({type:"",message:""}),p=Object(T.a)(d,2),f=p[0],h=p[1];Object(n.useEffect)((function(){_("navbar",!1);var e=P().subscribe((function(e){"login-spinner"===e.name?(m(e.signal),e.signal&&h({type:"",message:""})):"login-notification"===e.name&&(h(e.data),m(!1))}));return function(){return e.unsubscribe()}}),[]);var g=function(a){h({type:"",message:""}),e.history.push("/space/".concat(e.space,"/home?type=").concat(a))};return Object(n.useEffect)((function(){if(e.location.search){var a=la.parse(e.location.search);a&&a.type?r(a.type):r("home")}else r("home")}),[e.location.search]),c.a.createElement("div",{className:"space-home"},c.a.createElement("div",{className:"overlay"},c.a.createElement("div",{className:"container smooth-page"},"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Oneauth logo"}),"theme_dark"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Oneauth logo"}),u&&c.a.createElement(re,null),c.a.createElement(ue,{notification:f}),"home"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(ra,Object.assign({switchToSigninPage:function(){return g("signin")}},e))),"changePassword"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(oa,Object.assign({goHome:function(){return g("home")}},e))),"updateProfile"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(sa,Object.assign({goHome:function(){return g("home")}},e))))))}))),ma=(t(118),function(e){return Object(n.useEffect)((function(){_("navbar",!0)}),[]),c.a.createElement("div",{className:"app-page"},c.a.createElement("div",{className:"app-container"},c.a.createElement("div",{className:"home"},c.a.createElement("div",{className:"typography-10 space-bottom-2"},"Test page"),c.a.createElement("div",{className:"typography-5"},"Test page content here for the space"))))}),da={themecolor1:pa("#69A7BF"),themecolor2:pa("#99587B"),themecolor3:pa("#A66C26"),themecolor4:pa("#37AE82")};function pa(e){return Object(j.a)({palette:{primary:{main:e},secondary:{main:e}}})}var fa=Object(s.b)((function(e){return{authorization:e.authorization,user:e.user,profile:e.profile}}),{getAuth:z,addAuth:L,removeAuth:F,getProfile:pe,setProfile:fe})(Object(o.b)((function(e){Object(n.useEffect)((function(){e.getProfile(),e.getAuth(),e.getAuth()}),[]),Object(n.useEffect)((function(){var e=P().subscribe((function(e){"session expired"===e.name&&a(null,"failure","Session expired. Login again")}));return function(){return e.unsubscribe()}}));var a=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You have been logged out";e.removeAuth(),e.cookies.remove("oneauth"),_("notification",!0,{type:t,message:n,duration:3e3})};return c.a.createElement("div",{className:"App ".concat(e.profile.theme," ").concat(e.profile.textSize," ").concat(e.profile.themeColor)},c.a.createElement(O.HashRouter,null,c.a.createElement("div",{className:"body"},c.a.createElement("div",{className:"body-content"},c.a.createElement(be,null),c.a.createElement(k.a,{theme:da.themecolor1},c.a.createElement(ze,Object.assign({},e,{logout:a})),c.a.createElement(N.Route,{exact:!0,path:"/home",render:function(t){return c.a.createElement(Me,Object.assign({},t,e,{logout:function(){return a},component:I,middleware:["readAuthenticationOa"]}))}}),c.a.createElement(N.Route,{exact:!0,path:"/",render:function(t){return c.a.createElement(Me,Object.assign({},t,e,{logout:function(){return a},component:I,middleware:["readAuthenticationOa"]}))}}),c.a.createElement(N.Route,{path:"/space/:tenant/login",render:function(t){return c.a.createElement(Me,Object.assign({},t,e,{logout:function(){return a},component:de}))}}),c.a.createElement(N.Route,{exact:!0,path:"/space/:tenant/home",render:function(t){return c.a.createElement(Me,Object.assign({},t,e,{logout:function(){return a},component:ua,middleware:["readAuthenticationSpace"]}))}}),c.a.createElement(N.Route,{exact:!0,path:"/space/:tenant",render:function(t){return c.a.createElement(Me,Object.assign({},t,e,{logout:function(){return a},component:ua,middleware:["readAuthenticationSpace"]}))}}),c.a.createElement(N.Route,{exact:!0,path:"/space/:tenant/test",render:function(t){return c.a.createElement(Me,Object.assign({},t,e,{logout:function(){return a},component:ma,middleware:["authenticateSpace"]}))}}),c.a.createElement(N.Route,{path:"/login",render:function(t){return c.a.createElement(Me,Object.assign({},t,e,{logout:function(){return a},component:Ge}))}}),c.a.createElement(N.Route,{path:"/managespace",exact:!0,render:function(t){return c.a.createElement(Me,Object.assign({},t,e,{logout:function(){return a},component:Qe,middleware:["authenticateOa"]}))}}),c.a.createElement(N.Route,{path:"/manageapp",exact:!0,render:function(t){return c.a.createElement(Me,Object.assign({},t,e,{logout:function(){return a},component:ia,middleware:["authenticateOa"]}))}}))))))}))),ha=function(e){return c.a.createElement(s.a,{store:y},c.a.createElement(fa,e))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(o.a,null,c.a.createElement(ha,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[59,1,2]]]);
//# sourceMappingURL=main.20f44d94.chunk.js.map