(this.webpackJsonponeauth=this.webpackJsonponeauth||[]).push([[0],[,,,,,,,function(e,a,t){e.exports=t.p+"static/media/oneauth_white.9d65dbf7.svg"},,function(e,a,t){e.exports=t.p+"static/media/oneauth_black.541c2d42.svg"},,,,,,,,,,,,function(e,a,t){},,,,,function(e,a,t){},,,function(e,a,t){},function(e,a,t){},,,,function(e,a,t){},,,,function(e,a,t){e.exports=t.p+"static/media/oneauth_white_small.b5a11904.svg"},,function(e,a,t){},,,,,,,,,function(e,a,t){},function(e,a,t){},,,,,,,,,,function(e,a,t){e.exports=t(124)},,,,,function(e,a,t){},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,,,,,,,,,,,,,,function(e,a,t){},,,,,,,,,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(31),i=t.n(r),o=(t(65),t(6)),s=t(3),l=t(1),u=t(2),m=t(18),d=t(52),p={isAuth:!1,email:"",firstName:"",lastName:""},f={theme:"theme_dark",textSize:"textsize_medium",themeColor:"themecolor1",tenant:"",appStatus:"notmounted"},h={data:[]},g={data:[]},E={data:[]},b={data:[]},v={data:[]},w=Object(m.c)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_AUTH":return console.log("GET_AUTH reducer"),Object(s.a)({},e);case"ADD_AUTH":return console.log("ADD_AUTH reducer"),Object(s.a)({},e,{},a.payload);case"REMOVE_AUTH":return console.log("REMOVE_AUTH reducer"),Object(s.a)({},e,{isAuth:!1,firstName:"",lastName:"",email:"",token:""});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_PROFILE":return console.log("GET_PROFILE reducer"),Object(s.a)({},e);case"SET_PROFILE":return console.log("SET_PROFILE reducer"),Object(s.a)({},e,{},a.payload);default:return e}},space:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_SPACE":return console.log("SET SPACE reducer"),Object(s.a)({},e,{},a.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_APP":return console.log("SET APP reducer"),Object(s.a)({},e,{},a.payload);default:return e}},oaUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_ALL_USERS":return console.log("SET SPACE reducer"),Object(s.a)({},e,{},a.payload);default:return e}},oaRoles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_ROLE":return console.log("SET SPACE reducer"),Object(s.a)({},e,{},a.payload);default:return e}},permittedSpace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_PERMITTED_SPACE":return console.log("SET PERMITTED SPACE reducer"),Object(s.a)({},e,{},a.payload);default:return e}}}),N=[d.a],y=Object(m.e)(w,{},Object(m.d)(m.a.apply(void 0,N))),O=(t(40),t(70),t(14)),j=t(56),k=t(130),S=t(131),A=(t(71),t(57)),C=t(132),P=new A.a;function _(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2?arguments[2]:void 0;P.next({name:e,signal:a,data:t})}function T(){return P.asObservable()}function x(){return Object(C.a)()}var I=function(e){return Object(n.useEffect)((function(){_("navbar",!0)}),[]),c.a.createElement("div",{className:"page-home"},c.a.createElement("div",{className:"app-container smooth-page page-home--title"},"Secure identity and authentication provider"),c.a.createElement("div",{className:"page-home--subtitle"},"Oneauth handles user account setup, password management and authentication needs of your organization. Connect all your applications/assets with a single user account per user. Supports sign-in with social identity providers such as Google, Outlook and Facebook."))},z=function(){return function(e){e({type:"GET_AUTH"})}},L=function(e){return function(a){a({type:"ADD_AUTH",payload:e})}},F=function(){return function(e){e({type:"REMOVE_AUTH"})}},R=(t(72),t(7)),D=t.n(R),U=t(9),H=t.n(U),V=t(4),B=(t(21),t(73),function(e){return c.a.createElement("div",{className:"oak-text-plain"},e.label&&c.a.createElement("label",{htmlFor:e.id},e.label),!e.multiline&&c.a.createElement("input",{disabled:e.disabled,autoComplete:"off",className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),type:e.type?e.type:"text",name:e.id,id:e.id,value:e.data[e.id],onChange:e.handleChange,onFocus:function(){e.handleFocus&&e.handleFocus()},placeholder:e.placeholder}),e.multiline&&c.a.createElement("textarea",{disabled:e.disabled,className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),id:e.id,name:e.id,value:e.data[e.id],onChange:e.handleChange}))});function M(e){return null===e||null!==e.match(/^ *$/)}t(74),t(75);var G=function(e){return c.a.createElement("svg",{version:"1.0",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 57 56",enableBackground:"new 0 0 57 56",style:e.dimension},c.a.createElement("g",{id:"Chat-Fenster"},c.a.createElement("g",{id:"chat_FAQ_Accordion2-Copy-13",transform:"translate(-1364.000000, -1001.000000)"},c.a.createElement("g",{id:"Send-Message",transform:"translate(397.000000, 1008.000000)"},c.a.createElement("g",{id:"Send-Button",transform:"translate(990.000000, 10.000000)"},c.a.createElement("g",{id:"Send_1_"},c.a.createElement("path",{style:e.style,d:"M16,0.5c-0.1-0.1-0.3-0.1-0.4-0.1L-7,10.8c-0.1,0.1-0.2,0.2-0.2,0.3s0.1,0.3,0.2,0.3l6.4,3.1\r c0.1,0.1,0.3,0,0.4,0L6,9.9l-4.9,4.9C1,14.9,1,15,1,15.1l0.5,6.2c0,0.1,0.1,0.3,0.2,0.3h0.1c0.1,0,0.2,0,0.3-0.1l3.4-3.9l4.2,2\r c0.1,0,0.2,0,0.3,0s0.2-0.1,0.2-0.2l5.9-18.6C16.1,0.7,16.1,0.6,16,0.5z"})))))))},q=function(e){return c.a.createElement("svg",{viewBox:"0 0 73 73",style:e.dimension},c.a.createElement("polygon",{fill:"#27AAE1",points:"38.5,-3.8 37.9,-3.8 37.9,-3.8 38.5,-3.8 "}),c.a.createElement("g",null,c.a.createElement("path",{fill:"#149ED9",d:"M27.6,23c2.6-1.8,5.8-2.9,9.3-2.9c3.4,0,6.6,1.1,9.3,2.9l6.3-7.5c-4.3-3.2-9.7-5.2-15.6-5.2\r c-5.8,0-11.2,1.9-15.6,5.2L27.6,23z",style:e.accent}),c.a.createElement("rect",{x:"32",y:"37.4",width:"9.8",height:"25.6",style:e.style}),c.a.createElement("circle",{fill:"none",stroke:"#000000",strokeWidth:"9.75",strokeMiterlimit:"10",cx:"36.9",cy:"36.5",r:"30.9",style:Object(s.a)({},e.style,{fill:"none"})}),c.a.createElement("polygon",{fill:"#27AAE1",points:"37.2,-3.9 36.6,-3.9 36.6,-3.9 37.2,-3.9 \t"}),c.a.createElement("circle",{cx:"36.9",cy:"32.8",r:"7.8",style:e.style})))},Y=function(e){var a=function(e){var a={},t="";switch(e){case"primary":t="var(--color-primary-1)";break;case"secondary":t="var(--color-secondary-1)";break;case"tertiary":t="var(--color-tertiary-1)";break;case"success":t="var(--color-success)";break;case"failure":t="var(--color-failure)";break;case"warning":t="var(--color-warning)";break;default:t=e||"var(--color-foreground-1)"}return a.fill=t,a.color=t,a.stroke=t,a},t=function(){var a={};return a.fontSize=e.size?e.size:"24px",e.svg&&(a.height=e.size?e.size:"24px",a.width="auto"),a};return c.a.createElement("div",{className:"oak-icon"},e.mat&&c.a.createElement("i",{className:"material-icons",style:Object(s.a)({},a(e.color),{},t())},e.mat),e.fa&&c.a.createElement("i",{className:"fontawesome-icons ".concat(e.fa),style:Object(s.a)({},a(e.color),{},t())},e.mat),e.svg&&"send"===e.svg&&c.a.createElement(G,{style:a(e.color),accent:e.accent&&a(e.accent),dimension:t()}),e.svg&&"ioak"===e.svg&&c.a.createElement(q,{style:a(e.color),accent:e.accent&&a(e.accent),dimension:t()}))},W=function(e){return c.a.createElement("button",{className:"oak-button ".concat(function(){var a=e.theme?e.theme:"";return a+=e.variant?" ".concat(e.variant):"",e.children||(a+=" icon"),a+=e.invert?" invert":"",a+=e.small?" small":"",a+=e.align?" align-".concat(e.align):""}()),onClick:e.action},c.a.createElement("div",{className:"button-label-container"},e.icon&&c.a.createElement(Y,{mat:e.icon,size:"1.2em"}),e.fa&&c.a.createElement(Y,{fa:e.fa,size:"1.2em"}),e.svg&&c.a.createElement(Y,{svg:e.svg,size:"1.2em"}),e.children&&e.children))},J=t(28),K=t.n(J),$="https://oneauth-service.herokuapp.com";function Q(e,a){return K.a.get($+e,a)}function X(e,a,t){return K.a.post($+e,a,t)}function Z(e,a,t){return K.a.put($+e,a,t)}function ee(e,a){return K.a.delete($+e,a)}var ae=Object(u.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){var a=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",repeatpassword:"",resetCode:""}),t=Object(l.a)(a,2),r=t[0],i=t[1],o=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",repeatpassword:""}),u=Object(l.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)("userdetails"),f=Object(l.a)(p,2),h=f[0],g=f[1],E=function(a){a.preventDefault();var t="/auth/".concat(e.loginType);e.space&&(t="".concat(t,"/").concat(e.space));var n={firstName:"",lastName:"",email:"",password:"",repeatpassword:""},c=!1;_("notification",!1),_("login-spinner"),M(r.firstName)&&(c=!0,n.firstName="Cannot be empty"),M(r.lastName)&&(c=!0,n.lastName="Cannot be empty"),M(r.email)&&(c=!0,n.email="Cannot be empty"),/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(r.email.trim().toLowerCase())||(c=!0,n.email="Invalid email"),M(r.password)&&(c=!0,n.password="Cannot be empty"),r.password!==r.repeatpassword&&(c=!0,n.repeatpassword="Password does not match"),c?(d(n),_("login-spinner",!1)):X("".concat(t,"/signup"),{firstName:r.firstName.trim(),lastName:r.lastName.trim(),email:r.email.trim().toLowerCase(),password:r.password},null).then((function(e){200===e.status?(g("created"),_("login-notification",!0,{type:"email-main",message:"Your account has been setup. Your account will be activated after you confirm your email. Please check your email for further instructions"})):_("login-notification",!0,{type:"failure",message:"Unknown error"})})).catch((function(e){var a;403===(null===(a=e.response)||void 0===a?void 0:a.status)?(c=!0,n.email="User account already exists"):_("login-notification",!0,{type:"failure",message:"Unknown error"})})).finally((function(){d(n),_("login-spinner",!1)}))},b=function(e){i(Object(s.a)({},r,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))};return c.a.createElement("form",{method:"GET",onSubmit:function(e){"userdetails"===h&&E(e)},noValidate:!0,className:"login"},"userdetails"===h&&c.a.createElement("div",{className:"form-signup"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!m.firstName&&c.a.createElement("div",{className:"label-text"},"First Name"),m.firstName&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),m.firstName)),c.a.createElement(B,{id:"firstName",data:r,handleChange:function(e){return b(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!m.lastName&&c.a.createElement("div",{className:"label-text"},"Last Name"),m.lastName&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),m.lastName)),c.a.createElement(B,{id:"lastName",data:r,handleChange:function(e){return b(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!m.email&&c.a.createElement("div",{className:"label-text"},"E-mail"),m.email&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),m.email)),c.a.createElement(B,{id:"email",placeholder:"example@domain.com",data:r,handleChange:function(e){return b(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!m.password&&c.a.createElement("div",{className:"label-text"},"Password"),m.password&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),m.password)),c.a.createElement(B,{type:"password",id:"password",placeholder:"Choose a strong password",data:r,handleChange:function(e){return b(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!m.repeatpassword&&c.a.createElement("div",{className:"label-text"},"Retype password"),m.repeatpassword&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),m.repeatpassword)),c.a.createElement(B,{type:"password",id:"repeatpassword",placeholder:"Don't forget it",data:r,handleChange:function(e){return b(e)}}))),c.a.createElement("div",{className:"action"},"userdetails"===h&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{variant:"regular",theme:"primary",action:E},"Create Account"),c.a.createElement("p",{className:"hr"},"or")),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.switchToSigninPage},"Log In"))))}))),te=t(53),ne=t(54),ce=t.n(ne),re=Object(u.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L})(Object(o.b)((function(e){Object(u.c)(),Object(u.d)((function(e){return e.profile}));var a=Object(n.useState)({email:"",password:""}),t=Object(l.a)(a,2),r=t[0],i=t[1],o=Object(n.useState)("hide"),m=Object(l.a)(o,2),d=m[0],p=m[1],f=Object(n.useState)({email:"",password:""}),h=Object(l.a)(f,2),g=h[0],E=h[1],b=function(a){a.preventDefault();var t="/auth/".concat(e.loginType);e.space&&(t="".concat(t,"/").concat(e.space)),console.log(t);var n={email:"",password:""},c=!1;_("notification",!1),_("login-spinner"),p("hide"),M(r.email)?(c=!0,n.email="Cannot be empty"):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(r.email.trim().toLowerCase())||(c=!0,n.email="Invalid email"),M(r.password)&&(c=!0,n.password="Cannot be empty"),c?(E(n),_("login-spinner",!1)):X("".concat(t,"/authorize"),{email:r.email.trim().toLowerCase(),password:r.password},null).then((function(e){v(t,e)})).catch((function(e){var a,t,c;404===(null===(a=e.response)||void 0===a?void 0:a.status)?n.email="User account does not exist":401===(null===(t=e.response)||void 0===t?void 0:t.status)?n.password="Incorrect password":403===(null===(c=e.response)||void 0===c?void 0:c.status)&&(n.email="Email not confirmed",p("showLink"))})).finally((function(){E(n),_("login-spinner",!1)}))},v=function(a,t){200===t.status&&Q("".concat(a,"/session/").concat(t.data.auth_key),null).then((function(a){200===a.status&&(e.space&&e.appId?(e.cookies.set(e.space,t.data.auth_key),w(t,a)):y(t,a))})).catch((function(e){404===e.response.status?_("notification",!0,{type:"failure",message:"Invalid session token",duration:3e3}):401===e.response.status&&_("notification",!0,{type:"failure",message:"Session expired",duration:3e3})}))},w=function(a,t){Q("/app/".concat(e.appId),{headers:{Authorization:t.data.token}}).then((function(t){var n="";Object.keys(e.queryParam).forEach((function(a){["appId","type"].includes(a)||(n+="&".concat(a,"=").concat(e.queryParam[a]))})),window.location.href="".concat(t.data.data.redirect,"?authKey=").concat(a.data.auth_key,"&space=").concat(e.space).concat(n)}))},N=function(e){i(Object(s.a)({},r,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))},y=function(a,t){_("loggedin",!0),e.space?(e.cookies.set(e.space,a.data.auth_key),e.history.push("/".concat(e.loginType,"/").concat(e.space,"/home"))):(e.cookies.set("oneauth",a.data.auth_key),e.history.push("/"))},O=function(a){if(null===a||void 0===a?void 0:a.accessToken){_("spinner");var t="/auth/".concat(e.loginType);e.space&&(t="".concat(t,"/").concat(e.space)),X("".concat(t,"/authorize/facebook"),{email:a.email,firstName:a.first_name,lastName:a.last_name},null).then((function(e){v(t,e)})).finally((function(){_("notification",!1),_("spinner",!1)}))}},j=function(a){if(null===a||void 0===a?void 0:a.tokenId){var t="/auth/".concat(e.loginType);e.space&&(t="".concat(t,"/").concat(e.space)),_("notification",!1),_("spinner"),X("".concat(t,"/authorize/google/").concat(a.tokenId),null,null).then((function(e){v(t,e)})).finally((function(){_("notification",!1),_("spinner",!1)}))}};return c.a.createElement("form",{method:"GET",onSubmit:b,noValidate:!0,className:"login"},c.a.createElement("div",{className:"form-signin"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!g.email&&c.a.createElement("div",{className:"label-text"},"Email"),g.email&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),g.email),"showLink"===d&&c.a.createElement("div",{className:"link",onClick:function(){p("showSent")}},"Resend confirmation link"),"showSent"===d&&c.a.createElement(c.a.Fragment,null,"Activation link sent")),c.a.createElement(B,{id:"email",data:r,handleChange:function(e){return N(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!g.password&&c.a.createElement("div",{className:"label-text"},"Password"),g.password&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),g.password),c.a.createElement("div",{className:"link",onClick:e.switchToResetPage},"Forgot Password?")),c.a.createElement(B,{id:"password",type:"password",data:r,handleChange:function(e){return N(e)}}))),c.a.createElement("div",{className:"action"},c.a.createElement(W,{variant:"regular",theme:"primary",action:b},"Log In"),c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.switchToSignupPage},"Create an account"))),c.a.createElement("div",{className:"space-top-3 social-signin"},c.a.createElement("div",{className:"social-signin-container"},c.a.createElement("div",{className:"social-google"},c.a.createElement(te.GoogleLogin,{clientId:"81306451496-fg67eb502dvfb50c31huhkbn481bi29h.apps.googleusercontent.com",buttonText:"Google",onSuccess:j,onFailure:j,onAutoLoadFinished:j})),c.a.createElement("div",{className:"social-facebook"},c.a.createElement(ce.a,{appId:"696666571109190",textButton:"Facebook",fields:"name,email,picture,first_name,last_name",onClick:O,callback:O,icon:"fa-facebook-square"})))))}))),ie=(t(93),function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"oak-spinner"},c.a.createElement("div",{className:"spinner-wrapper"},c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null),c.a.createElement("span",null))))}),oe=function(){return c.a.createElement("div",{className:"verify-session typography-12"},c.a.createElement("div",null,"verifying session"),c.a.createElement("div",null,c.a.createElement(ie,null)))},se=Object(u.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){var a=Object(n.useState)({email:"",password:"",repeatpassword:""}),t=Object(l.a)(a,2),r=t[0],i=t[1],o=Object(n.useState)("requestLink"),u=Object(l.a)(o,2),m=u[0],d=u[1];Object(n.useEffect)((function(){if(e.authCode){var a="/auth/".concat(e.loginType);e.space&&(a="".concat(a,"/").concat(e.space)),_("login-spinner"),X("".concat(a,"/verifypasswordlink/").concat(e.authCode),{password:r.password},null).then((function(e){200===e.status?d("setPassword"):(d("invalidLink"),_("login-notification",!0,{type:"failure-main",message:"Password reset link you have entered is invalid"}))})).catch((function(){d("invalidLink"),_("login-notification",!0,{type:"failure-main",message:"Password reset link you have entered is invalid"})})).finally((function(){return _("login-spinner",!1)}))}}),[]);var p=Object(n.useState)({email:"",password:"",repeatpassword:""}),f=Object(l.a)(p,2),h=f[0],g=f[1],E=function(a){a.preventDefault();var t="/auth/".concat(e.loginType);e.space&&(t="".concat(t,"/").concat(e.space));var n={email:"",password:"",repeatpassword:""},c=!1;_("notification",!1),_("login-spinner"),M(r.email)?(c=!0,n.email="Cannot be empty"):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(r.email.trim().toLowerCase())||(c=!0,n.email="Invalid email"),c?(g(n),_("login-spinner",!1)):X("".concat(t,"/resetpasswordlink"),{email:r.email.trim().toLowerCase()},null).then((function(e){200===e.status?(d("linkSent"),_("login-notification",!0,{type:"email-main",message:"Link to reset your password has been sent to your email. Please check your email for further instructions"})):n.email="Invalid user email"})).catch((function(){c=!0,n.email="User account does not exist"})).finally((function(){g(n),_("login-spinner",!1)}))},b=function(a){a.preventDefault(),_("login-spinner");var t="/auth/".concat(e.loginType);e.space&&(t="".concat(t,"/").concat(e.space));var n={email:"",password:"",repeatpassword:""},c=!1;M(r.password)&&(c=!0,n.password="Cannot be empty"),r.password!==r.repeatpassword&&(c=!0,n.repeatpassword="Password does not match"),g(n),c?_("login-spinner",!1):X("".concat(t,"/resetpassword/").concat(e.authCode),{password:r.password},null).then((function(e){200===e.status&&(d("passwordUpdated"),_("login-notification",!0,{type:"success-main",message:"Password has been updated. You can login with your new password now"}))})).finally((function(){return _("login-spinner",!1)}))},v=function(e){i(Object(s.a)({},r,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:function(e){"setPassword"===m?b(e):"requestLink"===m&&E(e)},noValidate:!0,className:"login"},"requestLink"===m&&c.a.createElement("div",{className:"form-reset"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!h.email&&c.a.createElement("div",{className:"label-text"},"Email"),h.email&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),h.email)),c.a.createElement(B,{id:"email",placeholder:"Email to send reset link",data:r,handleChange:function(e){return v(e)}}))),"setPassword"===m&&c.a.createElement("div",{className:"form-reset"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!h.password&&c.a.createElement("div",{className:"label-text"},"Set new password"),h.password&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),h.password)),c.a.createElement(B,{type:"password",id:"password",placeholder:"Choose a strong password",data:r,handleChange:function(e){return v(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!h.repeatpassword&&c.a.createElement("div",{className:"label-text"},"Retype password"),h.repeatpassword&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),h.repeatpassword)),c.a.createElement(B,{type:"password",id:"repeatpassword",placeholder:"Don't forget it",data:r,handleChange:function(e){return v(e)}}))),c.a.createElement("div",{className:"action"},"requestLink"===m&&c.a.createElement(W,{variant:"regular",theme:"primary",action:E},"Send Link"),"setPassword"===m&&c.a.createElement(W,{variant:"regular",theme:"primary",action:b},"Update Password"),["setPassword","requestLink"].includes(m)&&c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.switchToSigninPage},"Log In")))))}))),le=Object(u.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){var a=Object(n.useState)({email:"",password:"",repeatpassword:""}),t=Object(l.a)(a,2),r=t[0],i=t[1],o=Object(n.useState)("requestLink"),u=Object(l.a)(o,2),m=u[0],d=u[1];Object(n.useEffect)((function(){if(e.authCode){var a="/auth/".concat(e.loginType);e.space&&(a="".concat(a,"/").concat(e.space)),_("login-spinner"),X("".concat(a,"/verifyemailconfirmationlink/").concat(e.authCode),null,null).then((function(e){200===e.status?(d("confirmed"),_("login-notification",!0,{type:"success-main",message:"Thank you for confirming your email. Your account is active. You can login now"})):(d("invalidLink"),_("login-notification",!0,{type:"failure-main",message:"Email confirmation link you have entered is not valid"}))})).catch((function(){d("invalidLink"),_("login-notification",!0,{type:"failure-main",message:"Email confirmation link you have entered is not valid"})})).finally((function(){return _("login-spinner",!1)}))}}),[]);var p=Object(n.useState)({email:""}),f=Object(l.a)(p,2),h=f[0],g=f[1],E=function(a){a.preventDefault();var t="/auth/".concat(e.loginType);e.space&&(t="".concat(t,"/").concat(e.space));var n={email:""},c=!1;_("notification",!1),_("login-spinner"),M(r.email)?(c=!0,n.email="Cannot be empty"):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(r.email.trim().toLowerCase())||(c=!0,n.email="Invalid email"),c?(g(n),_("login-spinner",!1)):X("".concat(t,"/emailconfirmationlink"),{email:r.email.trim().toLowerCase()},null).then((function(e){200===e.status?(d("linkSent"),_("login-notification",!0,{type:"email-main",message:"Account activation link has been sent to your email. Your account will be activated, post email confirmation. Please check your email for further instructions"})):n.email="Invalid user email"})).catch((function(){c=!0,n.email="User account does not exist"})).finally((function(){g(n),_("login-spinner",!1)}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:function(e){"requestLink"===m&&E(e)},noValidate:!0,className:"login"},"requestLink"===m&&c.a.createElement("div",{className:"form-reset"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!h.email&&c.a.createElement("div",{className:"label-text"},"Email"),h.email&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),h.email)),c.a.createElement(B,{id:"email",placeholder:"Email to activate",data:r,handleChange:function(e){return a=e,void i(Object(s.a)({},r,Object(V.a)({},a.currentTarget.name,a.currentTarget.value)));var a}}))),c.a.createElement("div",{className:"action"},"requestLink"===m&&c.a.createElement(W,{variant:"regular",theme:"primary",action:E},"Send Link"),["requestLink"].includes(m)&&c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.switchToSigninPage},"Log In")))))}))),ue=function(e){return c.a.createElement(c.a.Fragment,null,e.notification.type&&e.notification.message&&c.a.createElement("div",{className:"login-notification"},"email-main"===e.notification.type&&c.a.createElement("div",{className:"record-prominent email"},c.a.createElement("div",null,c.a.createElement(Y,{mat:"mail_outline",size:"60px"})),c.a.createElement("div",null,e.notification.message)),"success-main"===e.notification.type&&c.a.createElement("div",{className:"record-prominent success"},c.a.createElement("div",null,c.a.createElement(Y,{mat:"check_circle_outline",size:"60px",color:"success"})),c.a.createElement("div",null,e.notification.message)),"failure-main"===e.notification.type&&c.a.createElement("div",{className:"record-prominent failure"},c.a.createElement("div",null,c.a.createElement(Y,{mat:"error_outline",size:"60px",color:"failure"})),c.a.createElement("div",null,e.notification.message)),"success"===e.notification.type&&c.a.createElement("div",{className:"record success"},e.notification.message),"failure"===e.notification.type&&c.a.createElement("div",{className:"record failure"},c.a.createElement("div",null,c.a.createElement(Y,{mat:"error_outline",color:"failure"})),c.a.createElement("div",null,e.notification.message))))},me=t(25),de=Object(u.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){var a=Object(u.d)((function(e){return e.authorization})),t=Object(n.useState)("signin"),r=Object(l.a)(t,2),i=r[0],o=r[1],m=Object(n.useState)(""),d=Object(l.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(!1),g=Object(l.a)(h,2),E=g[0],b=g[1],v=Object(n.useState)({type:"",message:""}),w=Object(l.a)(v,2),N=w[0],y=w[1],O=Object(n.useState)(""),j=Object(l.a)(O,2),k=j[0],S=j[1],A=Object(n.useState)(),C=Object(l.a)(A,2),P=C[0],x=C[1],I=Object(n.useState)(!1),z=Object(l.a)(I,2),L=z[0],F=z[1];Object(n.useEffect)((function(){_("navbar",!1);var e=T().subscribe((function(e){"login-spinner"===e.name?(b(e.signal),e.signal&&y({type:"",message:""})):"login-notification"===e.name&&(y(e.data),b(!1))}));return function(){return e.unsubscribe()}}),[]);var R=function(a){y({type:"",message:""}),e.history.push("/space/".concat(e.space,"/login?type=").concat(a))};Object(n.useEffect)((function(){F(!0);var t=null;if(e.location.search){var n=me.parse(e.location.search);x(Object(s.a)({},n)),console.log(n),n&&n.type?o(n.type):o("signin"),n&&n.auth?f(n.auth):f(""),n&&n.appId?(S(n.appId),t=n.appId):S("")}var c=e.cookies.get(e.space);a.isAuth||c?t?U(t,c,me.parse(e.location.search)):e.history.push("/space/".concat(e.space,"/home")):F(!1)}),[e.location.search]);var U=function(a,t,n){console.log(a,t);var c="/auth/space/".concat(e.space);console.log("***********"),console.log(t),Q("".concat(c,"/session/").concat(t),null).then((function(c){console.log(c),200===c.status?V(a,t,c.data.token,n):(e.cookies.remove(e.space),F(!1))})).catch((function(a){e.cookies.remove(e.space),F(!1)}))},V=function(a,t,n,c){Q("/app/".concat(a),{headers:{Authorization:n}}).then((function(a){var n="";Object.keys(c).forEach((function(e){["appId","type"].includes(e)||(n+="&".concat(e,"=").concat(c[e]))})),window.location.href="".concat(a.data.data.redirect,"?authKey=").concat(t,"&space=").concat(e.space).concat(n)}))};return c.a.createElement("div",{className:"space-login"},c.a.createElement("div",{className:"overlay"},c.a.createElement("div",{className:"container smooth-page"},"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Oneauth logo"}),"theme_dark"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Oneauth logo"}),E&&c.a.createElement(ie,null),c.a.createElement(ue,{notification:N}),!L&&"signin"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(re,Object.assign({appId:k,switchToSignupPage:function(){return R("signup")},switchToResetPage:function(){return R("reset")},loginType:"space",queryParam:P},e))),!L&&"signup"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(ae,Object.assign({switchToSigninPage:function(){return R("signin")},loginType:"space"},e))),!L&&"reset"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(se,Object.assign({loginType:"space"},e,{authCode:p,switchToSigninPage:function(){return R("signin")}}))),!L&&"confirmemail"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(le,Object.assign({loginType:"space"},e,{authCode:p,switchToSigninPage:function(){return R("signin")}}))),L&&c.a.createElement(oe,null))))}))),pe=function(){return function(e){e({type:"GET_PROFILE"})}},fe=function(e){return function(a){a({type:"SET_PROFILE",payload:e})}},he=t(58),ge=(t(49),function(e){var a;return c.a.createElement("div",{className:"message ".concat(e.notification.type)},"running"===e.notification.type&&c.a.createElement("div",{className:"message-icon ".concat("running"===e.notification.type?"running":"")},c.a.createElement("i",{className:"material-icons"},"rotate_right")),"success"===e.notification.type&&c.a.createElement("div",{className:"message-icon"},c.a.createElement("i",{className:"material-icons"},"check_circle_outline")),"warning"===e.notification.type&&c.a.createElement("div",{className:"message-icon"},c.a.createElement("i",{className:"material-icons"},"warning")),"failure"===e.notification.type&&c.a.createElement("div",{className:"message-icon"},c.a.createElement("i",{className:"material-icons"},"error_outline")),c.a.createElement("div",{className:"message-text"},null===(a=e.notification)||void 0===a?void 0:a.message),c.a.createElement("div",{className:"message-action"},c.a.createElement("i",{className:"material-icons",onClick:e.handleRemove},"clear")))}),Ee=function(){var e=Object(n.useState)(!1),a=Object(l.a)(e,2),t=a[0],r=a[1],i=Object(n.useState)([]),o=Object(l.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)({notificationList:[]}),d=Object(l.a)(m,2),p=(d[0],d[1],function(e){u(s.filter((function(a){return a.id!==e.id})))});return Object(n.useEffect)((function(){var e=T().subscribe((function(e){"notification"===e.name&&(e.signal?(p(e.data),function(e){var a=Object(he.a)(s);a.unshift(e),u(a),e.duration?setTimeout((function(){p(e)}),e.duration):e.id||setTimeout((function(){p(e)}),5e3)}(e.data),r(!1)):p(e.data)),"spinner"===e.name&&r(e.signal)}));return function(){return e.unsubscribe()}}),[]),c.a.createElement(c.a.Fragment,null,s&&s.length>0&&c.a.createElement("div",{className:"notification"},s.slice(0,5).reverse().map((function(e){return c.a.createElement("div",{key:e.id||e.message},c.a.createElement(ge,{notification:e,handleRemove:p}))}))),t&&c.a.createElement(ie,{"data-test":"spinner"}))},be=(t(26),t(19)),ve=function(e){return c.a.createElement("div",{className:"links"},e.authorization.isAuth&&c.a.createElement(c.a.Fragment,null,c.a.createElement(be.a,{to:"/home",className:"navitem",activeClassName:"active"},"Home"),c.a.createElement(be.a,{to:"/managespace",className:"navitem",activeClassName:"active"},"Manage Space"),c.a.createElement(be.a,{to:"/manageapp",className:"navitem",activeClassName:"active"},"Manage App")))},we=function(e){return c.a.createElement("div",{className:"links"},e.authorization.isAuth&&c.a.createElement(c.a.Fragment,null,c.a.createElement(be.a,{to:"/space/".concat(e.space,"/home"),className:"navitem",activeClassName:"active"},"Home"),c.a.createElement(be.a,{to:"/space/".concat(e.space,"/test"),className:"navitem",activeClassName:"active"},"Test Page")))},Ne=(t(106),function(e){var a,t;return c.a.createElement("div",{className:"oak-avatar"},c.a.createElement("div",{className:"".concat(e.size?e.size:""," avatar-icon typography-6")},"".concat(null===(a=e.firstName)||void 0===a?void 0:a.substring(0,1)).concat(null===(t=e.lastName)||void 0===t?void 0:t.substring(0,1))),e.showName&&c.a.createElement("div",{className:"avatar-name"},e.firstName))}),ye=(t(107),function(e){var a=Object(n.useState)(!1),t=Object(l.a)(a,2),r=t[0],i=t[1],o=Object(n.useState)({}),u=Object(l.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(x()),f=Object(l.a)(p,2),h=f[0];f[1];Object(n.useEffect)((function(){g()}),[e.children]);var g=function(){var a={};c.a.Children.toArray(e.children).forEach((function(e){a=Object(s.a)({},a,Object(V.a)({},e.props.slot,e))})),d(a)};Object(n.useEffect)((function(){window.addEventListener("click",(function(e){var a;(null===(a=document.getElementById(h))||void 0===a?void 0:a.contains(e.target))||i(!1)}))}));var E=function(){i(!r)};return c.a.createElement("div",{className:"oak-popover-menu ".concat(function(){var a=e.theme?e.theme:"";return a+=e.labelVariant?" ".concat(e.labelVariant):"",a+=e.width?" ".concat(e.width):""}()),id:h},!m.label&&c.a.createElement("div",{className:"label ".concat(function(){var a=r?"active":"";return a+=e.mobilize?" short-label":""}()),onClick:E},e.iconLeft&&c.a.createElement("div",{className:"left-icon"},c.a.createElement(Y,{mat:e.iconLeft})),c.a.createElement("div",{className:"label-text"},e.label),c.a.createElement("div",{className:"right-icon"},c.a.createElement(Y,{mat:e.iconRight}))),m.label&&c.a.createElement("div",{className:"label-custom",onClick:E},m.label),c.a.createElement("div",{className:"dropdown-content ".concat(function(){var a=r?"show":"hide";return a+=e.right?" right":""}()),onClick:E},e.elements.map((function(e){return c.a.createElement("div",{"v-for":"element in elements",key:e.label,className:"element",onClick:e.action},c.a.createElement(Y,{mat:e.icon}),e.label)}))))}),Oe=function(e){var a=Object(n.useState)(!1),t=Object(l.a)(a,2),r=(t[0],t[1]),i=Object(u.d)((function(e){return e.authorization})),o=Object(n.useState)([]),s=Object(l.a)(o,2),m=s[0],d=s[1];Object(n.useEffect)((function(){i.isAuth?d([{label:"Profile settings",action:e.editProfile,icon:"settings"},{label:"Sign out",action:e.logout,icon:"exit_to_app"}]):(console.log(e.space),d([{label:"Sign in",action:function(){return p("signin")},icon:"person"},{label:"Sign up",action:function(){return p("signup")},icon:"person_add"}]))}),[i.isAuth,e.space]),Object(n.useEffect)((function(){T().subscribe((function(e){"show-navbar-element"===e.name&&r(e.signal)}))}),[]);var p=function(a){e.login(a)};return c.a.createElement("div",{className:e.transparent?"navbar desktop transparent":"navbar desktop"},c.a.createElement("div",{className:"left"},!e.transparent&&"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Oneauth logo"}),(e.transparent||"theme_dark"===e.profile.theme)&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Oneauth logo"}),!e.space&&c.a.createElement(ve,{authorization:e.authorization,profile:e.profile}),e.space&&c.a.createElement(we,{authorization:e.authorization,profile:e.profile,space:e.space})),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"action"},c.a.createElement(ye,{elements:m,theme:"primary",right:!0},c.a.createElement("div",{slot:"label",className:"action-item"},(null===i||void 0===i?void 0:i.isAuth)&&c.a.createElement(Ne,{firstName:null===i||void 0===i?void 0:i.firstName,lastName:null===i||void 0===i?void 0:i.lastName}),!(null===i||void 0===i?void 0:i.isAuth)&&c.a.createElement("i",{className:"material-icons"},"person"))))))},je=t(38),ke=t.n(je),Se=(t(108),new(t(129).a)("")),Ae=new A.a,Ce=function(e){var a=Object(n.useState)(""),t=Object(l.a)(a,2),r=t[0],i=t[1];Object(n.useEffect)((function(){var e=Se.subscribe((function(e){i(e)}));return function(){return e.unsubscribe()}}),[]);return c.a.createElement("form",{method:"GET",onSubmit:function(e){e.preventDefault(),Ae.next(r)},noValidate:!0},c.a.createElement("div",{className:"search-bar".concat(e.alt?" alt":"")},c.a.createElement("input",{name:"searchText",spellCheck:!1,autoComplete:"off",autoFocus:!0,placeholder:"Mirror, mirror, on the wall, who's the fairest of them all?",required:!0,value:r,onChange:function(e){Se.next(e.target.value)}}),c.a.createElement("button",{className:"icon"},c.a.createElement("i",null,c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},c.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}))))))},Pe=function(e){var a=Object(n.useState)({showSearchBar:!1,menu:!1}),t=Object(l.a)(a,2),r=t[0],i=t[1];Object(n.useEffect)((function(){e.getProfile()}),[]),Object(n.useEffect)((function(){T().subscribe((function(e){"show-navbar-element"===e.name&&i(Object(s.a)({},r,{showSearchBar:e.signal}))}))}),[]);var o=function(){i(Object(s.a)({},r,{menu:!r.menu}))},u=function(a){e.login(a)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:e.transparent?"navbar mobile transparent":"navbar mobile"},c.a.createElement("div",{className:"left"},!r.showSearchBar&&!e.transparent&&"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Mirror logo"}),!r.showSearchBar&&(e.transparent||"theme_dark"===e.profile.theme)&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Mirror logo"}),r.showSearchBar&&!e.transparent&&"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:ke.a,alt:"Mirror logo"}),r.showSearchBar&&(e.transparent||"theme_dark"===e.profile.theme)&&c.a.createElement("img",{className:"logo",src:ke.a,alt:"Mirror logo"}),r.showSearchBar&&c.a.createElement(Ce,{alt:!0})),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:r.menu?"menu active":"menu",onClick:o},c.a.createElement("div",null)))),c.a.createElement("div",{className:r.menu?"slider show":"slider hide",onClick:o},c.a.createElement("div",{className:r.menu?"container":"container hidetext",onClick:o},c.a.createElement("div",{className:"action"},c.a.createElement("div",{className:"buttons"},e.authorization.isAuth&&c.a.createElement(W,{variant:"appear",small:!0,action:e.logout},c.a.createElement("i",{className:"material-icons"},"power_settings_new"),"Logout"),!e.authorization.isAuth&&c.a.createElement(W,{variant:"appear",small:!0,action:function(){return u("signin")}},c.a.createElement("i",{className:"material-icons"},"person"),"Login"),!e.authorization.isAuth&&c.a.createElement(W,{variant:"appear",small:!0,action:function(){return u("signup")}},c.a.createElement("i",{className:"material-icons"},"person_add"),"Signup"))),!e.space&&c.a.createElement(ve,{authorization:e.authorization,profile:e.profile}),e.space&&c.a.createElement(we,{authorization:e.authorization,profile:e.profile,space:e.space}))))},_e=(t(109),function(e){var a=Object(n.useState)(!1),t=Object(l.a)(a,2),r=t[0],i=t[1];Object(n.useEffect)((function(){r!==e.visible&&(e.visible?i(e.visible):setTimeout((function(){return i(e.visible)}),250))}),[e.visible]),Object(n.useEffect)((function(){return document.addEventListener("keydown",o,!1),function(){return document.removeEventListener("keydown",o,!1)}}),[r]);var o=function(a){27===a.keyCode&&r&&e.toggleVisibility()},s=function(){var a="";return a+=e.noheader?" noheader":"",a+=e.fullscreen?" fullscreen":"",a+=e.donotMobilize?"":" mobilize"};return c.a.createElement(c.a.Fragment,null,r&&c.a.createElement("div",{className:e.visible?"modal-root show ".concat(s()):"modal-root hide ".concat(s())},c.a.createElement("div",{className:"backdrop-fade",onClick:e.toggleVisibility}),c.a.createElement("div",{className:"oak-modal"},c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:e.visible?"container":"container hidetext"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"icon"},"N"),c.a.createElement("div",{className:"label one-liner"},e.label)),c.a.createElement("div",{className:"right"},c.a.createElement("div",{onClick:e.toggleVisibility},c.a.createElement("i",{className:"material-icons modal-close-icon"},"close")))),e.children)))))}),Te=(t(110),t(111),function(e){var a=Object(n.useState)(""),t=Object(l.a)(a,2),r=t[0],i=t[1],o=Object(n.useState)({}),u=Object(l.a)(o,2),m=u[0],d=u[1];Object(n.useEffect)((function(){r||i(e.meta&&e.meta.length>0?e.meta[0].slotName:""),p()}),[e.meta,e.children]);var p=function(){var a={};c.a.Children.toArray(e.children).forEach((function(e){a=Object(s.a)({},a,Object(V.a)({},e.props.slot,e))})),d(a)},f=function(e){i(e)};return c.a.createElement("div",{className:"oak-tab"},c.a.createElement("div",{className:"header"},e.meta.map((function(e){return c.a.createElement("div",{key:e.slotName,className:"tab typography-6 ".concat(r===e.slotName?"active":""),onClick:function(){return f(e.slotName)}},c.a.createElement("div",{className:"icon"},c.a.createElement("i",{className:"material-icons typography-8 ".concat(r===e.slotName?"active":"")},e.icon)),c.a.createElement("div",{className:"label"},e.label))}))),e.meta.map((function(e){return c.a.createElement("div",{key:e.slotName,className:"tab typography-6 ".concat(r===e.slotName?"active":""),onClick:function(){return f(e.slotName)}})})),e.meta.map((function(e){return c.a.createElement("div",{key:e.slotName,className:"content ".concat(e.slotName===r?"active":"inactive")},m[e.slotName])})))}),xe=(t(112),function(e){return c.a.createElement("div",{className:"oak-text"},!e.multiline&&c.a.createElement("input",{disabled:e.disabled,autoComplete:"off",className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),type:e.type?e.type:"text",name:e.id,id:e.id,value:e.data[e.id],onChange:e.handleChange,onFocus:function(){e.handleFocus&&e.handleFocus()}}),e.multiline&&c.a.createElement("textarea",{disabled:e.disabled,className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),id:e.id,name:e.id,value:e.data[e.id],onChange:e.handleChange}),c.a.createElement("label",{htmlFor:e.id,className:e.data[e.id]?"active":""},e.label))}),Ie=function(e){var a=Object(u.d)((function(e){return e.authorization})),t=Object(n.useState)({oldPassword:"",newPassword:"",repeatPassword:""}),r=Object(l.a)(t,2),i=r[0],o=r[1],m=Object(n.useState)([{slotName:"details",label:"Basic details",icon:"subject"},{slotName:"password",label:"Change Password",icon:"security"}]),d=Object(l.a)(m,2),p=d[0],f=(d[1],function(e){o(Object(s.a)({},i,Object(V.a)({},e.target.name,e.target.value)))});return c.a.createElement("div",{className:"profile-settings"},c.a.createElement(Te,{meta:p},c.a.createElement("div",{slot:"details"},"details"),c.a.createElement("div",{slot:"password",className:"change-password"},c.a.createElement(xe,{type:"password",label:"Old password",data:i,id:"oldPassword",handleChange:function(e){return f(e)}}),c.a.createElement(xe,{type:"password",label:"New password",data:i,id:"newPassword",handleChange:function(e){return f(e)}}),c.a.createElement(xe,{type:"password",label:"Retype password",data:i,id:"repeatPassword",handleChange:function(e){return f(e)}}),c.a.createElement(W,{theme:"primary",variant:"drama",action:function(){var t="/auth";e.space&&(t="/auth/".concat(e.space)),X("".concat(t,"/changepassword"),{userId:a.userId,oldPassword:i.oldPassword,newPassword:i.newPassword},{headers:{Authorization:a.token}}).then((function(e){200===e.status?o({oldPassword:"",newPassword:"",repeatPassword:""}):_("notification",!0,{type:"failure",message:"Failed with error",duration:3e3})})).catch((function(e){401===e.response.status?_("notification",!0,{type:"failure",message:"Password incorrect. Please enter your right credentials to update password",duration:3e3}):_("notification",!0,{type:"failure",message:"Failed with error",duration:3e3})}))}},"Update password"))))},ze=Object(u.b)((function(e){return{profile:e.profile}}),{getProfile:pe,setProfile:fe})(Object(o.b)(Object(O.withRouter)((function(e){Object(u.c)(),Object(u.d)((function(e){return e.profile}));var a=Object(n.useState)({visible:!1,mobilemenu:"hide",chooseTheme:!1,showSettings:!1,transparentNavBar:!1,firstLoad:!0,showNavbar:!1,editProfileDialog:!1}),t=Object(l.a)(a,2),r=t[0],i=t[1],o=Object(n.useState)(""),m=Object(l.a)(o,2),d=m[0],p=m[1];Object(n.useEffect)((function(){T().subscribe((function(e){"spaceChange"===e.name&&p(e.data)}))}),[]),Object(n.useEffect)((function(){T().subscribe((function(e){"navbar"===e.name&&i(Object(s.a)({},r,{showNavbar:e.signal})),"loggedin"===e.name&&i(Object(s.a)({},r,{firstLoad:!1}))}))}),[]),Object(n.useEffect)((function(){r.firstLoad&&e.authorization&&e.authorization.isAuth&&i(Object(s.a)({},r,{firstLoad:!1}))}),[e.authorization.isAuth]);var f=function(){"theme_dark"===e.profile.theme?e.setProfile(Object(s.a)({},e.profile,{theme:"theme_light"})):e.setProfile(Object(s.a)({},e.profile,{theme:"theme_dark"}))},h=function(a){d?e.history.push("/space/".concat(d,"/login?type=").concat(a)):e.history.push("/login?type=".concat(a))},g=function(){var a="/auth/oa",t=e.cookies.get("oneauth");d&&(t=e.cookies.get(d),a="/auth/".concat(d)),X("".concat(a,"/session/").concat(t,"/invalidate"),null,null).then((function(a){200!==a.status&&404!==a.status||(e.removeAuth(),d?(e.cookies.remove(d),e.history.push("/space/".concat(d,"/home")),_("notification",!0,{type:"success",message:"Signed out of space ".concat(d),duration:3e3})):(e.cookies.remove("oneauth"),e.history.push("/home"),_("notification",!0,{type:"success",message:"Signed out of oneauth",duration:3e3})))}))},E=function(){i(Object(s.a)({},r,{showSettings:!r.showSettings}))};return c.a.createElement(c.a.Fragment,null,r.showNavbar&&c.a.createElement("div",{className:"nav"},c.a.createElement(Oe,Object.assign({},e,{logout:g,login:h,toggleSettings:E,transparent:r.transparentNavBar,toggleDarkMode:f,space:d,editProfile:function(){return i(Object(s.a)({},r,{editProfileDialog:!0}))}})),c.a.createElement(Pe,Object.assign({},e,{logout:g,login:h,toggleSettings:E,transparent:r.transparentNavBar,toggleDarkMode:f,space:d})),c.a.createElement(_e,{fullscreen:!0,label:"User profile settings",visible:r.editProfileDialog,toggleVisibility:function(){return i(Object(s.a)({},r,{editProfileDialog:!r.editProfileDialog}))}},c.a.createElement("div",{className:"modal-body"},c.a.createElement(Ie,{space:d})))))})))),Le={API_URL_TENANT:"/tenant",API_URL_TENANT_BANNER:"/tenant/banner",API_URL_TENANT_CREATE:"/tenant/create",API_TENANT_URL:"/tenant/sendURL",API_URL_PRESIGNUP:"/auth/keys",API_URL_RESET:"/auth/reset",API_URL_CODE:"/auth/sendResetCode",API_URL_USER_DETAILS:"/user/details",API_URL_STAGE:"/stage",API_URL_PREDICT:"/model/predict",API_URL_ARTICLE:"/article",API_URL_CATEGORY:"/category",API_URL_FAQ:"/faq",API_URL_SR:"/servicerequests",API_URL_USER:"/user",API_URL:"/auth/",API_SIGNIN:"/signin",API_SIGNUP:"/signup",API_KEYS:"/keys",API_JWT:"/signin/jwt",API_SPACE_CREATE:"/space/create",API_SPACE_FETCH:"/space",API_SPACE_DELETE:"/space/delete",API_APP_FETCH:"/app",API_APP_DELETE:"/app/delete",API_ROLE_FETCH:"/role",API_PERMITTED_SPACE:"/permittedspace",API_HEALTHCHECK_HELLO:"/healthcheck/hello"},Fe=function(e){return function(a){Q("".concat(Le.API_SPACE_FETCH,"/"),{headers:{Authorization:e.token}}).then((function(e){a({type:"UPDATE_SPACE",payload:{data:e.data.data}})}))}},Re=function(e){return function(a){Q("".concat(Le.API_APP_FETCH,"/"),{headers:{Authorization:e.token}}).then((function(e){a({type:"UPDATE_APP",payload:{data:e.data}})}))}},De=function(e){return function(a){Q("".concat(Le.API_URL),{headers:{Authorization:e.token}}).then((function(e){a({type:"FETCH_ALL_USERS",payload:{data:e.data.data}})}))}},Ue=function(e){return function(a){Q("".concat(Le.API_ROLE_FETCH),{headers:{Authorization:e.token}}).then((function(e){a({type:"UPDATE_ROLE",payload:{data:e.data}})}))}},He=function(e,a){return function(t){return Z("".concat(Le.API_ROLE_FETCH,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("role",!0,{action:"updated"}),t(Ue(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}},Ve=function(e){return function(a){Q("".concat(Le.API_PERMITTED_SPACE,"/"),{headers:{Authorization:e.token}}).then((function(e){a({type:"UPDATE_PERMITTED_SPACE",payload:{data:e.data.data}})}))}},Be=(t(113),t(25)),Me=Object(u.b)((function(e){return{authorization:e.authorization,fetchSpace:e.fetchSpace,fetchUsers:e.fetchUsers,existingAdmins:e.fetchRoles,fetchApp:e.fetchApp,fetchPermittedSpace:e.fetchPermittedSpace}}),{getAuth:z,addAuth:L,removeAuth:F,fetchSpace:Fe,fetchUsers:De,fetchRoles:Ue,fetchApp:Re,fetchPermittedSpace:Ve})(Object(o.b)((function(e){var a=Object(u.d)((function(e){return e.authorization})),t=Object(n.useState)("signin"),r=Object(l.a)(t,2),i=r[0],o=r[1],s=Object(n.useState)(""),m=Object(l.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(!1),h=Object(l.a)(f,2),g=h[0],E=h[1],b=Object(n.useState)({type:"",message:""}),v=Object(l.a)(b,2),w=v[0],N=v[1],y=Object(n.useState)(""),O=Object(l.a)(y,2),j=(O[0],O[1]),k=Object(n.useState)(!1),S=Object(l.a)(k,2),A=S[0],C=S[1];Object(n.useEffect)((function(){_("navbar",!1);var e=T().subscribe((function(e){"login-spinner"===e.name?(E(e.signal),e.signal&&N({type:"",message:""})):"login-notification"===e.name&&(N(e.data),E(!1))}));return function(){return e.unsubscribe()}}),[]);var P=function(a){N({type:"",message:""}),e.history.push("/login?type=".concat(a))};return Object(n.useEffect)((function(){if(e.location.search){var a=Be.parse(e.location.search);a&&a.type?o(a.type):o("signin"),a&&a.auth?p(a.auth):p(""),a&&a.appId?j(a.appId):j("")}}),[e.location.search]),Object(n.useEffect)((function(){C(!0);var t=e.cookies.get("oneauth");a.isAuth||t?e.history.push("/home"):C(!1)}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"oa-login smooth-page"},c.a.createElement("div",{className:"side"}),c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"container"},"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Oneauth logo"}),"theme_dark"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Oneauth logo"}),c.a.createElement("div",{className:"admin-console-header"},c.a.createElement("i",{className:"material-icons"},"settings"),c.a.createElement("div",null,"Admin Console")),g&&c.a.createElement(ie,null),c.a.createElement(ue,{notification:w}),!A&&"signin"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(re,Object.assign({switchToSignupPage:function(){return P("signup")},switchToResetPage:function(){return P("reset")},loginType:"oa"},e))),!A&&"signup"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(ae,Object.assign({switchToSigninPage:function(){return P("signin")},loginType:"oa"},e))),!A&&"reset"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(se,Object.assign({},e,{authCode:d,switchToSigninPage:function(){return P("signin")},loginType:"oa"}))),!A&&"confirmemail"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(le,Object.assign({},e,{authCode:d,switchToSigninPage:function(){return P("signin")},loginType:"oa"}))),A&&c.a.createElement(oe,null)))))}))),Ge=function(e){var a=Object(u.d)((function(e){return e.authorization})),t=Object(u.d)((function(e){return e.profile})),n=Object(u.c)(),r=function(e){switch(_("spaceChange",!0,""),e){case"readAuthenticationSpace":return m();case"readAuthenticationAppspace":return d();case"readAuthenticationOa":return l();case"authenticateSpace":return o();case"authenticateAppspace":return s();case"authenticateOa":return i();case"isAdmin":return h();default:return!0}},i=function(){return p("oa")},o=function(){return p("space")},s=function(){return p("appspace")},l=function(){return p("oa",!1)},m=function(){return p("space",!1)},d=function(){return p("appspace",!1)},p=function(t){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("space"===t?_("spaceChange",!0,e.match.params.space):"appspace"===t&&_("appspaceChange",!0,e.match.params.space),a.isAuth)return!0;var r="/auth/".concat(t),i=e.cookies.get("oneauth"),o="oneauth";if("space"===t?(i=e.cookies.get(e.match.params.space),o=e.match.params.space,r="".concat(r,"/").concat(e.match.params.space)):"appspace"===t&&(i=e.cookies.get(e.match.params.appspace),o=e.match.params.appspace,r="".concat(r,"/").concat(e.match.params.appspace)),i)Q("".concat(r,"/session/").concat(i),null).then((function(e){200===e.status&&(n(L({isAuth:!0,token:e.data.token,secret:"",firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,type:e.data.type,userId:e.data.userId})),"oa"===t&&(n(Fe(e.data)),n(De(e.data)),n(Ue(e.data)),n(Re(e.data)),n(Ve(e.data))))})).catch((function(a){e.cookies.remove(o),c&&404===a.response.status?(_("notification",!0,{type:"failure",message:"Invalid session token",duration:3e3}),f(t)):c&&401===a.response.status&&(_("notification",!0,{type:"failure",message:"Session expired",duration:3e3}),f(t))}));else{if(!c)return!0;f(t)}},f=function(a){switch(a){case"space":E(e.match.params.space);break;case"appspace":b(e.match.params.appspace);break;default:g()}},h=function(){return v(),!1},g=function(){e.history.push("/login")},E=function(a){e.history.push("/space/".concat(a,"/login"))},b=function(a){e.history.push("/appspace/".concat(a,"/login"))},v=function(){e.history.push("/".concat(t.space,"/unauthorized"))};return c.a.createElement(c.a.Fragment,null,function(){var a;return console.log(e.middleware),null===(a=e.middleware)||void 0===a||a.forEach((function(e){if(!r(e))return!1})),!0}()&&c.a.createElement(e.component,Object.assign({},e,{profile:t,space:e.match.params.space,appspace:e.match.params.appspace})))},qe=(t(34),t(114),function(e){return c.a.createElement(_e,{visible:e.visible,toggleVisibility:e.toggleVisibility,noheader:!0},c.a.createElement("div",{className:"modal-body typography-8 space-top-4 space-bottom-4 confirmation-text"},e.text?e.text:"Are you sure you want to continue?"),c.a.createElement("div",{className:"modal-footer"},e.children&&e.children,!e.children&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{"data-test":"action-close",action:e.toggleVisibility,theme:"default",variant:"appear",align:"left",fa:"fas fa-times"},"No"),c.a.createElement(W,{"data-test":"action-proceed",action:function(){console.log("triggered action"),e.toggleVisibility(),console.log("before action"),e.action(),console.log("after action")},theme:"primary",variant:"disappear",align:"right",fa:"fas fa-check"},"Yes"))))}),Ye=(t(115),function(e){var a=Object(u.c)(),t=Object(u.d)((function(e){return e.authorization})),r=Object(n.useState)(!1),i=Object(l.a)(r,2),o=i[0],s=i[1];return c.a.createElement("div",{className:"member",id:e.member._id},c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"title typography-6"},e.member.email),c.a.createElement("div",{className:"typography-6"},"".concat(e.member.lastName,", ").concat(e.member.firstName))),c.a.createElement("div",{className:"action"},!o&&e.member.email!==e.owner&&e.member._id!==e.owner&&c.a.createElement("div",{className:"action-item delete",onClick:function(){return s(!o)}},"X"),o&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"action-item cancel",onClick:function(){return s(!o)}},"Cancel"),c.a.createElement("div",{className:"action-item confirm",onClick:function(){e.member.email!==e.owner&&e.member._id!==e.owner&&a(function(e,a,t,n){return function(c){ee("".concat(Le.API_ROLE_FETCH,"/").concat(a,"/").concat(t,"/").concat(n),{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("role",!0,{action:"deleted"}),c(Ue(e)),c(Fe(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(t,e.domainType,e.member._id,e.domainId))}},"Confirm"))))}),We=(t(116),function(e){var a=Object(n.useState)(x()),t=Object(l.a)(a,2),r=t[0],i=(t[1],Object(n.useState)(!1)),o=Object(l.a)(i,2),s=o[0],u=o[1],m=Object(n.useState)(Object(V.a)({},r,"")),d=Object(l.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(void 0),g=Object(l.a)(h,2),E=g[0],b=g[1];Object(n.useEffect)((function(){v(p[r])}),[e.objects]);var v=function(a){b(e.objects.filter((function(e){var t;return null===(t=e.value)||void 0===t?void 0:t.toLowerCase().includes(a.toLowerCase())})))};return Object(n.useEffect)((function(){window.addEventListener("click",(function(e){var a;(null===(a=document.getElementById(r))||void 0===a?void 0:a.contains(e.target))||u(!1)}))}),[]),c.a.createElement("div",{className:"oak-auto-complete",id:r},c.a.createElement("div",{className:"search-bar"},c.a.createElement(xe,{id:r,data:p,label:e.label,handleFocus:function(){u(!0)},handleChange:function(e){f(Object(V.a)({},e.target.name,e.target.value)),v(e.target.value)},placeholder:e.placeholder})),s&&E&&E.length>0&&c.a.createElement("div",{className:"results"},null===E||void 0===E?void 0:E.map((function(a){return c.a.createElement("div",{className:"element",key:a.key,onClick:function(){return t=a.key,u(!1),void e.handleChange(t);var t}},a.value)}))))}),Je=function(e){var a=Object(u.c)(),t=Object(u.d)((function(e){return e.authorization})),r=Object(u.d)((function(e){return e.oaUsers})),i=Object(u.d)((function(e){return e.oaRoles})),o=Object(n.useState)([{}]),s=Object(l.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)({autoCompleteDropdownData:[{}]}),f=Object(l.a)(p,2),h=f[0],g=f[1];Object(n.useEffect)((function(){a(Ue(t))}),[t]),Object(n.useEffect)((function(){var a,t=null===(a=i.data.data)||void 0===a?void 0:a.filter((function(a){return a.domainId===e.space._id})),n=E(t,r.data);d(n)}),[i.data.data]);var E=function(e,a){var t=[];return a.map((function(a){e.map((function(e){a._id.indexOf(e.userId)>-1&&t.push(a)}))})),t};Object(n.useEffect)((function(){var e,a=[];null===(e=r.data)||void 0===e||e.map((function(e){a.push({key:e._id,value:e.email})}));var t=[];m&&m.map((function(e){return t.push({id:e._id})})),a=a.filter((function(e){return!t.some((function(a){return e.key===a.id}))})),g({autoCompleteDropdownData:a})}),[r.data,m]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body"},c.a.createElement("div",{className:"autocomplete-users space-bottom-2"},c.a.createElement(We,{placeholder:"Search by user name",handleChange:function(n){a(He(t,{type:"space",userId:n,domainId:e.space._id}))},objects:h.autoCompleteDropdownData})),c.a.createElement("div",{className:"space-view space-top-2 space-bottom-4",key:r._id},c.a.createElement("div",{className:"list-view-header typography-5"},c.a.createElement("div",{className:"label"},"Email"),c.a.createElement("div",{className:"label"},"Name")),null===m||void 0===m?void 0:m.map((function(a){return c.a.createElement(Ye,{domainType:"space",domainId:e.space._id,member:a,owner:e.space.email})})))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Close")))},Ke=function(e){var a=Object(u.c)(),t=Object(u.d)((function(e){return e.authorization})),r=Object(n.useState)({days:"",hours:"",minutes:"",name:""}),i=Object(l.a)(r,2),o=i[0],m=i[1];Object(n.useEffect)((function(){m(e.space)}),[e.space]);var d=function(e){m(Object(s.a)({},o,Object(V.a)({},e.target.name,e.target.value)))},p=function(e,a){return!M(e)||(_("notification",!0,{type:"failure",message:a,duration:5e3}),!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body"},c.a.createElement(xe,{data:o,id:"name",label:"Space Name",handleChange:function(e){return d(e)}}),c.a.createElement("div",{className:"session-expiry"},c.a.createElement(xe,{data:o,id:"days",type:"number",label:"Expiry in days",handleChange:function(e){return d(e)}}),c.a.createElement(xe,{data:o,id:"hours",type:"number",label:"Expiry in hours",handleChange:function(e){return d(e)}}),c.a.createElement(xe,{data:o,id:"minutes",type:"number",label:"Expiry in minutes",handleChange:function(e){return d(e)}}))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),c.a.createElement(W,{theme:"primary",action:function(){p(o.name,"Space name cannot be empty")&&p(o.days||o.hours||o.minutes,"Session Expiry is not provided")&&a(function(e,a){return function(t){return Z("".concat(Le.API_SPACE_FETCH,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("space",!0,{action:"updated"}),t(Fe(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(t,o))},variant:"regular",align:"right"},c.a.createElement("i",{className:"material-icons"},"double_arrow"),"Update")))},$e=function(e){var a=Object(u.c)(),t=Object(u.d)((function(e){return e.oaRoles})),r=Object(u.d)((function(e){return e.authorization})),i=Object(n.useState)(!1),o=Object(l.a)(i,2),s=o[0],m=o[1],d=Object(n.useState)(!1),p=Object(l.a)(d,2),f=p[0],h=p[1],g=Object(n.useState)(!1),E=Object(l.a)(g,2),b=E[0],v=E[1],w=Object(n.useState)(0),N=Object(l.a)(w,2),y=N[0],O=N[1],j=Object(u.d)((function(e){return e.permittedSpace})),k=Object(n.useState)(0),S=Object(l.a)(k,2),A=S[0],C=S[1];Object(n.useEffect)((function(){var e=T().subscribe((function(e){"space"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("space"," ").concat(e.data.action),duration:5e3}),"updated"===e.data.action&&m(!1),"deleted"===e.data.action&&v(!1)),"role"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("role"," ").concat(e.data.action),duration:5e3}),"updated"===e.data.action&&m(!1),e.data.action)}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){a(Ue(r))}),[r]),Object(n.useEffect)((function(){var a,n=null===(a=t.data.data)||void 0===a?void 0:a.filter((function(a){return a.domainId===e.space._id}));O(null===n||void 0===n?void 0:n.length)}),[t.data.data]),Object(n.useEffect)((function(){var a;console.log(j),console.log(e.space.spaceId);var t=null===(a=j.data)||void 0===a?void 0:a.filter((function(a){return a.spaceId===e.space.spaceId}));console.log(t),C(t.length)}),[j.data]);var P=function(){h(!0)},x=[{label:"Details",action:function(){m(!0)},icon:"edit"},{label:"Administrators",action:P,icon:"people_alt"},{label:"Roles",action:P,icon:"vpn_key"},{label:"Delete Space",action:function(){v(!0)},icon:"delete"}];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"space-item",key:e.space.id},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"title typography-8"},"".concat(e.space.name," (").concat(e.space.spaceId,")")),c.a.createElement("div",{className:"statistics typography-4"},c.a.createElement("div",{className:"administrators",onClick:P},y," Administrator(s)"),c.a.createElement("div",{className:"connected-apps"},A&&0!==A?"".concat(A," Connected App(s)"):"Connected to Open Apps"))),c.a.createElement("div",{className:"action space-top-0"},c.a.createElement(ye,{elements:x,theme:"primary",right:!0},c.a.createElement("div",{slot:"label",className:"action-item"},c.a.createElement("i",{className:"material-icons"},"more_horiz"))))),c.a.createElement(_e,{label:"Edit space",visible:s,toggleVisibility:function(){return m(!s)}},c.a.createElement(Ke,{space:e.space,toggleVisibilityHandler:function(){return m(!s)}})),c.a.createElement(_e,{label:"Space Administrators",visible:f,toggleVisibility:function(){return h(!f)}},c.a.createElement(Je,{space:e.space,toggleVisibilityHandler:function(){return h(!f)}})),c.a.createElement(qe,{action:function(){return a(function(e,a){return function(t){ee("".concat(Le.API_SPACE_DELETE,"/").concat(a),{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("space",!0,{action:"deleted"}),t(Fe(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(r,e.space.spaceId))},visible:b,toggleVisibility:function(){return v(!b)}}))},Qe=function(e){var a=Object(n.useState)(!1),t=Object(l.a)(a,2),r=t[0],i=t[1],o=Object(u.c)(),m=Object(u.d)((function(e){return e.authorization})),d=Object(u.d)((function(e){return e.space})),p=Object(n.useState)({name:"",email:"",password:"",repeatPassword:"",days:"",hours:"",minutes:""}),f=Object(l.a)(p,2),h=f[0],g=f[1],E=Object(n.useState)({text:""}),b=Object(l.a)(E,2),v=b[0],w=b[1],N=Object(n.useState)(void 0),y=Object(l.a)(N,2),O=y[0],j=y[1];Object(n.useEffect)((function(){_("navbar",!0)}),[]),Object(n.useEffect)((function(){console.log(m)}),[m]),Object(n.useEffect)((function(){j(k(d.data,v.text))}),[d.data,v]),Object(n.useEffect)((function(){r||g(Object(s.a)({},h,{name:"",password:"",repeatPassword:"",days:"",hours:"",minutes:""}))}),[r]),Object(n.useEffect)((function(){var e=T().subscribe((function(e){"space"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("space"," ").concat(e.data.action),duration:5e3}),"created"===e.data.action&&i(!1))}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){g(Object(s.a)({},h,{email:m.email}))}),[m]);var k=function(e,a){return M(a)?e:e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(a.toLowerCase())}))},S=function(e,a){return!M(e)||(_("notification",!0,{type:"failure",message:a,duration:5e3}),!1)},A=function(e){g(Object(s.a)({},h,Object(V.a)({},e.target.name,e.target.value)))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"app-page manage-space"},c.a.createElement("div",{className:"space-container smooth-page"},c.a.createElement("div",{className:"top-actions"},c.a.createElement("div",{className:"search-bar"},c.a.createElement(xe,{label:"Type to search",handleChange:function(e){w(Object(s.a)({},v,Object(V.a)({},e.target.name,e.target.value)))},id:"text",data:v})),c.a.createElement("div",{className:"create-action"},c.a.createElement(W,{theme:"primary",action:function(){return i(!r)},variant:"regular",icon:"blur_on"},"New space"))),c.a.createElement("div",{className:"space-list"},null===O||void 0===O?void 0:O.map((function(e){return c.a.createElement("div",{key:e._id},c.a.createElement($e,{id:e._id,space:e}))}))))),c.a.createElement(_e,{label:"New space",visible:r,toggleVisibility:function(){return i(!r)}},c.a.createElement("div",{className:"modal-body"},c.a.createElement(xe,{data:h,id:"name",label:"Space name",handleChange:function(e){return A(e)}}),"oneauth"===m.type&&c.a.createElement(xe,{data:h,id:"email",label:"Administrator Email",disabled:!0,handleChange:function(e){return A(e)}}),"google"===m.type&&c.a.createElement(xe,{data:h,id:"email",label:"Administrator (Google)",disabled:!0,handleChange:function(e){return A(e)}}),"facebook"===m.type&&c.a.createElement(xe,{data:h,id:"email",label:"Administrator (Facebook)",disabled:!0,handleChange:function(e){return A(e)}}),"oneauth"===m.type&&c.a.createElement(c.a.Fragment,null,c.a.createElement(xe,{data:h,id:"password",label:"Administrator Password",type:"password",handleChange:function(e){return A(e)}}),c.a.createElement(xe,{data:h,id:"repeatPassword",label:"Repeat Password",type:"password",handleChange:function(e){return A(e)}})),c.a.createElement("div",{className:"session-expiry"},c.a.createElement(xe,{data:h,id:"days",type:"number",label:"Expiry in days",handleChange:function(e){return A(e)}}),c.a.createElement(xe,{data:h,id:"hours",type:"number",label:"Expiry in hours",handleChange:function(e){return A(e)}}),c.a.createElement(xe,{data:h,id:"minutes",type:"number",label:"Expiry in minutes",handleChange:function(e){return A(e)}}))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:function(){return i(!r)},theme:"default",variant:"appear",align:"left",icon:"close"},"Cancel"),c.a.createElement(W,{action:function(){if(S(h.name,"Space name cannot be empty")&&("oneauth"!==m.type||S(h.password,"Password is not provided"))&&S(h.days||h.hours||h.minutes,"Session Expiry is not provided"))if(h.password!==h.repeatPassword)_("notification",!0,{type:"failure",message:"Password does not match",duration:5e3});else{var e={name:h.name,days:h.days,hours:h.hours,minutes:h.minutes,userId:m.userId};"oneauth"===m.type&&(e.password=h.password),o(function(e,a){return function(t){return X("".concat(Le.API_SPACE_FETCH,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("space",!0,{action:"created"}),t(Fe(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(m,e))}},theme:"primary",variant:"disappear",align:"right",icon:"double_arrow"},"Create"))))},Xe=(t(50),function(e){var a=Object(u.c)(),t=Object(u.d)((function(e){return e.authorization})),r=Object(u.d)((function(e){return e.oaUsers})),i=Object(u.d)((function(e){return e.oaRoles})),o=Object(n.useState)([{}]),s=Object(l.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)({autoCompleteDropdownData:[{}]}),f=Object(l.a)(p,2),h=f[0],g=f[1];Object(n.useEffect)((function(){a(Ue(t))}),[t]),Object(n.useEffect)((function(){var a,t=null===(a=i.data.data)||void 0===a?void 0:a.filter((function(a){return a.domainId===e.app._id})),n=E(t,r.data);d(n)}),[i.data.data]);var E=function(e,a){var t=[];return a.map((function(a){e.map((function(e){a._id.indexOf(e.userId)>-1&&t.push(a)}))})),t};Object(n.useEffect)((function(){var e,a=[];null===(e=r.data)||void 0===e||e.map((function(e){a.push({key:e._id,value:e.email})}));var t=[];m&&m.map((function(e){return t.push({id:e._id})})),a=a.filter((function(e){return!t.some((function(a){return e.key===a.id}))})),g({autoCompleteDropdownData:a})}),[r.data,m]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body"},c.a.createElement("div",{className:"autocomplete-users space-bottom-2"},c.a.createElement(We,{placeholder:"Search by user name",handleChange:function(n){a(He(t,{type:"app",userId:n,domainId:e.app._id}))},objects:h.autoCompleteDropdownData})),c.a.createElement("div",{className:"oaapp-view space-top-2 space-bottom-4",key:r._id},c.a.createElement("div",{className:"list-view-header typography-5"},c.a.createElement("div",{className:"label"},"Email"),c.a.createElement("div",{className:"label"},"Name"),c.a.createElement("div",{className:"label"})),null===m||void 0===m?void 0:m.map((function(a){return c.a.createElement(Ye,{member:a,domainId:e.app._id,domainType:"app",key:a._id,owner:e.app.createdBy})})))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Close")))});t(117);var Ze=function(e){return c.a.createElement("div",{className:"oak-check-box ".concat(function(){var a=e.theme?e.theme:"";return a+=e.variant?" ".concat(e.variant):""}())},c.a.createElement("div",{className:"checkbox-container"},c.a.createElement("label",{className:"checkbox"},c.a.createElement("input",{type:"checkbox",name:e.id,checked:e.data[e.id],id:e.id,onChange:function(a){return t=a,void e.handleChange(t);var t},disabled:e.disabled}),c.a.createElement("label",{className:"typography-5",htmlFor:e.id},e.label))))},ea=function(e){var a=Object(u.c)(),t=Object(u.d)((function(e){return e.authorization})),r=Object(n.useState)({name:"",redirect:"",protected:""}),i=Object(l.a)(r,2),o=i[0],m=i[1];Object(n.useEffect)((function(){m(e.app)}),[e.app]);var d=function(e){m(Object(s.a)({},o,Object(V.a)({},e.target.name,e.target.value)))},p=function(e,a){return!M(e)||(_("notification",!0,{type:"failure",message:a,duration:5e3}),!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body two-column"},c.a.createElement(xe,{data:o,id:"name",label:"Application Name",handleChange:function(e){return d(e)}}),c.a.createElement(xe,{data:o,id:"redirect",label:"Redirect URL",handleChange:function(e){return d(e)}}),c.a.createElement(xe,{data:o,id:"jwtpassword",label:"JWT Password",handleChange:function(e){return d(e)}}),c.a.createElement(Ze,{data:o,theme:"primary",id:"protected",label:"Protected application",handleChange:function(e){return a=e,void m(Object(s.a)({},o,Object(V.a)({},a.target.name,a.target.checked)));var a}})),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),c.a.createElement(W,{theme:"primary",action:function(){p(o.name,"App name cannot be empty")&&p(o.redirect,"Redirect url cannot be empty")&&a(function(e,a){return function(t){return Z("".concat(Le.API_APP_FETCH,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("app",!0,{action:"updated"}),t(Re(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(t,o))},variant:"regular",align:"right"},c.a.createElement("i",{className:"material-icons"},"double_arrow"),"Update")))},aa=function(e){var a=Object(n.useState)({_id:"",name:"",redirect:"",jwtpassword:"",protected:!1}),t=Object(l.a)(a,2),r=t[0],i=t[1];Object(n.useEffect)((function(){i(e.app)}),[e.app]);var o=function(e){i(Object(s.a)({},r,Object(V.a)({},e.target.name,e.target.value)))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body two-column"},c.a.createElement(xe,{data:r,id:"appId",label:"Application Id",disabled:!0,handleChange:function(e){return o(e)}}),c.a.createElement(xe,{data:r,id:"name",label:"Application name",disabled:!0,handleChange:function(e){return o(e)}}),c.a.createElement(xe,{data:r,id:"redirect",label:"Redirect url",disabled:!0,handleChange:function(e){return o(e)}}),c.a.createElement(xe,{data:r,id:"jwtpassword",label:"JWT Password",disabled:!0,handleChange:function(e){return o(e)}}),c.a.createElement(Ze,{data:r,id:"protected",label:"Protected application",theme:"primary",disabled:!0,handleChange:function(e){return a=e,void i(Object(s.a)({},r,Object(V.a)({},a.target.name,a.target.checked)));var a}})),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Close")))},ta=(t(118),function(e){var a=Object(u.c)(),t=Object(u.d)((function(e){return e.authorization})),r=Object(n.useState)(!1),i=Object(l.a)(r,2),o=i[0],s=i[1];return c.a.createElement("div",{className:"mapspace",id:e.appSpaceItem._id},c.a.createElement("div",{className:"title typography-6"},e.appSpaceItem.spaceId),c.a.createElement("div",{className:"typography-6"},e.appSpaceItem.name),c.a.createElement("div",{className:"action"},!o&&c.a.createElement("div",{className:"action-item delete",onClick:function(){return s(!o)}},"X"),o&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"action-item cancel",onClick:function(){return s(!o)}},"Cancel"),c.a.createElement("div",{className:"action-item confirm",onClick:function(){a(function(e,a,t){return function(n){ee("".concat(Le.API_PERMITTED_SPACE,"/").concat(a,"/").concat(t),{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("permittedspace",!0,{action:"deleted"}),n(Ve(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(t,e.appSpaceItem.spaceId,e.appId))}},"Confirm"))))}),na=function(e){var a=Object(u.c)(),t=Object(u.d)((function(e){return e.authorization})),r=Object(u.d)((function(e){return e.space})),i=Object(u.d)((function(e){return e.permittedSpace})),o=Object(n.useState)([{}]),s=Object(l.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)({autoCompleteDropdownData:[{}]}),f=Object(l.a)(p,2),h=f[0],g=f[1];Object(n.useEffect)((function(){var a,t=[];null===(a=i.data)||void 0===a||a.filter((function(a){return a.appId===e.app._id?t.push({id:a.spaceId}):""}));var n=[],c=[];null===r||void 0===r||r.data.filter((function(e){return t.some((function(a){return e.spaceId===a.id}))?n.push(e):c.push({key:e.spaceId,value:e.name})})),d(n),g({autoCompleteDropdownData:c})}),[i.data,r.data]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modal-body"},c.a.createElement("div",{className:"autocomplete-space space-bottom-2"},c.a.createElement(We,{placeholder:"Search by space name",handleChange:function(n){a(function(e,a){return function(t){return Z("".concat(Le.API_PERMITTED_SPACE,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("permittedspace",!0,{action:"updated"}),t(Ve(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(t,{appId:e.app._id,spaceId:n}))},objects:h.autoCompleteDropdownData})),c.a.createElement("div",{className:"oaapp-view space-top-2 space-bottom-4",key:r._id},c.a.createElement("div",{className:"list-view-header typography-5"},c.a.createElement("div",{className:"label"},"Name"),c.a.createElement("div",{className:"label"},"SpaceId"),c.a.createElement("div",{className:"label"})),null===m||void 0===m?void 0:m.map((function(a){return c.a.createElement(ta,{appSpaceItem:a,appId:e.app._id,key:a._id})})))),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:e.toggleVisibilityHandler,theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Close")))},ca=function(e){var a=Object(u.c)(),t=Object(u.d)((function(e){return e.oaRoles})),r=Object(u.d)((function(e){return e.permittedSpace})),i=Object(u.d)((function(e){return e.authorization})),o=Object(n.useState)(!1),s=Object(l.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)(!1),f=Object(l.a)(p,2),h=f[0],g=f[1],E=Object(n.useState)(!1),b=Object(l.a)(E,2),v=b[0],w=b[1],N=Object(n.useState)(!1),y=Object(l.a)(N,2),O=y[0],j=y[1],k=Object(n.useState)(!1),S=Object(l.a)(k,2),A=S[0],C=S[1],P=Object(n.useState)(0),x=Object(l.a)(P,2),I=x[0],z=x[1],L=Object(n.useState)(0),F=Object(l.a)(L,2),R=F[0],D=F[1];Object(n.useEffect)((function(){var e=T().subscribe((function(e){"app"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("app"," ").concat(e.data.action),duration:5e3}),"updated"===e.data.action&&d(!1),"deleted"===e.data.action&&C(!1)),"role"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("role"," ").concat(e.data.action),duration:5e3}),"updated"===e.data.action&&d(!1))}));return function(){return e.unsubscribe()}})),Object(n.useEffect)((function(){a(Ue(i))}),[i]),Object(n.useEffect)((function(){var a,n=null===(a=t.data.data)||void 0===a?void 0:a.filter((function(a){return a.domainId===e.app._id}));z(null===n||void 0===n?void 0:n.length)}),[t.data.data]),Object(n.useEffect)((function(){var a,t=null===(a=r.data)||void 0===a?void 0:a.filter((function(a){return a.appId===e.app._id}));console.log(t.length),D(t.length)}),[r.data]);var U=function(){d(!0)},H=function(){w(!0)},V=function(){C(!0)},B=e.app.protected?[{label:"Permitted Space",action:function(){j(!0)},icon:"edit"},{label:"Details",action:U,icon:"edit"},{label:"Administrators",action:H,icon:"people_alt"},{label:"Roles",action:H,icon:"vpn_key"},{label:"Delete App",action:V,icon:"delete"}]:[{label:"Details",action:U,icon:"edit"},{label:"Administrators",action:H,icon:"people_alt"},{label:"Roles",action:H,icon:"vpn_key"},{label:"Delete App",action:V,icon:"delete"}];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"oaapp-item",key:e.app._id},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"title typography-8",onClick:function(){g(!0)}},"".concat(e.app.name)),c.a.createElement("div",{className:"redirect typography-6"},"".concat(e.app.redirect)),c.a.createElement("div",{className:"statistics typography-4"},c.a.createElement("div",{className:"administrators",onClick:H},I," Administrators"),c.a.createElement("div",null,e.app.protected?"".concat(R," Connected Space(s)"):"Open App"))),c.a.createElement("div",{className:"action space-top-0"},c.a.createElement(ye,{elements:B,theme:"primary",right:!0},c.a.createElement("div",{slot:"label",className:"action-item"},c.a.createElement("i",{className:"material-icons"},"more_horiz")))),c.a.createElement(_e,{label:"Map Space",visible:O,toggleVisibility:function(){return j(!O)}},c.a.createElement(na,{app:e.app,toggleVisibilityHandler:function(){return j(!O)}})),c.a.createElement(_e,{label:"Edit App",visible:m,toggleVisibility:function(){return d(!m)}},c.a.createElement(ea,{app:e.app,toggleVisibilityHandler:function(){return d(!m)}})),c.a.createElement(_e,{label:"App Details",visible:h,toggleVisibility:function(){return g(!h)}},c.a.createElement(aa,{app:e.app,toggleVisibilityHandler:function(){return g(!h)}})),c.a.createElement(_e,{label:"App Administrators",visible:v,toggleVisibility:function(){return w(!v)}},c.a.createElement(Xe,{app:e.app,toggleVisibilityHandler:function(){return w(!v)}})),c.a.createElement(qe,{action:function(){return a(function(e,a){return function(t){ee("".concat(Le.API_APP_DELETE,"/").concat(a),{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("app",!0,{action:"deleted"}),t(Re(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}}(i,e.app.appId))},visible:A,toggleVisibility:function(){return C(!A)}})))},ra=function(e){var a=Object(n.useState)(!1),t=Object(l.a)(a,2),r=t[0],i=t[1],o=Object(u.c)(),m=Object(u.d)((function(e){return e.authorization})),d=Object(u.d)((function(e){return e.app.data})),p=Object(n.useState)({name:"",redirect:"",jwtpassword:"",protected:!1}),f=Object(l.a)(p,2),h=f[0],g=f[1],E=Object(n.useState)({text:""}),b=Object(l.a)(E,2),v=b[0],w=b[1],N=Object(n.useState)(void 0),y=Object(l.a)(N,2),O=y[0],j=y[1];Object(n.useEffect)((function(){_("navbar",!0)}),[]),Object(n.useEffect)((function(){j(k(d.data,v.text))}),[d.data,v]),Object(n.useEffect)((function(){r||g(Object(s.a)({},h,{name:"",redirect:"",jwtpassword:"",protected:!1}))}),[r]),Object(n.useEffect)((function(){var e=T().subscribe((function(e){"app"===e.name&&e.signal&&(_("notification",!0,{type:"success",message:"".concat("app"," ").concat(e.data.action),duration:5e3}),"created"===e.data.action&&i(!1))}));return function(){return e.unsubscribe()}}));var k=function(e,a){return M(a)?e:e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(a.toLowerCase())}))},S=function(e,a){return!M(e)||(_("notification",!0,{type:"failure",message:a,duration:5e3}),!1)},A=function(e){g(Object(s.a)({},h,Object(V.a)({},e.target.name,e.target.value)))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"app-page manage-app"},c.a.createElement("div",{className:"oaapp-container smooth-page"},c.a.createElement("div",{className:"top-actions"},c.a.createElement("div",{className:"search-bar"},c.a.createElement(xe,{label:"Type to search",handleChange:function(e){w(Object(s.a)({},v,Object(V.a)({},e.target.name,e.target.value)))},id:"text",data:v})),c.a.createElement("div",{className:"create-action"},c.a.createElement(W,{theme:"primary",action:function(){return i(!r)},variant:"regular",icon:"blur_on"},"New App"))),c.a.createElement("div",{className:"oaapp-list"},null===O||void 0===O?void 0:O.map((function(e){return c.a.createElement(ca,{app:e,key:e._id})}))))),c.a.createElement(_e,{label:"New App",visible:r,toggleVisibility:function(){return i(!r)}},c.a.createElement("div",{className:"modal-body two-column"},c.a.createElement(xe,{data:h,id:"name",label:"Application Name",handleChange:function(e){return A(e)}}),c.a.createElement(xe,{data:h,id:"redirect",label:"Redirect url",handleChange:function(e){return A(e)}}),c.a.createElement(xe,{data:h,id:"jwtpassword",label:"JWT Password",handleChange:function(e){return A(e)}}),c.a.createElement(Ze,{key:h.name,data:h.protected,id:"protected",label:"Protected application",theme:"primary",variant:"circle",handleChange:function(e){return a=e,void g(Object(s.a)({},h,Object(V.a)({},a.target.name,a.target.checked)));var a}})),c.a.createElement("div",{className:"modal-footer"},c.a.createElement(W,{action:function(){return i(!r)},theme:"default",variant:"appear",align:"left"},c.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),c.a.createElement(W,{action:function(){var e,a;S(h.name,"App name can not be empty")&&S(h.redirect,"Redirect url is not provided")&&S(h.jwtpassword,"JWT Password can not be empty")&&o((e=m,a={name:h.name,redirect:h.redirect,jwtpassword:h.jwtpassword,protected:h.protected},function(t){return X("".concat(Le.API_APP_FETCH,"/"),a,{headers:{Authorization:e.token}}).then((function(a){200===a.status&&(_("app",!0,{action:"created"}),t(Re(e)))})).catch((function(e){401===e.response.status&&_("session expired")}))}))},theme:"primary",variant:"disappear",align:"right"},c.a.createElement("i",{className:"material-icons"},"double_arrow"),"Create"))))},ia=(t(29),function(e){var a=Object(u.d)((function(e){return e.authorization})),t=Object(n.useState)({email:"",password:"",repeatpassword:""}),r=Object(l.a)(t,2),i=(r[0],r[1],Object(n.useState)("requestLink")),o=Object(l.a)(i,2),s=(o[0],o[1],Object(n.useState)({email:""})),m=Object(l.a)(s,2),d=(m[0],m[1],function(a){e.history.push("/space/".concat(e.space,"/home?type=").concat(a))});return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:function(e){},noValidate:!0,className:"space-home-link"},c.a.createElement("div",{className:"action"},c.a.createElement("div",{className:"action-group"},a.isAuth&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{variant:"drama",theme:"primary",action:function(){return d("updateProfile")}},"Edit Profile"),c.a.createElement(W,{variant:"drama",theme:"primary",action:function(){return d("changePassword")}},"Change Password"),c.a.createElement(W,{variant:"appear",theme:"tertiary",action:function(){var a="/auth/oa",t=e.cookies.get("oneauth");e.space&&(t=e.cookies.get(e.space),a="/auth/space/".concat(e.space)),X("".concat(a,"/session/").concat(t,"/invalidate"),null,null).then((function(a){200!==a.status&&404!==a.status||(e.removeAuth(),e.cookies.remove(e.space),e.history.push("/space/".concat(e.space,"/home")),_("notification",!0,{type:"success",message:"Signed out of space ".concat(e.space),duration:3e3}))}))}},"Sign out")),!a.isAuth&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{variant:"appear",theme:"primary",action:function(){e.history.push("/space/".concat(e.space,"/login?type=signin"))}},"Sign in"),c.a.createElement(W,{variant:"appear",theme:"primary",action:function(){e.history.push("/space/".concat(e.space,"/login?type=signup"))}},"Sign up"))))))}),oa=function(e){var a=Object(u.d)((function(e){return e.authorization})),t=Object(n.useState)({oldpassword:"",password:"",repeatpassword:""}),r=Object(l.a)(t,2),i=r[0],o=r[1],m=Object(n.useState)("form"),d=Object(l.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)({oldpassword:"",password:"",repeatpassword:""}),g=Object(l.a)(h,2),E=g[0],b=g[1],v=function(e){o(Object(s.a)({},i,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))},w=function(t){"form"===p&&function(t){t.preventDefault();var n="/auth/".concat(e.space),c={oldpassword:"",password:"",repeatpassword:""},r=!1;_("notification",!1),_("login-spinner"),M(i.oldpassword)&&(r=!0,c.oldpassword="Cannot be empty"),M(i.password)&&(r=!0,c.password="Cannot be empty"),i.password!==i.repeatpassword&&(r=!0,c.repeatpassword="Password does not match"),r?(console.log("error"),b(c),_("login-spinner",!1)):(console.log("save"),X("".concat(n,"/changepassword"),{userId:a.userId,oldPassword:i.oldpassword,newPassword:i.password},{headers:{Authorization:a.token}}).then((function(e){200===e.status?(o({oldpassword:"",password:"",repeatpassword:""}),f("passwordUpdated"),_("login-notification",!0,{type:"success-main",message:"Your account password has been updated. You can login with your new password from next time"})):_("login-notification",!0,{type:"failure",message:"Failed to update your password"})})).catch((function(e){401===e.response.status?c.oldpassword="Incorrect password":_("login-notification",!0,{type:"failure",message:"Failed to update your password"})})).finally((function(){b(c),_("login-spinner",!1)})))}(t)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:w,noValidate:!0,className:"space-change-password-link"},"form"===p&&c.a.createElement(c.a.Fragment,null),"form"===p&&c.a.createElement("div",{className:"form-changepassword"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!E.oldpassword&&c.a.createElement("div",{className:"label-text"},"Current password"),E.oldpassword&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),E.oldpassword)),c.a.createElement(B,{id:"oldpassword",type:"password",placeholder:"Type your current password",data:i,handleChange:function(e){return v(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!E.password&&c.a.createElement("div",{className:"label-text"},"New password"),E.password&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),E.password)),c.a.createElement(B,{id:"password",type:"password",placeholder:"Make it a good one",data:i,handleChange:function(e){return v(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!E.repeatpassword&&c.a.createElement("div",{className:"label-text"},"Repeat password"),E.repeatpassword&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),E.repeatpassword)),c.a.createElement(B,{id:"repeatpassword",type:"password",placeholder:"Don't forget it",data:i,handleChange:function(e){return v(e)}}))),c.a.createElement("div",{className:"action"},["form"].includes(p)&&c.a.createElement(W,{variant:"regular",theme:"primary",action:w},"Change Password"),["form"].includes(p)&&c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.goHome},"Back to Home")))))},sa=function(e){var a=Object(u.d)((function(e){return e.authorization})),t=Object(n.useState)({firstName:"",lastName:""}),r=Object(l.a)(t,2),i=r[0],o=r[1],m=Object(n.useState)("form"),d=Object(l.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)({firstName:"",lastName:""}),g=Object(l.a)(h,2),E=g[0],b=g[1];Object(n.useEffect)((function(){console.log(a),o({firstName:a.firstName,lastName:a.lastName})}),[a]);var v=function(e){o(Object(s.a)({},i,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))},w=function(t){"form"===p&&function(t){t.preventDefault();var n="/user/".concat(e.space),c={firstName:"",lastName:""},r=!1;_("notification",!1),_("login-spinner"),M(i.firstName)&&(r=!0,c.firstName="Cannot be empty"),M(i.lastName)&&(r=!0,c.lastName="Cannot be empty"),r?(console.log("error"),b(c),_("login-spinner",!1)):X("".concat(n,"/updateprofile"),{firstName:i.firstName,lastName:i.lastName},{headers:{Authorization:a.token}}).then((function(e){200===e.status?(o({firstName:"",lastName:""}),f("profileUpdated"),_("login-notification",!0,{type:"success-main",message:"Your account password has been updated. You can login with your new password from next time"})):_("login-notification",!0,{type:"failure",message:"Failed to update your password"})})).catch((function(e){_("login-notification",!0,{type:"failure",message:"Failed to update your profile"})})).finally((function(){b(c),_("login-spinner",!1)}))}(t)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:w,noValidate:!0,className:"space-change-password-link"},"form"===p&&c.a.createElement(c.a.Fragment,null),"form"===p&&c.a.createElement("div",{className:"form-changepassword"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!E.firstName&&c.a.createElement("div",{className:"label-text"},"First name"),E.firstName&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),E.firstName)),c.a.createElement(B,{id:"firstName",data:i,handleChange:function(e){return v(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!E.lastName&&c.a.createElement("div",{className:"label-text"},"Last name"),E.lastName&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),E.lastName)),c.a.createElement(B,{id:"lastName",data:i,handleChange:function(e){return v(e)}}))),c.a.createElement("div",{className:"action"},["form"].includes(p)&&c.a.createElement(W,{variant:"regular",theme:"primary",action:w},"Save"),["form"].includes(p)&&c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.goHome},"Back to Home")))))},la=t(25),ua=Object(u.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){Object(u.d)((function(e){return e.authorization}));var a=Object(n.useState)("home"),t=Object(l.a)(a,2),r=t[0],i=t[1],o=Object(n.useState)(!1),s=Object(l.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)({type:"",message:""}),f=Object(l.a)(p,2),h=f[0],g=f[1];Object(n.useEffect)((function(){_("navbar",!1);var e=T().subscribe((function(e){"login-spinner"===e.name?(d(e.signal),e.signal&&g({type:"",message:""})):"login-notification"===e.name&&(g(e.data),d(!1))}));return function(){return e.unsubscribe()}}),[]);var E=function(a){g({type:"",message:""}),e.history.push("/space/".concat(e.space,"/home?type=").concat(a))};return Object(n.useEffect)((function(){if(e.location.search){var a=la.parse(e.location.search);a&&a.type?i(a.type):i("home")}else i("home")}),[e.location.search]),c.a.createElement("div",{className:"space-home"},c.a.createElement("div",{className:"overlay"},c.a.createElement("div",{className:"container smooth-page"},"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Oneauth logo"}),"theme_dark"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Oneauth logo"}),m&&c.a.createElement(ie,null),c.a.createElement(ue,{notification:h}),"home"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(ia,Object.assign({switchToSigninPage:function(){return E("signin")}},e))),"changePassword"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(oa,Object.assign({goHome:function(){return E("home")}},e))),"updateProfile"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(sa,Object.assign({goHome:function(){return E("home")}},e))))))}))),ma=(t(119),function(e){return Object(n.useEffect)((function(){_("navbar",!0)}),[]),c.a.createElement("div",{className:"app-page"},c.a.createElement("div",{className:"app-container"},c.a.createElement("div",{className:"home"},c.a.createElement("div",{className:"typography-10 space-bottom-2"},"Test page"),c.a.createElement("div",{className:"typography-5"},"Test page content here for the space"))))}),da=(t(120),t(25)),pa=Object(u.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){var a=Object(u.d)((function(e){return e.authorization})),t=Object(n.useState)("signin"),r=Object(l.a)(t,2),i=r[0],o=r[1],m=Object(n.useState)(""),d=Object(l.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(!1),g=Object(l.a)(h,2),E=g[0],b=g[1],v=Object(n.useState)({type:"",message:""}),w=Object(l.a)(v,2),N=w[0],y=w[1],O=Object(n.useState)(""),j=Object(l.a)(O,2),k=j[0],S=j[1],A=Object(n.useState)(),C=Object(l.a)(A,2),P=C[0],x=C[1],I=Object(n.useState)(!1),z=Object(l.a)(I,2),L=z[0],F=z[1];Object(n.useEffect)((function(){_("navbar",!1);var e=T().subscribe((function(e){"login-spinner"===e.name?(b(e.signal),e.signal&&y({type:"",message:""})):"login-notification"===e.name&&(y(e.data),b(!1))}));return function(){return e.unsubscribe()}}),[]);var R=function(a){y({type:"",message:""}),e.history.push("/appspace/".concat(e.appspace,"/login?type=").concat(a))};Object(n.useEffect)((function(){F(!0);var t=null;if(e.location.search){var n=da.parse(e.location.search);x(Object(s.a)({},n)),console.log(n),n&&n.type?o(n.type):o("signin"),n&&n.auth?f(n.auth):f(""),n&&n.appId?(S(n.appId),t=n.appId):S("")}var c=e.cookies.get(e.appspace);a.isAuth||c?t?U(t,c,da.parse(e.location.search)):e.history.push("/appspace/".concat(e.appspace,"/home")):F(!1)}),[e.location.search]);var U=function(a,t,n){console.log(a,t);var c="/auth/appspace/".concat(e.appspace);Q("".concat(c,"/session/").concat(t),null).then((function(c){200===c.status?V(a,t,c.data.token,n):(e.cookies.remove(e.appspace),F(!1))})).catch((function(a){e.cookies.remove(e.appspace),F(!1)}))},V=function(a,t,n,c){Q("/app/".concat(a),{headers:{Authorization:n}}).then((function(a){var n="";Object.keys(c).forEach((function(e){["appId","type"].includes(e)||(n+="&".concat(e,"=").concat(c[e]))})),window.location.href="".concat(a.data.data.redirect,"?authKey=").concat(t,"&appspace=").concat(e.appspace).concat(n)}))};return c.a.createElement("div",{className:"appspace-login"},c.a.createElement("div",{className:"overlay"},c.a.createElement("div",{className:"container smooth-page"},"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Oneauth logo"}),"theme_dark"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Oneauth logo"}),E&&c.a.createElement(ie,null),c.a.createElement(ue,{notification:N}),!L&&"signin"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(re,Object.assign({appId:k,switchToSignupPage:function(){return R("signup")},switchToResetPage:function(){return R("reset")},isAppSpaceLogin:!0,queryParam:P},e,{loginType:"appspace",space:e.appspace}))),!L&&"signup"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(ae,Object.assign({switchToSigninPage:function(){return R("signin")},isAppSpaceLogin:!0},e,{loginType:"appspace",space:e.appspace}))),!L&&"reset"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(se,Object.assign({isAppSpaceLogin:!0},e,{authCode:p,loginType:"appspace",switchToSigninPage:function(){return R("signin")},space:e.appspace}))),!L&&"confirmemail"===i&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(le,Object.assign({isAppSpaceLogin:!0},e,{authCode:p,loginType:"appspace",space:e.appspace,switchToSigninPage:function(){return R("signin")}}))),L&&c.a.createElement(oe,null))))}))),fa=(t(30),function(e){var a=Object(u.d)((function(e){return e.authorization})),t=Object(n.useState)({email:"",password:"",repeatpassword:""}),r=Object(l.a)(t,2),i=(r[0],r[1],Object(n.useState)("requestLink")),o=Object(l.a)(i,2),s=(o[0],o[1],Object(n.useState)({email:""})),m=Object(l.a)(s,2),d=(m[0],m[1],function(a){e.history.push("/appspace/".concat(e.appspace,"/home?type=").concat(a))});return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:function(e){},noValidate:!0,className:"space-home-link"},c.a.createElement("div",{className:"action"},c.a.createElement("div",{className:"action-group"},a.isAuth&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{variant:"drama",theme:"primary",action:function(){return d("updateProfile")}},"Edit Profile"),c.a.createElement(W,{variant:"drama",theme:"primary",action:function(){return d("changePassword")}},"Change Password"),c.a.createElement(W,{variant:"appear",theme:"tertiary",action:function(){var a="/auth/".concat("appspace"),t=e.cookies.get("oneauth");e.appspace&&(t=e.cookies.get(e.appspace),a="".concat(a,"/").concat(e.appspace)),X("".concat(a,"/session/").concat(t,"/invalidate"),null,null).then((function(a){200!==a.status&&404!==a.status||(e.removeAuth(),e.cookies.remove(e.appspace),e.history.push("/appspace/".concat(e.appspace,"/home")),_("notification",!0,{type:"success",message:"Signed out of space ".concat(e.appspace),duration:3e3}))}))}},"Sign out")),!a.isAuth&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{variant:"appear",theme:"primary",action:function(){e.history.push("/appspace/".concat(e.appspace,"/login?type=signin"))}},"Sign in"),c.a.createElement(W,{variant:"appear",theme:"primary",action:function(){e.history.push("/appspace/".concat(e.appspace,"/login?type=signup"))}},"Sign up"))))))}),ha=function(e){var a=Object(u.d)((function(e){return e.authorization})),t=Object(n.useState)({oldpassword:"",password:"",repeatpassword:""}),r=Object(l.a)(t,2),i=r[0],o=r[1],m=Object(n.useState)("form"),d=Object(l.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)({oldpassword:"",password:"",repeatpassword:""}),g=Object(l.a)(h,2),E=g[0],b=g[1],v=function(e){o(Object(s.a)({},i,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))},w=function(t){"form"===p&&function(t){t.preventDefault();var n="/auth/".concat("appspace","/").concat(e.appspace),c={oldpassword:"",password:"",repeatpassword:""},r=!1;_("notification",!1),_("login-spinner"),M(i.oldpassword)&&(r=!0,c.oldpassword="Cannot be empty"),M(i.password)&&(r=!0,c.password="Cannot be empty"),i.password!==i.repeatpassword&&(r=!0,c.repeatpassword="Password does not match"),r?(console.log("error"),b(c),_("login-spinner",!1)):(console.log("save"),X("".concat(n,"/changepassword"),{userId:a.userId,oldPassword:i.oldpassword,newPassword:i.password},{headers:{Authorization:a.token}}).then((function(e){200===e.status?(o({oldpassword:"",password:"",repeatpassword:""}),f("passwordUpdated"),_("login-notification",!0,{type:"success-main",message:"Your account password has been updated. You can login with your new password from next time"})):_("login-notification",!0,{type:"failure",message:"Failed to update your password"})})).catch((function(e){401===e.response.status?c.oldpassword="Incorrect password":_("login-notification",!0,{type:"failure",message:"Failed to update your password"})})).finally((function(){b(c),_("login-spinner",!1)})))}(t)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:w,noValidate:!0,className:"space-change-password-link"},"form"===p&&c.a.createElement(c.a.Fragment,null),"form"===p&&c.a.createElement("div",{className:"form-changepassword"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!E.oldpassword&&c.a.createElement("div",{className:"label-text"},"Current password"),E.oldpassword&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),E.oldpassword)),c.a.createElement(B,{id:"oldpassword",type:"password",placeholder:"Type your current password",data:i,handleChange:function(e){return v(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!E.password&&c.a.createElement("div",{className:"label-text"},"New password"),E.password&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),E.password)),c.a.createElement(B,{id:"password",type:"password",placeholder:"Make it a good one",data:i,handleChange:function(e){return v(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!E.repeatpassword&&c.a.createElement("div",{className:"label-text"},"Repeat password"),E.repeatpassword&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),E.repeatpassword)),c.a.createElement(B,{id:"repeatpassword",type:"password",placeholder:"Don't forget it",data:i,handleChange:function(e){return v(e)}}))),c.a.createElement("div",{className:"action"},["form"].includes(p)&&c.a.createElement(W,{variant:"regular",theme:"primary",action:w},"Change Password"),["form"].includes(p)&&c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.goHome},"Back to Home")))))},ga=function(e){var a=Object(u.d)((function(e){return e.authorization})),t=Object(n.useState)({firstName:"",lastName:""}),r=Object(l.a)(t,2),i=r[0],o=r[1],m=Object(n.useState)("form"),d=Object(l.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)({firstName:"",lastName:""}),g=Object(l.a)(h,2),E=g[0],b=g[1];Object(n.useEffect)((function(){console.log(a),o({firstName:a.firstName,lastName:a.lastName})}),[a]);var v=function(e){o(Object(s.a)({},i,Object(V.a)({},e.currentTarget.name,e.currentTarget.value)))},w=function(t){"form"===p&&function(t){t.preventDefault();var n="/user/".concat(e.appspace),c={firstName:"",lastName:""},r=!1;_("notification",!1),_("login-spinner"),M(i.firstName)&&(r=!0,c.firstName="Cannot be empty"),M(i.lastName)&&(r=!0,c.lastName="Cannot be empty"),r?(console.log("error"),b(c),_("login-spinner",!1)):X("".concat(n,"/updateprofile"),{firstName:i.firstName,lastName:i.lastName},{headers:{Authorization:a.token}}).then((function(e){200===e.status?(o({firstName:"",lastName:""}),f("profileUpdated"),_("login-notification",!0,{type:"success-main",message:"Your account password has been updated. You can login with your new password from next time"})):_("login-notification",!0,{type:"failure",message:"Failed to update your password"})})).catch((function(e){_("login-notification",!0,{type:"failure",message:"Failed to update your profile"})})).finally((function(){b(c),_("login-spinner",!1)}))}(t)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{method:"GET",onSubmit:w,noValidate:!0,className:"space-change-password-link"},"form"===p&&c.a.createElement(c.a.Fragment,null),"form"===p&&c.a.createElement("div",{className:"form-changepassword"},c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!E.firstName&&c.a.createElement("div",{className:"label-text"},"First name"),E.firstName&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),E.firstName)),c.a.createElement(B,{id:"firstName",data:i,handleChange:function(e){return v(e)}})),c.a.createElement("div",null,c.a.createElement("div",{className:"label"},!E.lastName&&c.a.createElement("div",{className:"label-text"},"Last name"),E.lastName&&c.a.createElement("div",{className:"error-text"},c.a.createElement(Y,{mat:"warning",color:"warning",size:"20px"}),E.lastName)),c.a.createElement(B,{id:"lastName",data:i,handleChange:function(e){return v(e)}}))),c.a.createElement("div",{className:"action"},["form"].includes(p)&&c.a.createElement(W,{variant:"regular",theme:"primary",action:w},"Save"),["form"].includes(p)&&c.a.createElement("p",{className:"hr"},"or"),c.a.createElement("div",{className:"button-link"},c.a.createElement("div",{className:"link",onClick:e.goHome},"Back to Home")))))},Ea=t(25),ba=Object(u.b)((function(e){return{authorization:e.authorization}}),{getAuth:z,addAuth:L,removeAuth:F})(Object(o.b)((function(e){Object(u.d)((function(e){return e.authorization}));var a=Object(n.useState)("home"),t=Object(l.a)(a,2),r=t[0],i=t[1],o=Object(n.useState)(!1),s=Object(l.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)({type:"",message:""}),f=Object(l.a)(p,2),h=f[0],g=f[1];Object(n.useEffect)((function(){_("navbar",!1);var e=T().subscribe((function(e){"login-spinner"===e.name?(d(e.signal),e.signal&&g({type:"",message:""})):"login-notification"===e.name&&(g(e.data),d(!1))}));return function(){return e.unsubscribe()}}),[]);var E=function(a){g({type:"",message:""}),e.history.push("/".concat("appspace","/").concat(e.appspace,"/home?type=").concat(a))};return Object(n.useEffect)((function(){if(e.location.search){var a=Ea.parse(e.location.search);a&&a.type?i(a.type):i("home")}else i("home")}),[e.location.search]),c.a.createElement("div",{className:"appspace-home"},c.a.createElement("div",{className:"overlay"},c.a.createElement("div",{className:"container smooth-page"},"theme_light"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:H.a,alt:"Oneauth logo"}),"theme_dark"===e.profile.theme&&c.a.createElement("img",{className:"logo",src:D.a,alt:"Oneauth logo"}),m&&c.a.createElement(ie,null),c.a.createElement(ue,{notification:h}),"home"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(fa,Object.assign({switchToSigninPage:function(){return E("signin")}},e))),"changePassword"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(ha,Object.assign({goHome:function(){return E("home")}},e))),"updateProfile"===r&&c.a.createElement("div",{className:"wrapper"},c.a.createElement(ga,Object.assign({goHome:function(){return E("home")}},e))))))}))),va={themecolor1:wa("#69A7BF"),themecolor2:wa("#99587B"),themecolor3:wa("#A66C26"),themecolor4:wa("#37AE82")};function wa(e){return Object(k.a)({palette:{primary:{main:e},secondary:{main:e}}})}var Na=Object(u.b)((function(e){return{authorization:e.authorization,user:e.user,profile:e.profile}}),{getAuth:z,addAuth:L,removeAuth:F,getProfile:pe,setProfile:fe})(Object(o.b)((function(e){Object(n.useEffect)((function(){e.getProfile(),e.getAuth(),e.getAuth()}),[]),Object(n.useEffect)((function(){var e=T().subscribe((function(e){"session expired"===e.name&&a(null,"failure","Session expired. Login again")}));return function(){return e.unsubscribe()}}));var a=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You have been logged out";e.removeAuth(),e.cookies.remove("oneauth"),_("notification",!0,{type:t,message:n,duration:3e3})};return c.a.createElement("div",{className:"App ".concat(e.profile.theme," ").concat(e.profile.textSize," ").concat(e.profile.themeColor)},c.a.createElement(j.HashRouter,null,c.a.createElement("div",{className:"body"},c.a.createElement("div",{className:"body-content"},c.a.createElement(Ee,null),c.a.createElement(S.a,{theme:va.themecolor1},c.a.createElement(ze,Object.assign({},e,{logout:a})),c.a.createElement(O.Route,{exact:!0,path:"/home",render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:I,middleware:["readAuthenticationOa"]}))}}),c.a.createElement(O.Route,{exact:!0,path:"/",render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:I,middleware:["readAuthenticationOa"]}))}}),c.a.createElement(O.Route,{path:"/space/:space/login",render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:de}))}}),c.a.createElement(O.Route,{exact:!0,path:"/space/:space/home",render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:ua,middleware:["readAuthenticationSpace"]}))}}),c.a.createElement(O.Route,{exact:!0,path:"/space/:space",render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:ua,middleware:["readAuthenticationSpace"]}))}}),c.a.createElement(O.Route,{exact:!0,path:"/space/:space/test",render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:ma,middleware:["authenticateSpace"]}))}}),c.a.createElement(O.Route,{path:"/appspace/:appspace/login",render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:pa}))}}),c.a.createElement(O.Route,{exact:!0,path:"/appspace/:appspace/home",render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:ba,middleware:["readAuthenticationAppspace"]}))}}),c.a.createElement(O.Route,{exact:!0,path:"/appspace/:appspace",render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:ba,middleware:["readAuthenticationAppspace"]}))}}),c.a.createElement(O.Route,{path:"/login",render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:Me}))}}),c.a.createElement(O.Route,{path:"/managespace",exact:!0,render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:Qe,middleware:["authenticateOa"]}))}}),c.a.createElement(O.Route,{path:"/manageapp",exact:!0,render:function(t){return c.a.createElement(Ge,Object.assign({},t,e,{logout:function(){return a},component:ra,middleware:["authenticateOa"]}))}}))))))}))),ya=(t(121),function(){Object(u.d)((function(e){return e.authorization})),Object(u.d)((function(e){return e.profile})),Object(u.c)();return c.a.createElement("div",{className:"logo"},c.a.createElement("img",{className:"logo--image",src:D.a,alt:"Oneauth logo"}))}),Oa=(t(122),function(){return c.a.createElement("div",{className:"health-check-failed"},c.a.createElement("div",{className:"health-check-failed--logo"},c.a.createElement(ya,null)),c.a.createElement("div",{className:"health-check-failed--message"},"We are working on improving your experience. We will be back soon. Check back in few hours."))}),ja=(t(123),function(){return c.a.createElement("div",{className:"health-check-progress"},c.a.createElement(ie,null))}),ka=function(e){var a=Object(n.useState)({isVerified:!1,allowAccess:!1}),t=Object(l.a)(a,2),r=t[0],i=t[1];return Object(n.useEffect)((function(){Q(Le.API_HEALTHCHECK_HELLO,{}).then((function(e){200===e.status?i(Object(s.a)({},r,{isVerified:!0,allowAccess:!0})):i(Object(s.a)({},r,{isVerified:!0,allowAccess:!1}))})).catch((function(e){i(Object(s.a)({},r,{isVerified:!0,allowAccess:!1}))}))}),[]),c.a.createElement(u.a,{store:y},r.isVerified&&r.allowAccess&&c.a.createElement(Na,e),r.isVerified&&!r.allowAccess&&c.a.createElement(Oa,null),!r.isVerified&&c.a.createElement(ja,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(o.a,null,c.a.createElement(ka,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[60,1,2]]]);
//# sourceMappingURL=main.9693c679.chunk.js.map